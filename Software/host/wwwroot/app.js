webpackJsonp([1],{

/***/ 1008:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(635);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js!./app.component.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js!./app.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1009:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(636);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./element-list.component.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./element-list.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1010:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(637);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./member-table.component.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./member-table.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1011:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(638);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./scheme-main.component.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./scheme-main.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1012:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(639);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./member-screen.component.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./member-screen.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1013:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(640);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./screen-table.component.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./screen-table.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1014:
/***/ function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(641);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(44)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./screen.component.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./screen.component.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ },

/***/ 1018:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1008);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 1019:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1009);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 102:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
// ReSharper disable InconsistentNaming
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var angular2_jwt_1 = __webpack_require__(130);
var rxjs_1 = __webpack_require__(33);
var http_error_1 = __webpack_require__(34);
var index_1 = __webpack_require__(13);
var CryptoJS = __webpack_require__(290);
var passwordKey = 'pswd';
var usernameKey = 'uname';
/**
 * .net ClaimNames --> UserModel fields mapping
 */
var Claims = (function () {
    function Claims() {
        this['description'] = null;
        this['isadmin'] = null;
        this['login'] = 'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name';
        this['name'] = 'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname';
    }
    return Claims;
}());
/**
 * .net Cryptography.PaddingMode --> CryptoJS.pads mapping
 */
var Pads = (function () {
    function Pads() {
        this['None'] = CryptoJS.pad.NoPadding;
        this['PKCS7'] = CryptoJS.pad.Pkcs7;
        this['Zeros'] = CryptoJS.pad.ZeroPadding;
    }
    return Pads;
}());
exports.Storage = core_1.isDevMode ? localStorage : sessionStorage;
exports.TokenKey = 'token';
/**
 * Служба аутентификации
 */
var AuthService = (function () {
    function AuthService(http) {
        this.http = http;
        this.jwtHelper = new angular2_jwt_1.JwtHelper();
        this.claims = new Claims();
        this.pads = new Pads();
        this.url = core_1.isDevMode() ? "http://localhost:64346" : "";
        this.storage = exports.Storage;
    }
    Object.defineProperty(AuthService.prototype, "isAuthenticated", {
        get: function () {
            var token = this.storage.getItem(exports.TokenKey);
            return (token !== null) && !this.jwtHelper.isTokenExpired(token);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthService.prototype, "LoggedUser", {
        get: function () {
            var user, token = this.storage.getItem(exports.TokenKey);
            if (token != null) {
                user = new index_1.SysUserModel();
                var obj = this.jwtHelper.decodeToken(token);
                for (var key in this.claims) {
                    var value = this.claims[key] || key;
                    user[key] = obj[value];
                }
            }
            return user;
        },
        enumerable: true,
        configurable: true
    });
    AuthService.prototype.login = function (username, password) {
        var _this = this;
        // username & password store in base64
        var item;
        if (!username) {
            item = this.storage.getItem(usernameKey);
            item && (username = CryptoJS.enc.Base64.parse(item).toString(CryptoJS.enc.Utf8));
        }
        if (!password) {
            item = this.storage.getItem(passwordKey);
            item && (password = CryptoJS.enc.Base64.parse(item).toString(CryptoJS.enc.Utf8));
        }
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' });
        var options = new http_1.RequestOptions({ headers: headers });
        var self = this;
        return this.http.post(this.url + "/secret", "username=" + username, options)
            .map(function (r) { return r.json(); })
            .mergeMap(function (o) {
            var cipher = CryptoJS[o.algorithm];
            if (cipher) {
                var key = CryptoJS.enc.Base64.parse(o.key), iv = CryptoJS.enc.Base64.parse(o.iv), mode = CryptoJS.mode[o.mode], pad = _this.pads[o.padding], encrypted = cipher.encrypt(password, key, { iv: iv, mode: mode, padding: pad });
                return _this.http
                    .post(_this.url + "/token", "username=" + username + "&password=" + encrypted + "&key=" + o.key, options)
                    .map(function (r) { return r.json(); })
                    .mergeMap(function (o) {
                    if (o.access_token) {
                        self.storage.setItem(passwordKey, CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(password)));
                        self.storage.setItem(usernameKey, CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(username)));
                        self.storage.setItem(exports.TokenKey, o.access_token);
                    }
                    return rxjs_1.Observable.of(o.access_token);
                });
            }
            else
                return rxjs_1.Observable.throw('Unknown algorithm');
        })
            .catch(http_error_1.handleResponseError);
    };
    AuthService.prototype.logout = function () {
        // clear token remove user from local storage to log user out        
        this.storage.removeItem(passwordKey);
        this.storage.removeItem(usernameKey);
        this.storage.removeItem(exports.TokenKey);
    };
    AuthService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], AuthService);
    return AuthService;
}());
exports.AuthService = AuthService;


/***/ },

/***/ 1020:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1010);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 1021:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1011);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 1022:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1012);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 1023:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1013);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 1024:
/***/ function(module, exports, __webpack_require__) {


        var result = __webpack_require__(1014);

        if (typeof result === "string") {
            module.exports = result;
        } else {
            module.exports = result.toString();
        }
    

/***/ },

/***/ 1027:
/***/ function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {"use strict";
var core_1 = __webpack_require__(1);
var platform_browser_dynamic_1 = __webpack_require__(131);
var app_module_1 = __webpack_require__(400);
if (process.env.ENV === 'production') {
    core_1.enableProdMode();
}
var boot = document.addEventListener('DOMContentLoaded', function () { return platform_browser_dynamic_1.platformBrowserDynamic().bootstrapModule(app_module_1.AppModule); });
module.exports = boot;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(85)))

/***/ },

/***/ 103:
/***/ function(module, exports) {

"use strict";
"use strict";
/**
 * Макет отображения
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Layout;
(function (Layout) {
    Layout[Layout["None"] = 0] = "None";
    Layout[Layout["ShowHeader"] = 1] = "ShowHeader";
    Layout[Layout["ShowFooter"] = 2] = "ShowFooter";
    Layout[Layout["ShowLeftSide"] = 4] = "ShowLeftSide";
    Layout[Layout["ShowRightSide"] = 8] = "ShowRightSide";
})(Layout = exports.Layout || (exports.Layout = {}));


/***/ },

/***/ 104:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var models_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var ConferenceService = (function (_super) {
    __extends(ConferenceService, _super);
    function ConferenceService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/conferences" : "api/conferences";
        return _this;
    }
    /**
     * Изменить период
     * @param id
     * @param start
     * @param end
     */
    ConferenceService.prototype.changePeriod = function (id, start, end) {
        var body = [{ op: 'replace', path: '/startdate', value: start }, { op: 'replace', path: '/enddate', value: end }];
        return this.http
            .patch(this.url + "/" + id, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Изменить состояние
     * @param id
     * @param state
     */
    ConferenceService.prototype.changeState = function (id, state) {
        var body = [{ op: 'replace', path: '/state', value: state }];
        return this.http
            .patch(this.url + "/" + id, body)
            .catch(http_error_1.handleResponseError);
    };
    ConferenceService.prototype.get = function (key) {
        return this.http
            .get(this.url + "/" + key)
            .map(function (r) { return map_utils_1.default.deserialize(models_1.ConferenceModel, r.json()); })
            .catch(http_error_1.handleResponseError);
    };
    ConferenceService.prototype.getAll = function (startDate, endDate, state, hallIds, employeeIds, organizationIds) {
        if (state === void 0) { state = null; }
        if (hallIds === void 0) { hallIds = null; }
        if (employeeIds === void 0) { employeeIds = null; }
        if (organizationIds === void 0) { organizationIds = null; }
        var body = { startDate: startDate, endDate: endDate, state: state };
        hallIds && hallIds.length > 0 && (body.hallIds = hallIds);
        employeeIds && employeeIds.length > 0 && (body.employeeIds = employeeIds);
        organizationIds && organizationIds.length > 0 && (body.organizationIds = organizationIds);
        return this.http
            .post(this.url + "/search", body)
            .map(function (r) { return r
            .json()
            .map(function (conf) { return map_utils_1.default.deserialize(models_1.ConferenceModel, conf); }); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Назначить совещание
     * @param a
     */
    ConferenceService.prototype.makeAppointment = function (a) {
        return this.http
            .put(this.url + "/appointment", a)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    ConferenceService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], ConferenceService);
    return ConferenceService;
}(http_data_service_1.HttpDataService));
exports.ConferenceService = ConferenceService;


/***/ },

/***/ 105:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var models_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var EmployeeService = (function (_super) {
    __extends(EmployeeService, _super);
    function EmployeeService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/employees" : "api/employees";
        return _this;
    }
    EmployeeService.prototype.get = function (key) {
        return this.http
            .get(this.url + "/" + key)
            .map(function (r) { return map_utils_1.default.deserialize(models_1.EmployeeModel, r.json()); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Найти сотрудников (всех / только по конференции)
     * @param confId
     */
    EmployeeService.prototype.getAll = function (confId) {
        var params = new http_1.URLSearchParams();
        confId && params.append("confId", confId.toString());
        return this.http
            .get(this.url, { params: params })
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    EmployeeService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], EmployeeService);
    return EmployeeService;
}(http_data_service_1.HttpDataService));
exports.EmployeeService = EmployeeService;


/***/ },

/***/ 106:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var OrganizationService = (function (_super) {
    __extends(OrganizationService, _super);
    function OrganizationService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/organizations" : "api/organizations";
        return _this;
    }
    OrganizationService.prototype.add = function (organization) {
        var formData = new FormData();
        formData.append("address", organization.address);
        formData.append("code", organization.code);
        formData.append("description", organization.description);
        formData.append("name", organization.name);
        organization.logo && formData.append("logo", organization.logo, organization.logo.name);
        return this.http
            .post(this.url, formData)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет организации и сотрудников
     * @param c
     */
    OrganizationService.prototype.delete = function (c) {
        return this.http
            .post(this.url + "/delete", c)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет логотип организации
     * @param id
     */
    OrganizationService.prototype.deleteLogo = function (id) {
        return this.http
            .delete(this.url + "/" + id)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Поиск узлов дерева
     * @param emplsearch - поиск по сотрудникам
     * @param orgid      - id организации
     * @param filter     - фильтра
     */
    OrganizationService.prototype.getAll = function (emplsearch, orgid, filter) {
        var params = new http_1.URLSearchParams();
        emplsearch && params.append("emplsearch", emplsearch.toString());
        orgid && params.append("orgid", orgid.toString());
        filter && params.append("filter", filter);
        return this.http
            .get(this.url, { params: params })
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    OrganizationService.prototype.update = function (organization) {
        var formData = new FormData();
        formData.append("address", organization.address);
        formData.append("code", organization.code);
        formData.append("description", organization.description);
        formData.append("name", organization.name);
        organization.logo && formData.append("logo", organization.logo, organization.logo.name);
        return this.http
            .put(this.url + "/" + organization.id, formData)
            .catch(http_error_1.handleResponseError);
    };
    OrganizationService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], OrganizationService);
    return OrganizationService;
}(http_data_service_1.HttpDataService));
exports.OrganizationService = OrganizationService;


/***/ },

/***/ 107:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var models_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var SchemeService = (function (_super) {
    __extends(SchemeService, _super);
    function SchemeService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/schemes" : "/api/schemes";
        return _this;
    }
    /**
     * Копировать схему
     */
    SchemeService.prototype.copy = function (key) {
        return this.http
            .post(this.url + "/copy", key)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    SchemeService.prototype.getAll = function (hallId) {
        var params = new http_1.URLSearchParams();
        params.append("hallId", hallId.toString());
        return this.http
            .get(this.url, { params: params })
            .map(function (r) { return r
            .json()
            .map(function (el) { return map_utils_1.default.deserialize(models_1.SchemeModel, el); }); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет схемы
     * @param ids
     */
    SchemeService.prototype.delete = function (ids) {
        var c = { ids: ids };
        return this.http
            .post(this.url + "/delete", c)
            .catch(http_error_1.handleResponseError);
    };
    SchemeService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], SchemeService);
    return SchemeService;
}(http_data_service_1.HttpDataService));
exports.SchemeService = SchemeService;


/***/ },

/***/ 108:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var forms_1 = __webpack_require__(6);
var core_1 = __webpack_require__(1);
var primeng_1 = __webpack_require__(20);
var elements_module_1 = __webpack_require__(304);
var groups_module_1 = __webpack_require__(448);
var scheme_detail_component_1 = __webpack_require__(316);
var scheme_main_component_1 = __webpack_require__(137);
var scheme_table_component_1 = __webpack_require__(454);
var scheme_toolbox_component_1 = __webpack_require__(455);
var schemes_routing_module_1 = __webpack_require__(456);
var scheme_service_1 = __webpack_require__(107);
var shape_properties_component_1 = __webpack_require__(317);
var SchemesModule = (function () {
    function SchemesModule() {
    }
    SchemesModule = __decorate([
        core_1.NgModule({
            declarations: [scheme_detail_component_1.SchemeDetailComponent, scheme_main_component_1.SchemeMainComponent, scheme_table_component_1.SchemeTableComponent, scheme_toolbox_component_1.SchemeToolboxComponent, shape_properties_component_1.ShapePropertiesComponent],
            exports: [
                scheme_main_component_1.SchemeMainComponent,
                scheme_table_component_1.SchemeTableComponent,
                scheme_toolbox_component_1.SchemeToolboxComponent,
                shape_properties_component_1.ShapePropertiesComponent
            ],
            imports: [
                primeng_1.AccordionModule,
                primeng_1.ButtonModule,
                common_1.CommonModule,
                primeng_1.DataTableModule,
                primeng_1.DragDropModule,
                primeng_1.DropdownModule,
                elements_module_1.ElementsModule,
                forms_1.FormsModule,
                groups_module_1.GroupsModule,
                primeng_1.InputTextModule,
                primeng_1.MenuModule,
                forms_1.ReactiveFormsModule,
                schemes_routing_module_1.SchemeRoutingModule,
                primeng_1.SpinnerModule,
                primeng_1.ToggleButtonModule,
                primeng_1.ToolbarModule
            ],
            providers: [scheme_service_1.SchemeService]
        })
    ], SchemesModule);
    return SchemesModule;
}());
exports.SchemesModule = SchemesModule;


/***/ },

/***/ 13:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// KeyModel comes first!
__export(__webpack_require__(436));
__export(__webpack_require__(431));
__export(__webpack_require__(432));
__export(__webpack_require__(433));
__export(__webpack_require__(434));
__export(__webpack_require__(435));
__export(__webpack_require__(437));
__export(__webpack_require__(438));
__export(__webpack_require__(439));
__export(__webpack_require__(440));
__export(__webpack_require__(296));
__export(__webpack_require__(441));


/***/ },

/***/ 132:
/***/ function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var Subject_1 = __webpack_require__(21);
var SignalRConnectionStatus;
(function (SignalRConnectionStatus) {
    SignalRConnectionStatus[SignalRConnectionStatus["Connected"] = 1] = "Connected";
    SignalRConnectionStatus[SignalRConnectionStatus["Disconnected"] = 2] = "Disconnected";
    SignalRConnectionStatus[SignalRConnectionStatus["Error"] = 3] = "Error";
})(SignalRConnectionStatus || (SignalRConnectionStatus = {}));
/**
 * signalR служба
 */
var HubService = (function () {
    function HubService() {
        this.currentState = SignalRConnectionStatus.Disconnected;
        this.connectionStateSubject = new Subject_1.Subject();
        this.confirmMemberSubject = new Subject_1.Subject();
        this.unregisterMemberSubject = new Subject_1.Subject();
        this.sendTickersSubject = new Subject_1.Subject();
        this.connectionState = this.connectionStateSubject.asObservable();
        this.confirmMember = this.confirmMemberSubject.asObservable();
        this.unregisterMember = this.unregisterMemberSubject.asObservable();
        this.sendTickers = this.sendTickersSubject.asObservable();
    }
    HubService.prototype.setConnectionState = function (connectionState) {
        console.log("connection state changed to: " + connectionState);
        this.currentState = connectionState;
        this.connectionStateSubject.next(connectionState);
        this.connectionStateSubject.complete();
    };
    /**
     * server's confirmMember method
     * @param member
     */
    HubService.prototype.onConfirmMember = function (member) {
        this.confirmMemberSubject.next(member);
    };
    /**
     * server's unregisterMember method
     * @param id
     */
    HubService.prototype.onUnregisterMember = function (id) {
        this.unregisterMemberSubject.next(id);
    };
    /**
     * server's sendTickets method
     * @param tickers
     */
    HubService.prototype.onSendTickers = function (tickers) {
        this.sendTickersSubject.next(tickers);
    };
    HubService.prototype.start = function (key) {
        var _this = this;
        $.connection.hub.logging = core_1.isDevMode();
        $.connection.hub.qs = "id=" + key;
        // reference signalR hub named 'broadcaster'
        var proxy = $.connection.broadcaster;
        if (proxy) {
            var client = proxy.client;
            client.confirmMember = function (member) { return _this.onConfirmMember(member); };
            client.unregisterMember = function (id) { return _this.onUnregisterMember(id); };
            client.sendTickers = function (tickers) { return _this.onSendTickers(tickers); };
            // start the connection
            $.connection
                .hub
                .start()
                .done(function (_) { return _this.setConnectionState(SignalRConnectionStatus.Connected); })
                .fail(function (error) { return _this.connectionStateSubject.error(error); });
        }
        else
            console.warn("broadcaster proxy not available");
        return this.connectionState;
    };
    HubService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [])
    ], HubService);
    return HubService;
}());
exports.HubService = HubService;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(83)))

/***/ },

/***/ 133:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
/**
 * Хранилище
 */
var Storage = (function () {
    function Storage() {
    }
    Storage = __decorate([
        core_1.Injectable()
    ], Storage);
    return Storage;
}());
exports.Storage = Storage;


/***/ },

/***/ 134:
/***/ function(module, exports) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.borderClass = "box";
exports.frameClass = "frame";
exports.lineClass = "grid";
exports.markClass = "mark";
exports.shapeClass = "shape";
/**
 * Point 2D (интерфейс SVGPoint не подходит из-за наличия метода matrixTransform)
 */
var Point = (function () {
    function Point(x, y) {
        this.x = x;
        this.y = y;
    }
    return Point;
}());
exports.Point = Point;


/***/ },

/***/ 135:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var models_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var ElementService = (function (_super) {
    __extends(ElementService, _super);
    function ElementService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/elements" : "api/elements";
        return _this;
    }
    ElementService.prototype.add = function (element) {
        var formData = new FormData();
        formData.append("name", element.name);
        formData.append("data", element.image, element.image.name);
        formData.append("height", element.height);
        formData.append("width", element.width);
        return this.http
            .post(this.url, formData)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Добавить/убрать из избранного
     */
    ElementService.prototype.addToFavorites = function (c) {
        return this.http
            .post(this.url + "/favorites", c)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удалить элементы из группы
     * @param c
     */
    ElementService.prototype.delete = function (c) {
        // clone ids
        var ids = c.ids.slice(0);
        return this.http
            .post(this.url + "/delete", c)
            .map(function (_) { return ids; })
            .catch(http_error_1.handleResponseError);
    };
    ElementService.prototype.getAll = function (filter, groupid) {
        var params = new http_1.URLSearchParams();
        filter && params.append("filter", filter);
        groupid && params.append("groupid", groupid.toString());
        return this.http
            .get(this.url, { params: params })
            .map(function (r) { return r
            .json()
            .map(function (el) { return map_utils_1.default.deserialize(models_1.ElementModel, el); }); })
            .catch(http_error_1.handleResponseError);
    };
    ElementService.prototype.update = function (element) {
        var formData = new FormData();
        formData.append("name", element.name);
        formData.append("height", element.height);
        formData.append("width", element.width);
        element.image && formData.append("data", element.image, element.image.name);
        return this.http
            .put(this.url + "/" + element.id, formData)
            .catch(http_error_1.handleResponseError);
    };
    ElementService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], ElementService);
    return ElementService;
}(http_data_service_1.HttpDataService));
exports.ElementService = ElementService;


/***/ },

/***/ 136:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var logger_1 = __webpack_require__(16);
var primeng_1 = __webpack_require__(20);
var organization_service_1 = __webpack_require__(106);
var minChars = 3;
var SearchKind;
(function (SearchKind) {
    SearchKind[SearchKind["SearchOrg"] = 0] = "SearchOrg";
    SearchKind[SearchKind["SearchEmployee"] = 1] = "SearchEmployee";
})(SearchKind || (SearchKind = {}));
;
var OrganizationTreeComponent = (function () {
    function OrganizationTreeComponent(confirmationService, organizationService, logger, router) {
        this.confirmationService = confirmationService;
        this.organizationService = organizationService;
        this.logger = logger;
        this.router = router;
        /**
         * Выводить id узлов при selectionChanged ?
         */
        this.emitData = true;
        this.selectionChanged = new core_1.EventEmitter();
        this.nodes = [];
        this.selectedNodes = [];
        this.searchTitle = "По организациям";
    }
    OrganizationTreeComponent.prototype.ngOnInit = function () {
        this.loadOrganizations();
    };
    OrganizationTreeComponent.prototype.addEmployee = function (e, orgid) {
        e.stopPropagation();
        this.router.navigate(["/employees/new", orgid]);
    };
    ;
    OrganizationTreeComponent.prototype.changeEditMode = function () {
        this.editMode = !this.editMode;
        this.selectedNodes.length = 0;
    };
    OrganizationTreeComponent.prototype.changeSearchKind = function (e) {
        var _this = this;
        var expanded = this.nodes
            .filter(function (n) { return n.expanded; })
            .map(function (n) { return n.data.id; });
        // обновить дерево, учитывая открытые узлы
        this.organizationService
            .getAll(this.emplSearch, null, this.filter)
            .subscribe(function (nodes) {
            nodes.forEach(function (n) {
                if (expanded.indexOf(n.data.id) !== -1) {
                    _this.loadNode({ node: n });
                    n.expanded = true;
                }
            });
            _this.nodes = nodes;
        }, function (error) { return _this.logger.error2(error); });
        this.searchTitle = e.checked ? "По сотрудникам" : "По организациям";
    };
    OrganizationTreeComponent.prototype.filterChange = function (value) {
        this.filter = value;
        if (value.length >= minChars || !value.length)
            this.loadOrganizations();
    };
    /**
     * Handle enter key press
     */
    OrganizationTreeComponent.prototype.filterKeyPressed = function (event) {
        (event.keyCode === 13) && this.filterChange(event.target.value);
    };
    /**
     * id выбранных узлов (если выделены все дочерние узлы, то в результат попадает только корневой)
     */
    OrganizationTreeComponent.prototype.getNodeGroupCommand = function () {
        var _this = this;
        var employees = [], orgs = [];
        this.selectedNodes.forEach(function (n) {
            if (n.leaf) {
                var parent_1 = n.parent, id_1 = parent_1.data["id"];
                var ix = _this.selectedNodes.findIndex(function (n) { return !n.leaf && n.data["id"] === id_1; });
                (ix === -1) && employees.push(n.data["id"]);
            }
            else
                orgs.push(n.data["id"]);
        });
        return { organizationIds: orgs, employeeIds: employees };
    };
    /**
     * Выбранные сотрудники (employees --> узлы 2го уровня)
     */
    OrganizationTreeComponent.prototype.getEmployees = function () {
        var employees = [];
        this.selectedNodes.forEach(function (n) {
            if (n.leaf) {
                // organization == n.parent
                var parent_2 = n.parent, employee = { id: n.data["id"], name: n.data["name"], position: n.data["description"], job: parent_2.data["name"] };
                employees.push(employee);
            }
        });
        return employees;
    };
    OrganizationTreeComponent.prototype.loadNode = function (e) {
        var _this = this;
        if (e.node && !e.node.hasOwnProperty("children")) {
            var id_2 = e.node.data["id"];
            this.organizationService
                .getAll(this.emplSearch, id_2, this.filter)
                .subscribe(function (nodes) {
                e.node.children = nodes;
                // node selected ?
                var ix = _this.selectedNodes.findIndex(function (n) { return n.data["id"] === id_2; });
                if (ix !== -1) {
                    nodes.forEach(function (n) {
                        n.parent = e.node;
                        _this.selectedNodes.push(n);
                    });
                    _this.selectedNodes = _this.selectedNodes.concat(nodes);
                    // not necessary to pass nodeGroupCommand to conference-main.component
                    _this.selectionChanged.emit(undefined);
                }
            }, function (error) { return _this.logger.error2(error); });
        }
    };
    OrganizationTreeComponent.prototype.loadOrganizations = function () {
        var _this = this;
        this.loading = true;
        this.organizationService
            .getAll(this.emplSearch, null, this.filter)
            .subscribe(function (nodes) {
            // в режиме [поиск по сотрудникам] --> открывать узлы организаций
            if (_this.emplSearch && _this.filter && _this.filter.length >= minChars) {
                nodes.forEach(function (n) {
                    _this.loadNode({ node: n });
                    n.expanded = true;
                });
            }
            _this.nodes = nodes;
            _this.loading = false;
        }, function (error) {
            _this.logger.error2(error);
            _this.loading = false;
        });
    };
    OrganizationTreeComponent.prototype.removeNodes = function (id) {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u0438\u0441\u0438?",
            accept: function () {
                var c = _this.getNodeGroupCommand();
                _this.organizationService
                    .delete(c)
                    .subscribe(function (_) {
                    _this.selectedNodes.forEach(function (n) {
                        var id = n.data["id"], nodes = n.leaf ? n.parent.children : _this.nodes;
                        var ix = nodes.findIndex(function (n) { return n.data["id"] === id; });
                        (ix !== -1) && nodes.splice(ix, 1);
                    });
                    _this.selectedNodes.length = 0;
                }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    OrganizationTreeComponent.prototype.selectNode = function (e) {
        var id;
        if (this.editMode || this.readOnly) {
            if (e.node.parent) {
                var parent_3 = e.node.parent;
                id = parent_3.data["id"];
                // поиск только среди корневых
                var ix = this.selectedNodes.findIndex(function (n) { return !n.leaf && n.data["id"] === id; });
                (ix !== -1) && this.selectedNodes.splice(ix, 1);
                delete parent_3["partialSelected"];
            }
            if (this.readOnly) {
                var c = this.emitData ? this.getNodeGroupCommand() : undefined;
                this.selectionChanged.emit(c);
            }
        }
        else {
            id = e.node.data["id"];
            this.router.navigate([e.node.leaf ? "/employees/" + id : "/orgs/" + id]);
        }
    };
    OrganizationTreeComponent.prototype.unSelectNode = function () {
        if (this.readOnly) {
            var c = this.emitData ? this.getNodeGroupCommand() : undefined;
            this.selectionChanged.emit(c);
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], OrganizationTreeComponent.prototype, "readOnly", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], OrganizationTreeComponent.prototype, "emitData", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], OrganizationTreeComponent.prototype, "selectionChanged", void 0);
    OrganizationTreeComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            selector: "organization-tree",
            styles: [
                ".ui-panel-content, .ui-panel-content-wrapper { height: 100% }",
                ".ui-panel-titlebar { display: none }",
                ".ui-panel-content.ui-widget-content { padding: 0 !important}"
            ],
            template: __webpack_require__(678)
        }),
        __metadata("design:paramtypes", [primeng_1.ConfirmationService,
            organization_service_1.OrganizationService,
            logger_1.Logger,
            router_1.Router])
    ], OrganizationTreeComponent);
    return OrganizationTreeComponent;
}());
exports.OrganizationTreeComponent = OrganizationTreeComponent;


/***/ },

/***/ 137:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var logger_1 = __webpack_require__(16);
var mediator_1 = __webpack_require__(68);
var svg_utils_1 = __webpack_require__(134);
var scheme_service_1 = __webpack_require__(107);
var zoomStep = 0.1;
var SchemeMainComponent = (function () {
    function SchemeMainComponent(fb, logger, mediator, route, router, schemeService) {
        var _this = this;
        this.fb = fb;
        this.logger = logger;
        this.mediator = mediator;
        this.route = route;
        this.router = router;
        this.schemeService = schemeService;
        // ReSharper disable once InconsistentNaming
        this._svgElement = null; // selected svgElement
        this.readOnly = true;
        this.schemeLoaded = new core_1.EventEmitter();
        /**
         * Установить схему по центру
         */
        this.centerView = function () {
            _this.canvas.setAttribute("viewBox", "0 0 " + _this.initialWidth + " " + _this.initialHeight);
            _this.zoomCoef = 1;
        };
        this.intervalChange = function (_) {
            // удалить старую сетку
            var lines = _this.canvas.querySelectorAll("line." + svg_utils_1.lineClass);
            [].forEach.call(lines, function (line) { return _this.canvas.removeChild(line); });
            _this.drawGrid();
        };
        this.intervals = [
            { label: "Нет", value: 0 },
            { label: "1", value: 1 },
            { label: "0.5", value: 0.5 },
            { label: "0.25", value: 0.25 },
            { label: "0.1", value: 0.1 }
        ];
    }
    Object.defineProperty(SchemeMainComponent.prototype, "schemeId", {
        get: function () {
            return this._schemeId;
        },
        set: function (value) {
            this._schemeId = value;
            value ? this.loadScheme() : this.clearCanvas();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SchemeMainComponent.prototype, "svgElement", {
        get: function () {
            return this._svgElement;
        },
        set: function (value) {
            var _this = this;
            // снять все ранее выделенные объекты
            var frames = this.canvas.querySelectorAll("." + svg_utils_1.frameClass);
            [].forEach.call(frames, function (frame) { return frame.removeAttributeNS(null, "stroke"); });
            if (!!value) {
                this.router
                    .navigate(['shape'], { relativeTo: this.route })
                    .then(function (_) { return _this.mediator.broadcast("schemeMain_shapeSelected", value); });
                // выделить
                var frame = value.querySelector("." + svg_utils_1.frameClass);
                if (frame != null)
                    frame.setAttributeNS(null, "stroke", "blue");
            }
            else
                this.router
                    .navigate(["groups"], { relativeTo: this.route })
                    .then(function (_) { return _this.mediator.broadcast("schemeMain_shapeSelected", value); });
            this._svgElement = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SchemeMainComponent.prototype, "removeButtonDisabled", {
        get: function () {
            return (this.svgElement == null);
        },
        enumerable: true,
        configurable: true
    });
    SchemeMainComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    SchemeMainComponent.prototype.ngOnInit = function () {
        this.schemeForm = this.fb.group({
            id: [null],
            name: [null, forms_1.Validators.required]
        });
        this.canvasBox = this.canvasBoxElRef.nativeElement;
    };
    SchemeMainComponent.prototype.ngOnDestroy = function () {
        if (this.canvas) {
            this.canvas.removeEventListener("mousedown");
            this.canvas.removeEventListener("mousemove");
            this.canvas.removeEventListener("mouseup");
        }
    };
    SchemeMainComponent.prototype.onKeyDown = function (e) {
        if (e.target.nodeName.toLowerCase() === "input")
            return;
        // delete key
        e.keyCode === 46 && this.svgElement != null && this.shapeRemove();
    };
    SchemeMainComponent.prototype.onResize = function () {
        var offsetTop = this.readOnly ? 0 : this.canvasBox.offsetTop;
        this.canvasBox.style.height = this.wrapperElRef.nativeElement.offsetHeight - offsetTop + "px";
    };
    /**
     * Добавить метку
     */
    SchemeMainComponent.prototype.addMark = function () {
        var g = document.createElementNS(this.canvas.namespaceURI, "g"), r = 15;
        g.setAttribute("class", svg_utils_1.markClass);
        g.setAttributeNS(null, "transform", "translate(100, 100)");
        // размеры в см
        var circle = document.createElementNS(this.canvas.namespaceURI, "ellipse");
        circle.setAttributeNS(null, "rx", "" + r);
        circle.setAttributeNS(null, "ry", "" + r);
        g.appendChild(circle);
        var text = document.createElementNS(this.canvas.namespaceURI, "text"), code = this.canvas.querySelectorAll("g." + svg_utils_1.markClass).length + 1;
        text.textContent = code;
        // font-size = 1.2 * радиуса
        text.setAttribute("font-size", "" + r * 1.2);
        text.setAttributeNS(null, "dy", "" + r * 0.36);
        g.appendChild(text);
        g.setAttribute("data-code", code);
        this.canvas.appendChild(g);
        this.svgElement = g;
    };
    SchemeMainComponent.prototype.getMarkCodes = function () {
        var codes = [], marks = this.canvas.querySelectorAll("g." + svg_utils_1.markClass);
        if (marks) {
            [].forEach.call(marks, function (m) {
                var code = m.getAttribute("data-code"), ix = codes.indexOf(code);
                (ix === -1) && codes.push(code);
            });
        }
        return codes.sort();
    };
    SchemeMainComponent.prototype.toggleMark = function (code, force) {
        if (this.canvas != null) {
            var marks = this.canvas.querySelectorAll("g." + svg_utils_1.markClass + "[data-code=\"" + code + "\"");
            if (marks) {
                [].forEach.call(marks, function (m) { return m.classList.toggle("on", force); });
            }
        }
    };
    SchemeMainComponent.prototype.canvasMouseDown = function (e) {
        e.stopPropagation();
        if (e.buttons === 1) {
            this.clickPoint = new svg_utils_1.Point(e.clientX, e.clientY);
            // выбор shape
            if (e.target.parentNode.nodeName === "g") {
                this.svgElement = e.target.parentNode;
                // на передний план --> вставка перед метками
                var firstMark = this.canvas.querySelector("g." + svg_utils_1.markClass);
                this.canvas.insertBefore(this.svgElement, firstMark);
                var x = 0, y = 0, baseVal = this.svgElement.transform.baseVal;
                for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
                    var t = baseVal.getItem(ix);
                    if (t.type === SVGTransform.SVG_TRANSFORM_TRANSLATE) {
                        x = t.matrix.e;
                        y = t.matrix.f;
                        break;
                    }
                }
                this.svgOrigin = new svg_utils_1.Point(x, y);
            }
            else {
                this.svgElement = null;
                this.svgOrigin = new svg_utils_1.Point(this.canvas.viewBox.baseVal.x, this.canvas.viewBox.baseVal.y);
            }
        }
    };
    SchemeMainComponent.prototype.canvasMouseMove = function (e) {
        e.preventDefault();
        if (e.buttons === 1) {
            var clickPt = this.canvas.createSVGPoint(), pt = this.canvas.createSVGPoint();
            clickPt.x = this.clickPoint.x;
            clickPt.y = this.clickPoint.y;
            // трансформация здесь --> т.к. уже изменился viewbox
            clickPt = clickPt.matrixTransform(this.canvas.getScreenCTM().inverse());
            pt.x = e.clientX;
            pt.y = e.clientY;
            pt = pt.matrixTransform(this.canvas.getScreenCTM().inverse());
            // перемещение shape
            if (this.svgElement !== null) {
                var attr = [], baseVal = this.svgElement.transform.baseVal;
                for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
                    var t = baseVal.getItem(ix);
                    switch (t.type) {
                        case SVGTransform.SVG_TRANSFORM_TRANSLATE:
                            attr.push("translate(" + (this.svgOrigin.x + pt.x - clickPt.x) + " " + (this.svgOrigin.y + pt.y - clickPt.y) + ")");
                            break;
                        case SVGTransform.SVG_TRANSFORM_ROTATE:
                            var box = this.svgElement.getBBox();
                            this.svgElement.classList.contains(svg_utils_1.shapeClass)
                                ? attr.push("rotate(" + t.angle + " " + box.width / 2 + " " + box.height / 2 + ")")
                                : attr.push("rotate(" + t.angle + ")");
                            break;
                    }
                }
                this.svgElement.setAttributeNS(null, "transform", attr.join(" "));
            }
            else {
                var vbox = this.canvas.viewBox.baseVal;
                this.canvas.setAttribute("viewBox", this.svgOrigin.x - pt.x + clickPt.x + " " + (this.svgOrigin.y - pt.y + clickPt.y) + " " + vbox.width + " " + vbox.height);
            }
        }
    };
    SchemeMainComponent.prototype.canvasMouseUp = function (e) {
        e.preventDefault();
        if (e.which === 1) {
            if (this.svgElement !== null && this.svgElement.classList.contains(svg_utils_1.shapeClass)) {
                var attr = [], baseVal = this.svgElement.transform.baseVal;
                for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
                    var t = baseVal.getItem(ix), m = t.matrix;
                    switch (t.type) {
                        case SVGTransform.SVG_TRANSFORM_TRANSLATE:
                            var tx = m.e, ty = m.f;
                            // позиционирование по сетке
                            if (this.gridInterval > 0) {
                                var int = this.gridInterval * 100; // размеры в см
                                tx = Math.round(tx / int) * int;
                                ty = Math.round(ty / int) * int;
                            }
                            attr.push("translate(" + tx + " " + ty + ")");
                            break;
                        case SVGTransform.SVG_TRANSFORM_ROTATE:
                            var box = this.svgElement.getBBox();
                            this.svgElement.classList.contains(svg_utils_1.shapeClass)
                                ? attr.push("rotate(" + t.angle + " " + box.width / 2 + " " + box.height / 2 + ")")
                                : attr.push("rotate(" + t.angle + ")");
                            break;
                    }
                }
                this.svgElement.setAttributeNS(null, "transform", attr.join(" "));
            }
        }
    };
    SchemeMainComponent.prototype.clearCanvas = function () {
        if (this.canvasBox) {
            while (this.canvasBox.firstChild)
                this.canvasBox.removeChild(this.canvasBox.firstChild);
        }
    };
    SchemeMainComponent.prototype.createPattern = function (id, h, w) {
        var pattern = this.canvas.querySelector("#_" + id);
        if (pattern == null) {
            pattern = document.createElementNS(this.canvas.namespaceURI, "pattern");
            pattern.setAttribute("id", "_" + id);
            pattern.setAttributeNS(null, "height", "1");
            pattern.setAttributeNS(null, "width", "1");
            pattern.setAttributeNS(null, "viewBox", "0 0 " + w + " " + h);
            var image = document.createElementNS(this.canvas.namespaceURI, "image");
            // размеры в см
            image.setAttributeNS(null, "height", "" + h);
            image.setAttributeNS(null, "width", "" + w);
            image.setAttributeNS("http://www.w3.org/1999/xlink", "href", "/api/shape/" + id + "/false");
            pattern.appendChild(image);
            this.canvas.insertBefore(pattern, this.canvas.firstChild);
        }
    };
    /**
     * Рисовать границы viewBox'a
     */
    SchemeMainComponent.prototype.drawBorder = function () {
        var rect = document.createElementNS(this.canvas.namespaceURI, "rect");
        rect.setAttribute("class", svg_utils_1.borderClass);
        rect.setAttributeNS(null, "x", "0");
        rect.setAttributeNS(null, "y", "0");
        rect.setAttributeNS(null, "width", "" + this.initialWidth);
        rect.setAttributeNS(null, "height", "" + this.initialHeight);
        rect.setAttributeNS(null, "fill", "none");
        rect.setAttributeNS(null, "stroke", "black");
        rect.setAttributeNS(null, "stroke-width", "1");
        this.canvas.insertBefore(rect, this.canvas.firstChild);
    };
    /**
     * Рисовать сетку с шагом {interval}
     * @param interval
     */
    SchemeMainComponent.prototype.drawGrid = function () {
        if (this.gridInterval > 0) {
            var i = void 0, line = void 0, int = this.gridInterval * 100; // размеры в см
            var style = {
                "stroke": "rgb(0, 0, 0)",
                "stroke-width": "0.25"
            };
            // горизонтальные линии
            for (i = 0; i <= this.initialHeight; i += int) {
                line = document.createElementNS(this.canvas.namespaceURI, "line");
                line.setAttribute("class", svg_utils_1.lineClass);
                line.setAttributeNS(null, "x1", "0");
                line.setAttributeNS(null, "y1", i);
                line.setAttributeNS(null, "x2", "" + this.initialWidth);
                line.setAttributeNS(null, "y2", i);
                for (var key in style) {
                    if (style.hasOwnProperty(key)) {
                        line.setAttributeNS(null, key, style[key]);
                    }
                }
                this.canvas.insertBefore(line, this.canvas.firstChild);
            }
            // вертикальные линии
            for (i = 0; i <= this.initialWidth; i += int) {
                line = document.createElementNS(this.canvas.namespaceURI, "line");
                line.setAttribute("class", svg_utils_1.lineClass);
                line.setAttributeNS(null, "x1", i);
                line.setAttributeNS(null, "y1", "0");
                line.setAttributeNS(null, "x2", i);
                line.setAttributeNS(null, "y2", "" + this.initialHeight);
                for (var key in style) {
                    if (style.hasOwnProperty(key)) {
                        line.setAttributeNS(null, key, style[key]);
                    }
                }
                this.canvas.insertBefore(line, this.canvas.firstChild);
            }
        }
    };
    SchemeMainComponent.prototype.drop = function (e) {
        // ie supports only text data format
        var data = JSON.parse(e.dataTransfer.getData("text")), element = data.element, offset = data.offset, id = element.id, 
        // размеры в см
        h = element.height * 100, w = element.width * 100;
        this.createPattern(id, h, w);
        var g = document.createElementNS(this.canvas.namespaceURI, "g");
        g.setAttribute("class", svg_utils_1.shapeClass);
        g.setAttribute("data-id", "" + id); // id шаблона
        g.setAttribute("data-name", element.name);
        var pt = this.canvas.createSVGPoint();
        pt.x = e.clientX - offset.x;
        pt.y = e.clientY - offset.y;
        pt = pt.matrixTransform(this.canvas.getScreenCTM().inverse());
        if (this.gridInterval > 0) {
            var int = this.gridInterval * 100; // размеры в см
            pt.x = Math.round(pt.x / int) * int;
            pt.y = Math.round(pt.y / int) * int;
        }
        g.setAttributeNS(null, "transform", "translate(" + pt.x + ", " + pt.y + ")");
        var rect = document.createElementNS(this.canvas.namespaceURI, "rect");
        rect.setAttribute("class", svg_utils_1.frameClass);
        rect.setAttributeNS(null, "height", "" + h);
        rect.setAttributeNS(null, "width", "" + w);
        rect.setAttributeNS(null, "fill", "url(#_" + id + ")");
        g.appendChild(rect);
        // вставка перед метками
        var firstMark = this.canvas.querySelector("g." + svg_utils_1.markClass);
        this.canvas.insertBefore(g, firstMark);
    };
    SchemeMainComponent.prototype.loadScheme = function () {
        var _this = this;
        this.schemeService
            .get(this.schemeId)
            .subscribe(function (scheme) {
            _this.clearCanvas();
            _this.canvasBox.insertAdjacentHTML("beforeend", scheme.plan);
            _this.gridInterval = scheme.gridInterval || 0;
            // размеры в см
            _this.initialHeight = scheme.height * 100;
            _this.initialWidth = scheme.width * 100;
            _this.canvas = _this.canvasBox.querySelector("svg");
            if (_this.canvas != null) {
                _this.canvas.style.height = _this.canvas.style.width = "100%";
                _this.centerView();
                if (!_this.readOnly) {
                    _this.drawBorder();
                    _this.drawGrid();
                    _this.canvas
                        .addEventListener("mousedown", function (event) { return _this.canvasMouseDown(event); });
                    _this.canvas
                        .addEventListener("mousemove", function (event) { return _this.canvasMouseMove(event); });
                    _this.canvas
                        .addEventListener("mouseup", function (event) { return _this.canvasMouseUp(event); });
                }
            }
            _this.schemeForm.patchValue(scheme);
            _this.schemeLoaded.emit(_this.canvas);
        }, function (error) { return _this.logger.error2(error); });
    };
    SchemeMainComponent.prototype.save = function (scheme) {
        var _this = this;
        var svg = this.canvas.cloneNode(true);
        // сохраняется начальный план (без трансформации)
        while (svg.attributes.length > 0)
            svg.removeAttribute(svg.attributes[0].name);
        svg.setAttribute("viewbox", "0 0 " + this.initialWidth + " " + this.initialHeight);
        // сетку и границу не нужно сохранять
        var lines = svg.querySelectorAll("line." + svg_utils_1.lineClass);
        [].forEach.call(lines, function (line) { return svg.removeChild(line); });
        var box = svg.querySelector("rect." + svg_utils_1.borderClass);
        svg.removeChild(box);
        // снять все ранее выделенные объекты
        var frames = svg.querySelectorAll("." + svg_utils_1.frameClass);
        [].forEach.call(frames, function (frame) { return frame.removeAttributeNS(null, "stroke"); });
        scheme.plan = svg.outerHTML || new XMLSerializer().serializeToString(svg);
        this.schemeService
            .update(scheme)
            .subscribe(function (_) { return _this.logger.info("Ok"); }, function (error) { return _this.logger.error2(error); });
    };
    /**
     * Клонировать элемент схемы
     */
    SchemeMainComponent.prototype.shapeClone = function () {
        var clone = this.svgElement.cloneNode(true);
        var attr = [], baseVal = this.svgElement.transform.baseVal;
        for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
            var t = baseVal.getItem(ix);
            switch (t.type) {
                case SVGTransform.SVG_TRANSFORM_TRANSLATE:
                    var vbox = this.canvas.viewBox.baseVal, x = vbox.x, y = vbox.y;
                    // для меток (ellipse) центр смещается на r
                    if (this.svgElement.classList.contains(svg_utils_1.markClass)) {
                        var box_1 = this.svgElement.getBBox();
                        x += box_1.width / 2;
                        y += box_1.height / 2;
                    }
                    attr.push("translate(" + x + " " + y + ")");
                    break;
                case SVGTransform.SVG_TRANSFORM_ROTATE:
                    var box = this.svgElement.getBBox();
                    attr.push("rotate(" + t.angle + " " + box.width / 2 + " " + box.height / 2 + ")");
                    break;
            }
        }
        clone.setAttributeNS(null, "transform", attr);
        // вставка перед метками
        var firstMark = this.canvas.querySelector("g." + svg_utils_1.markClass);
        this.canvas.insertBefore(clone, firstMark);
        this.svgElement = clone;
    };
    SchemeMainComponent.prototype.shapeRemove = function () {
        var id = this.svgElement.getAttribute("data-id");
        if (id) {
            var groups = this.canvas.querySelectorAll("g[data-id=\"" + id + "\"]");
            // больше никто не использует шаблон --> можно удалить
            if (groups.length === 1) {
                var pattern = this.canvas.querySelector("pattern[id=\"_" + id + "\"]");
                this.canvas.removeChild(pattern);
            }
        }
        this.canvas.removeChild(this.svgElement);
        this.svgElement = null;
    };
    SchemeMainComponent.prototype.shapeRotate = function (angle) {
        var alpha = 0, attr = [], baseVal = this.svgElement.transform.baseVal;
        for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
            var t = baseVal.getItem(ix);
            switch (t.type) {
                case SVGTransform.SVG_TRANSFORM_TRANSLATE:
                    attr.push("translate(" + t.matrix.e + " " + t.matrix.f + ")");
                    break;
                case SVGTransform.SVG_TRANSFORM_ROTATE:
                    alpha = t.angle;
                    break;
            }
        }
        alpha += angle;
        if (alpha !== 0.0) {
            var box = this.svgElement.getBBox();
            this.svgElement.classList.contains(svg_utils_1.shapeClass)
                ? attr.push("rotate(" + alpha + " " + box.width / 2 + " " + box.height / 2 + ")")
                : attr.push("rotate(" + alpha + ")");
        }
        this.svgElement.setAttributeNS(null, "transform", attr.join(" "));
        this.mediator.broadcast("schemeMain_shapeSelected", this.svgElement);
    };
    /**
     * Масштабирование
     * @param enlarge - увеличение/уменьшение
     */
    SchemeMainComponent.prototype.zoom = function (enlarge) {
        if (enlarge === void 0) { enlarge = true; }
        var x = this.canvas.viewBox.baseVal.x, y = this.canvas.viewBox.baseVal.y;
        if (enlarge) {
            if (this.zoomCoef > 0.1) {
                x += this.initialWidth * zoomStep / 2;
                y += this.initialHeight * zoomStep / 2;
            }
            this.zoomCoef = Math.max(0.1, this.zoomCoef - zoomStep); // max увеличение в 10 раз!
        }
        else {
            if (this.zoomCoef < 1) {
                x -= this.initialWidth * zoomStep / 2;
                y -= this.initialHeight * zoomStep / 2;
            }
            this.zoomCoef = Math.min(1, this.zoomCoef + zoomStep);
        }
        this.canvas.setAttribute("viewBox", x + " " + y + " " + Math.round(this.initialWidth * this.zoomCoef) + " " + Math.round(this.initialHeight * this.zoomCoef));
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], SchemeMainComponent.prototype, "schemeId", null);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], SchemeMainComponent.prototype, "readOnly", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], SchemeMainComponent.prototype, "schemeLoaded", void 0);
    __decorate([
        core_1.ViewChild('canvasBox'),
        __metadata("design:type", core_1.ElementRef)
    ], SchemeMainComponent.prototype, "canvasBoxElRef", void 0);
    __decorate([
        core_1.ViewChild('wrapper'),
        __metadata("design:type", core_1.ElementRef)
    ], SchemeMainComponent.prototype, "wrapperElRef", void 0);
    SchemeMainComponent = __decorate([
        core_1.Component({
            host: { '(window:keydown)': "onKeyDown($event)",
                '(window:resize)': "onResize($event)" },
            selector: 'scheme-main',
            styles: [__webpack_require__(1021)],
            template: __webpack_require__(679)
        }),
        __metadata("design:paramtypes", [forms_1.FormBuilder,
            logger_1.Logger,
            mediator_1.Mediator,
            router_1.ActivatedRoute,
            router_1.Router,
            scheme_service_1.SchemeService])
    ], SchemeMainComponent);
    return SchemeMainComponent;
}());
exports.SchemeMainComponent = SchemeMainComponent;


/***/ },

/***/ 138:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var models_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var ScreenService = (function (_super) {
    __extends(ScreenService, _super);
    function ScreenService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/screens" : "/api/screens";
        return _this;
    }
    ScreenService.prototype.get = function (key) {
        return this.http
            .get(this.url + "/" + key)
            .map(function (r) { return map_utils_1.default.deserialize(models_1.ScreenModel, r.json()); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Поиск презентаций
     * @param startDate
     */
    ScreenService.prototype.getAll = function (startDate) {
        var d = startDate.getDate(), m = startDate.getMonth() + 1, // month starts with 0
        y = startDate.getFullYear();
        var params = new http_1.URLSearchParams();
        params.append("startDate", y + "-" + m + "-" + d);
        return this.http
            .get(this.url, { params: params })
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    ScreenService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], ScreenService);
    return ScreenService;
}(http_data_service_1.HttpDataService));
exports.ScreenService = ScreenService;


/***/ },

/***/ 139:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var TickerService = (function (_super) {
    __extends(TickerService, _super);
    function TickerService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/tickers" : "api/tickers";
        return _this;
    }
    /**
     * Изменить соcтояние сообщения
     * @param messageId
     * @param active
     */
    TickerService.prototype.changeActive = function (messageId, active) {
        var body = [{ op: 'replace', path: '/active', value: active }];
        return this.http
            .patch(this.url + "/" + messageId, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Изменить содержимое сообщения
     * @param messageId
     * @param content
     */
    TickerService.prototype.changeContent = function (messageId, content) {
        var body = [{ op: 'replace', path: '/content', value: content }];
        return this.http
            .patch(this.url + "/" + messageId, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет сообщения
     * @param ids
     */
    TickerService.prototype.delete = function (ids) {
        var c = { ids: ids };
        return this.http
            .post(this.url + "/delete", c)
            .catch(http_error_1.handleResponseError);
    };
    TickerService.prototype.getAll = function (confid) {
        return this.http
            .get(this.url + "/" + confid)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Отправить уведомления
     * @param text
     * @param ids - id сотрудников
     */
    TickerService.prototype.notify = function (text, ids) {
        var body = { ids: ids, body: text };
        return this.http
            .post(this.url + "/send", body)
            .catch(http_error_1.handleResponseError);
    };
    TickerService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], TickerService);
    return TickerService;
}(http_data_service_1.HttpDataService));
exports.TickerService = TickerService;


/***/ },

/***/ 16:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
/**
 * Служба логирования
 */
var Logger = (function () {
    function Logger() {
        var _this = this;
        this.messages = [];
        /**
         * Размер стека сообщений
         */
        this.stackSize = 1;
        // event Handlers
        this.msgReсeived = new core_1.EventEmitter();
        this.error = function (summary, detail) { };
        this.error2 = function (message) { };
        this.info = function (summary, detail) { };
        this.success = function (summary, detail) { };
        this.warn = function (summary, detail) { };
        /**
         * Логгирование
         * @param level - уровень ['error', 'info', 'success', 'warn']
         * @param summary - заголовок
         * @param detail - текст
         */
        this.log = function (level, summary, detail) { return _this.log2(level, { summary: summary, detail: detail || "" }); };
        ["error", "info", "success", "warn"]
            .forEach(function (l) {
            _this[l] = function (s, d) { return _this.log(l, s, d); };
            _this[l + "2"] = function (m) { return _this.log2(l, m); };
        });
    }
    /**
     * Логгирование
     * @param level - уровень ['error', 'info', 'success', 'warn']
     * @param message - сообщение
     */
    Logger.prototype.log2 = function (level, message) {
        message.severity = message.severity || level || "info";
        this.messages.push(message);
        // стек наполнен --> событие
        (this.messages.length >= this.stackSize) && this.msgReсeived.emit(this.messages.splice(0, this.stackSize));
    };
    Logger.prototype.clear = function () {
        this.messages = [];
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], Logger.prototype, "msgRe\u0441eived", void 0);
    Logger = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [])
    ], Logger);
    return Logger;
}());
exports.Logger = Logger;


/***/ },

/***/ 292:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var auth_service_1 = __webpack_require__(102);
var AuthGuard = (function () {
    function AuthGuard(authService, router) {
        this.authService = authService;
        this.router = router;
        this.publicUrls = ["/login"];
    }
    AuthGuard.prototype.canActivate = function (route, state) {
        if (this.authService.isAuthenticated) {
            // logged in so return true
            return true;
        }
        // todo custom access
        for (var ix = 0; ix < this.publicUrls.length; ix++) {
            if (state.url.indexOf(this.publicUrls[ix]) !== -1)
                return true;
        }
        // not logged in so redirect to login page with the return url
        this.router.navigate(['/login'], { queryParams: { returnUrl: state.url } });
        return false;
    };
    AuthGuard = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [auth_service_1.AuthService,
            router_1.Router])
    ], AuthGuard);
    return AuthGuard;
}());
exports.AuthGuard = AuthGuard;


/***/ },

/***/ 293:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var auth_service_1 = __webpack_require__(102);
var logger_1 = __webpack_require__(16);
var LoginComponent = (function () {
    function LoginComponent(authService, fb, logger, route, router) {
        this.authService = authService;
        this.fb = fb;
        this.logger = logger;
        this.route = route;
        this.router = router;
    }
    LoginComponent.prototype.ngOnInit = function () {
        this.loginForm = this.fb.group({
            login: [null, forms_1.Validators.required],
            password: [null, forms_1.Validators.required]
        });
        this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';
    };
    LoginComponent.prototype.authenticate = function (e, user) {
        var _this = this;
        e.preventDefault();
        this.loading = true;
        this.authService
            .login(user.login, user.password)
            .subscribe(function (_) {
            _this.router.navigateByUrl(_this.returnUrl);
            _this.loading = false;
        }, function (error) {
            _this.logger.error2(error);
            _this.loading = false;
        });
    };
    LoginComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            selector: "app-login",
            styles: [".login-panel { margin-top: 5em }",
                ".ui-panel-content, .ui-panel-content-wrapper { height: 100% }",
                ".ui-panel-titlebar { display: none }",
                ".ui-panel-content.ui-widget-content { padding: 0 !important}"],
            template: __webpack_require__(663)
        }),
        __metadata("design:paramtypes", [auth_service_1.AuthService,
            forms_1.FormBuilder,
            logger_1.Logger,
            router_1.ActivatedRoute,
            router_1.Router])
    ], LoginComponent);
    return LoginComponent;
}());
exports.LoginComponent = LoginComponent;


/***/ },

/***/ 294:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var pipes_1 = __webpack_require__(86);
var GlobalsModule = (function () {
    function GlobalsModule() {
    }
    GlobalsModule = __decorate([
        core_1.NgModule({
            declarations: [pipes_1.UniqueSuffixPipe],
            exports: [pipes_1.UniqueSuffixPipe]
        })
    ], GlobalsModule);
    return GlobalsModule;
}());
exports.GlobalsModule = GlobalsModule;


/***/ },

/***/ 295:
/***/ function(module, exports) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Локаль (ru)
 */
exports.locale = {
    firstDayOfWeek: 1,
    dayNames: ["Понедельник"],
    dayNamesShort: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
    dayNamesMin: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
    monthNames: ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"],
    monthNamesShort: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек"]
};


/***/ },

/***/ 296:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
* Действия. (Привязать, отвязать) пользователя к сотруднику
*/
var UserOperation;
(function (UserOperation) {
    UserOperation[UserOperation["None"] = 0] = "None";
    UserOperation[UserOperation["Bind"] = 1] = "Bind";
    UserOperation[UserOperation["Unbind"] = 2] = "Unbind";
})(UserOperation = exports.UserOperation || (exports.UserOperation = {}));
;
/**
 * Роль пользователя
 */
var UserRole;
(function (UserRole) {
    UserRole[UserRole["User"] = 0] = "User";
    UserRole[UserRole["PowerUser"] = 1] = "PowerUser";
    UserRole[UserRole["Admin"] = 2] = "Admin";
    UserRole[UserRole["System"] = 3] = "System";
})(UserRole = exports.UserRole || (exports.UserRole = {}));
(function (UserRole) {
    function toName(role) {
        var name = "";
        switch (role) {
            case UserRole.User:
                name = "Пользователь";
                break;
            case UserRole.PowerUser:
                name = "Опытный пользователь";
                break;
            case UserRole.Admin:
                name = "Администратор";
                break;
            case UserRole.System:
                name = "Система";
                break;
        }
        return name;
    }
    UserRole.toName = toName;
})(UserRole = exports.UserRole || (exports.UserRole = {}));
/**
 * Модель. Системный пользователь
 */
var SysUserModel = (function (_super) {
    __extends(SysUserModel, _super);
    function SysUserModel() {
        var _this = _super.call(this) || this;
        _this.locked = false;
        _this.login = undefined;
        _this.role = undefined;
        return _this;
    }
    return SysUserModel;
}(index_1.KeyModel));
exports.SysUserModel = SysUserModel;


/***/ },

/***/ 297:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var locale_1 = __webpack_require__(295);
var logger_1 = __webpack_require__(16);
var pipes_1 = __webpack_require__(86);
var hall_service_1 = __webpack_require__(87);
var AppointmentDialogComponent = (function () {
    function AppointmentDialogComponent(dateToUtcPipe, fb, hallService, logger) {
        this.dateToUtcPipe = dateToUtcPipe;
        this.fb = fb;
        this.hallService = hallService;
        this.logger = logger;
        this.header = "Назначить";
        // event Handlers
        this.closed = new core_1.EventEmitter();
        this.calendarVisible = true;
        this.locale = locale_1.locale;
    }
    AppointmentDialogComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.appointmentForm = this.fb.group({
            hallId: [null, forms_1.Validators.required],
            duration: [new Date(0, 0, 0, 1)],
            start: [null]
        });
        this.hallService
            .getAll()
            .subscribe(function (halls) { return _this.halls = halls.map(function (h) { return ({ label: h.name, value: h.id }); }); }, function (error) { return _this.logger.error2(error); });
    };
    AppointmentDialogComponent.prototype.onHide = function () {
        //this.closed.emit();
    };
    AppointmentDialogComponent.prototype.save = function (event, appointment) {
        var duration = appointment.duration;
        appointment.duration = duration.getHours() + ":" + duration.getMinutes();
        appointment.start = this.dateToUtcPipe.transform(appointment.start);
        this.closed.emit(appointment);
        this.visible = false;
    };
    AppointmentDialogComponent.prototype.show = function (a, calendarVisible) {
        if (calendarVisible === void 0) { calendarVisible = true; }
        this.calendarVisible = calendarVisible;
        this.appointmentForm.patchValue({ hallId: a.hallId, start: a.start });
        this.visible = true;
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AppointmentDialogComponent.prototype, "header", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], AppointmentDialogComponent.prototype, "visible", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], AppointmentDialogComponent.prototype, "closed", void 0);
    AppointmentDialogComponent = __decorate([
        core_1.Component({
            selector: "appointment-dialog",
            encapsulation: core_1.ViewEncapsulation.None,
            styles: [".ui-datepicker.ui-datepicker-inline { width: 100% }",
                ".ui-datepicker.ui-datepicker-timeonly { width: 120px }",
                ".ui-dialog .ui-dialog-content { overflow: inherit }"],
            template: __webpack_require__(664)
        }),
        __metadata("design:paramtypes", [pipes_1.DateToUtcPipe,
            forms_1.FormBuilder,
            hall_service_1.HallService,
            logger_1.Logger])
    ], AppointmentDialogComponent);
    return AppointmentDialogComponent;
}());
exports.AppointmentDialogComponent = AppointmentDialogComponent;


/***/ },

/***/ 298:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var accordion_1 = __webpack_require__(356);
var locale_1 = __webpack_require__(295);
var logger_1 = __webpack_require__(16);
var models_1 = __webpack_require__(13);
var conference_service_1 = __webpack_require__(104);
var employee_service_1 = __webpack_require__(105);
var hall_service_1 = __webpack_require__(87);
var member_service_1 = __webpack_require__(88);
var scheme_service_1 = __webpack_require__(107);
var pipes_1 = __webpack_require__(86);
var ticker_table_component_1 = __webpack_require__(322);
var organization_tree_component_1 = __webpack_require__(136);
var scheme_main_component_1 = __webpack_require__(137);
var ConferenceMainComponent = (function () {
    function ConferenceMainComponent(dateToUtcPipe, fb, conferenceService, employeeService, hallService, memberService, schemeService, location, logger, route) {
        this.dateToUtcPipe = dateToUtcPipe;
        this.fb = fb;
        this.conferenceService = conferenceService;
        this.employeeService = employeeService;
        this.hallService = hallService;
        this.memberService = memberService;
        this.schemeService = schemeService;
        this.location = location;
        this.logger = logger;
        this.route = route;
        this.members = [];
        this.selectedEmployees = [];
        this.selectedMembers = [];
        this.locale = locale_1.locale;
        var stateKeys = Object
            .keys(models_1.ConfState)
            .filter(function (k) { return typeof models_1.ConfState[k] !== "function"; });
        this.states = stateKeys
            .slice(stateKeys.length / 2)
            .map(function (k) {
            var state = models_1.ConfState[k];
            return {
                label: models_1.ConfState.toName(state),
                value: state
            };
        });
    }
    ConferenceMainComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    ConferenceMainComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.conferenceForm = this.fb.group({
            id: [null],
            state: [null],
            subject: [null, forms_1.Validators.required],
            description: [null],
            hallId: [null],
            schemeId: [null],
            startDate: [null],
            endDate: [null],
            // Показывать схему/список
            showScheme: [false]
        });
        this.hallService
            .getAll()
            .subscribe(function (halls) { return _this.halls = halls.map(function (h) { return ({ label: h.name, value: h.id }); }); }, function (error) { return _this.logger.error2(error); });
        this.route.params
            .switchMap(function (params) {
            // (+) converts string 'id' to a number
            _this.id = params.hasOwnProperty("id") ? +params["id"] : undefined;
            if (_this.id) {
                _this.loadMembers(_this.id);
                setTimeout(function () { return _this.tickerTable.conferenceId = _this.id; }, 0);
                return _this.conferenceService.get(_this.id);
            }
            return rxjs_1.Observable.empty();
        })
            .subscribe(function (conference) {
            // startDate/endDate in string --> create date objects
            conference.startDate && (conference.startDate = new Date(conference.startDate));
            conference.endDate && (conference.endDate = new Date(conference.endDate));
            _this.conferenceForm.patchValue(conference);
        }, function (error) { return _this.logger.error2(error); });
        // validation check
        this.conferenceForm.get("state")
            .valueChanges
            .subscribe(function (value) {
            _this.requireValidation = (value !== models_1.ConfState.Planned);
            ["hallId", "schemeId", "startDate", "endDate"].forEach(function (c) {
                var control = _this.conferenceForm.get(c);
                if (control) {
                    control.setValidators(_this.requireValidation ? [forms_1.Validators.required] : null);
                    control.updateValueAndValidity();
                }
            });
        });
    };
    ConferenceMainComponent.prototype.employeeTreeChanged = function () {
        this.selectedEmployees = this.organizationTree.getEmployees();
    };
    ConferenceMainComponent.prototype.hallChange = function (value) {
        var _this = this;
        if (value) {
            this.schemeService
                .getAll(value)
                .subscribe(function (schemes) { return _this.schemes = schemes.map(function (h) { return ({ label: h.name, value: h.id }); }); }, function (error) { return _this.logger.error2(error); });
        }
        this.schemeId = null;
    };
    ConferenceMainComponent.prototype.loadMembers = function (confid) {
        var _this = this;
        this.memberService
            .getAll(confid)
            .subscribe(function (members) {
            members.forEach(function (m) { return m.oldSeat = m.seat; });
            _this.members = members;
        }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.memberSeatChanged = function (member) {
        var _this = this;
        // необходимо сохранить (в member-table.component меняется значение oldSeat)
        var oldSeat = member.oldSeat;
        this.memberService
            .changeSeat(member.id, member.seat)
            .subscribe(function (_) {
            if (member.state === models_1.MemberState.Confirmed) {
                (member.seat !== oldSeat) && _this.schemeMain.toggleMark(oldSeat, false);
                _this.schemeMain.toggleMark(member.seat, true);
            }
        }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.memberStateChanged = function (member) {
        var _this = this;
        this.memberService
            .changeState(member.id, member.state)
            .subscribe(function (_) { return _this.schemeMain.toggleMark(member.seat, member.state === models_1.MemberState.Confirmed); }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.memberTableChahged = function (members) {
        this.selectedMembers = members;
    };
    ConferenceMainComponent.prototype.moveAllToSource = function () {
        var _this = this;
        this.memberService
            .delete(this.members.map(function (s) { return s.id; }))
            .subscribe(function (_) {
            _this.members.length = 0;
            _this.selectedMembers.length = 0;
        }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.moveToSource = function () {
        var _this = this;
        this.memberService
            .delete(this.selectedMembers.map(function (s) { return s.id; }))
            .subscribe(function (_) {
            _this.selectedMembers.forEach(function (member) {
                var ix = _this.members.findIndex(function (m) { return m.id === member.id; });
                (ix !== -1) && _this.members.splice(ix, 1);
            });
            _this.selectedMembers.length = 0;
        }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.moveToTarget = function () {
        var _this = this;
        // employee --> member
        var members = this.selectedEmployees.map(function (e) { return ({ employeeId: e.id, name: e.name, job: e.job, position: e.position }); });
        this.memberService
            .addMembers(this.id, members)
            .subscribe(
        // only new members {id, employeeId}
        function (nmembers) {
            nmembers.forEach(function (nm) {
                var member = members.find(function (m) { return m.employeeId === nm.employeeId; });
                if (member) {
                    member.id = nm.id;
                    _this.members.push(member);
                }
            });
            _this.selectedMembers.length = 0;
        }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.onResize = function () {
        var tab, tabs = this.accordion.el.nativeElement.querySelectorAll("div.ui-accordion-content");
        for (var ix = 0; ix < tabs.length; ix++) {
            switch (ix) {
                // Вкладка [Участники]
                case 2:
                    tab = tabs[ix];
                    tab.style.height = document.documentElement.clientHeight * 0.75 + "px";
                    break;
                // Вкладка [Схема]
                case 3:
                    tab = tabs[ix];
                    var h = document.documentElement.clientHeight * 0.75;
                    tab.style.height = h + "px";
                    var cs = getComputedStyle(tab);
                    this.content.nativeElement.style.height = h - parseFloat(cs.paddingTop) - parseFloat(cs.paddingBottom) - this.switch.nativeElement.offsetHeight + "px";
                    break;
            }
        }
    };
    ConferenceMainComponent.prototype.save = function (event, conference) {
        var _this = this;
        var conf = Object.assign({}, conference);
        conference.startDate && (conf.startDate = this.dateToUtcPipe.transform(conference.startDate));
        conference.endDate && (conf.endDate = this.dateToUtcPipe.transform(conference.endDate));
        delete conf["showScheme"];
        var method = this.id ? "update" : "add";
        this.conferenceService[method](conf)
            .subscribe(function (id) {
            if (method === "add") {
                _this.id = id;
                _this.conferenceForm.patchValue({ id: _this.id });
                setTimeout(function () { return _this.onResize(); }, 0);
            }
            _this.logger.info("Ok");
        }, function (error) { return _this.logger.error2(error); });
    };
    ConferenceMainComponent.prototype.schemeIdChange = function (value) {
        this.schemeId = value;
    };
    ConferenceMainComponent.prototype.schemeLoaded = function () {
        var _this = this;
        [].forEach.call(this.members, function (m) { return (m.state === models_1.MemberState.Confirmed) && _this.schemeMain.toggleMark(m.seat, true); });
        this.seats = [{ label: 'Нет', value: null }]
            .concat(this.schemeMain
            .getMarkCodes()
            .map(function (c) { return ({ label: c, value: c }); }));
    };
    ConferenceMainComponent.prototype.showSchemeChange = function (value) {
        var _this = this;
        value && setTimeout(function () { return _this.schemeMain.onResize(); }, 0);
    };
    __decorate([
        core_1.ViewChild(accordion_1.Accordion),
        __metadata("design:type", accordion_1.Accordion)
    ], ConferenceMainComponent.prototype, "accordion", void 0);
    __decorate([
        core_1.ViewChild(organization_tree_component_1.OrganizationTreeComponent),
        __metadata("design:type", organization_tree_component_1.OrganizationTreeComponent)
    ], ConferenceMainComponent.prototype, "organizationTree", void 0);
    __decorate([
        core_1.ViewChild(scheme_main_component_1.SchemeMainComponent),
        __metadata("design:type", scheme_main_component_1.SchemeMainComponent)
    ], ConferenceMainComponent.prototype, "schemeMain", void 0);
    __decorate([
        core_1.ViewChild(ticker_table_component_1.TickerTableComponent),
        __metadata("design:type", ticker_table_component_1.TickerTableComponent)
    ], ConferenceMainComponent.prototype, "tickerTable", void 0);
    __decorate([
        core_1.ViewChild("content"),
        __metadata("design:type", core_1.ElementRef)
    ], ConferenceMainComponent.prototype, "content", void 0);
    __decorate([
        core_1.ViewChild("switch"),
        __metadata("design:type", core_1.ElementRef)
    ], ConferenceMainComponent.prototype, "switch", void 0);
    ConferenceMainComponent = __decorate([
        core_1.Component({
            host: { '(window:resize)': "onResize($event)" },
            styles: [".ui-picklist-buttons { display: table-cell; vertical-align: middle }",
                ".ui-picklist-buttons button { margin-bottom: 0.25em }"],
            template: __webpack_require__(665)
        }),
        __metadata("design:paramtypes", [pipes_1.DateToUtcPipe,
            forms_1.FormBuilder,
            conference_service_1.ConferenceService,
            employee_service_1.EmployeeService,
            hall_service_1.HallService,
            member_service_1.MemberService,
            scheme_service_1.SchemeService,
            common_1.Location,
            logger_1.Logger,
            router_1.ActivatedRoute])
    ], ConferenceMainComponent);
    return ConferenceMainComponent;
}());
exports.ConferenceMainComponent = ConferenceMainComponent;


/***/ },

/***/ 299:
/***/ function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var logger_1 = __webpack_require__(16);
var tabview_1 = __webpack_require__(359);
var appointment_dialog_component_1 = __webpack_require__(297);
var models_1 = __webpack_require__(13);
var primeng_1 = __webpack_require__(20);
var conference_service_1 = __webpack_require__(104);
var conference_table_component_1 = __webpack_require__(300);
var ConferenceScheduleComponent = (function () {
    function ConferenceScheduleComponent(conferrenceService, confirmationService, datePipe, logger, router) {
        var _this = this;
        this.conferrenceService = conferrenceService;
        this.confirmationService = confirmationService;
        this.datePipe = datePipe;
        this.logger = logger;
        this.router = router;
        this.eventRender = function (event, element) { return element.attr("title", event.description || event.title); };
        this.headerConfig = {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay,listWeek'
        };
        this.menuItems = [
            {
                label: "Изменить",
                icon: "fa-pencil",
                command: function () { return _this.router.navigate(["/conferences", _this.selectedEvent.id]); }
            },
            {
                label: "Удалить",
                icon: "fa-trash",
                command: function () { return _this.removeEventFromSchedule(_this.selectedEvent); }
            }
        ];
    }
    ConferenceScheduleComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    ConferenceScheduleComponent.prototype.appointmentDialogClosed = function (appointment) {
        var _this = this;
        if (appointment != null) {
            appointment.conferenceId = this.selectedConference.id;
            this.conferrenceService
                .makeAppointment(appointment)
                .subscribe(function (period) {
                _this.events.push({
                    id: _this.selectedConference.id,
                    hallId: _this.selectedConference.hallId,
                    title: _this.selectedConference.subject,
                    description: _this.selectedConference.description,
                    start: period.lowerBound,
                    end: period.upperBound
                });
                _this.conferenceTable.removeConferenceFromList(_this.selectedConference.id, false);
                _this.selectedConference = null;
            }, function (error) {
                _this.selectedConference = null;
                _this.logger.error2(error);
            });
        }
    };
    ConferenceScheduleComponent.prototype.drop = function (e, element) {
        var mouseX = e.pageX, mouseY = e.pageY;
        var day;
        var days = $("#calendar .fc-day");
        for (var i = 0; i < days.length; i++) {
            var $day = $(days[i]);
            var offset = $day.offset(), width = $day.width(), height = $day.height();
            if (mouseX >= offset.left && mouseX <= offset.left + width && mouseY >= offset.top && mouseY <= offset.top + height) {
                day = $day;
                break;
            }
        }
        // drop именно внутри календаря
        if (day) {
            var data = day.data("date");
            if (data) {
                // ie supports only text data format
                var dragData = e.dataTransfer.getData("text"), conference = JSON.parse(dragData);
                this.makeAppointment(conference, new Date(data));
            }
        }
    };
    ConferenceScheduleComponent.prototype.eventDragStop = function (e) {
        var mouseX = e.jsEvent.pageX, mouseY = e.jsEvent.pageY;
        var $schedule = $("#calendar"), offset = $schedule.offset(), width = $schedule.width(), height = $schedule.height();
        if (mouseX < offset.left || mouseX > offset.left + width || mouseY < offset.top || mouseY > offset.top + height) {
            this.removeEventFromSchedule(e.event);
        }
    };
    ConferenceScheduleComponent.prototype.eventDrop = function (e) {
        var _this = this;
        this.conferrenceService
            .changePeriod(e.event.id, e.event.start.toDate(), e.event.end.toDate())
            .subscribe(function (_) { }, function (error) {
            e.revertFunc.call();
            _this.logger.error2(error);
        });
    };
    ConferenceScheduleComponent.prototype.eventResize = function (e) {
        var _this = this;
        this.conferrenceService
            .changePeriod(e.event.id, e.event.start.toDate(), e.event.end.toDate())
            .subscribe(function (_) { }, function (error) {
            e.revertFunc.call();
            _this.logger.error2(error);
        });
    };
    ConferenceScheduleComponent.prototype.employeeTreeChanged = function (c) {
        this.selectedEmployeeIds = c.employeeIds;
        this.selectedOrganizationIds = c.organizationIds;
        this.loadEvents();
    };
    ConferenceScheduleComponent.prototype.hallTableChanged = function (c) {
        this.selectedHallIds = c.ids;
        this.loadEvents();
    };
    ConferenceScheduleComponent.prototype.loadEvents = function () {
        var _this = this;
        this.conferrenceService
            .getAll(this.startDate, this.endDate, null, this.selectedHallIds, this.selectedEmployeeIds, this.selectedOrganizationIds)
            .subscribe(function (conferences) { return _this.events = conferences.map(function (c) { return ({ id: c.id, hallId: c.hallId, start: c.startDate, end: c.endDate, title: c.subject, description: c.description }); }); }, function (error) { return _this.logger.error2(error); });
    };
    /**
     * Из conference-list'a передается целиком объект [conference] для вставки subject/description в event schedule
     * @param conference
     * @param defaultDate
     */
    ConferenceScheduleComponent.prototype.makeAppointment = function (conference, defaultDate) {
        if (defaultDate === void 0) { defaultDate = null; }
        // time period like schedule's view period
        var startDate = defaultDate || this.startDate, endDate = defaultDate || this.endDate, renderedDays = (endDate - startDate) / 864e5, calendarVisible = (renderedDays > 1), date = startDate.getDate(), month = startDate.getMonth();
        if (renderedDays >= 28 && this.startDate.getDate() > 20) {
            // show next month
            date = 1;
            month++;
        }
        this.selectedConference = conference;
        if (defaultDate != null)
            this.appointmentDialog.header = "\u041D\u0430\u0437\u043D\u0430\u0447\u0438\u0442\u044C \u043D\u0430 " + this.datePipe.transform(defaultDate, "dd.MM.yyyy");
        this.appointmentDialog.show({ hallId: this.selectedConference.hallId, start: new Date(this.startDate.getFullYear(), month, date) }, calendarVisible);
    };
    ConferenceScheduleComponent.prototype.onResize = function () {
        var tabview = this.tabView.el.nativeElement.querySelector("div.ui-tabview"), nav = tabview.querySelector("ul.ui-tabview-nav"), panels = tabview.querySelectorAll("div.ui-tabview-panel");
        for (var ix = 0; ix < panels.length; ix++) {
            var panel = panels[ix], cs = getComputedStyle(panel);
            panel.style.height = tabview.offsetHeight - nav.offsetHeight - parseFloat(cs.paddingBottom) + "px";
        }
    };
    ConferenceScheduleComponent.prototype.removeEventFromSchedule = function (event) {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C [" + event.title + "]?",
            accept: function (_) {
                return _this.conferrenceService
                    .changeState(event.id, models_1.ConfState.Planned)
                    .subscribe(function (_) {
                    if (_this.conferenceTable.selectedState === models_1.ConfState.Planned) {
                        var conference = {
                            id: event.id,
                            hallId: event.hallId,
                            subject: event.title,
                            description: event.description,
                            state: models_1.ConfState.Planned
                        };
                        _this.conferenceTable.addConferenceToList(conference);
                    }
                    _this.removeEventFromList(event.id);
                }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    /**
     * Удалить событие
     * @param id
     */
    ConferenceScheduleComponent.prototype.removeEventFromList = function (id) {
        var ix = this.events.findIndex(function (c) { return c.id === id; });
        (ix !== -1) && this.events.splice(ix, 1);
        this.selectedEvent = null;
    };
    ConferenceScheduleComponent.prototype.viewRender = function (event) {
        this.startDate = event.view.start.toDate();
        this.endDate = event.view.end.toDate();
        this.loadEvents();
    };
    __decorate([
        core_1.ViewChild(appointment_dialog_component_1.AppointmentDialogComponent),
        __metadata("design:type", appointment_dialog_component_1.AppointmentDialogComponent)
    ], ConferenceScheduleComponent.prototype, "appointmentDialog", void 0);
    __decorate([
        core_1.ViewChild(conference_table_component_1.ConferenceTableComponent),
        __metadata("design:type", conference_table_component_1.ConferenceTableComponent)
    ], ConferenceScheduleComponent.prototype, "conferenceTable", void 0);
    __decorate([
        core_1.ViewChild(tabview_1.TabView),
        __metadata("design:type", tabview_1.TabView)
    ], ConferenceScheduleComponent.prototype, "tabView", void 0);
    ConferenceScheduleComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            host: { '(window:resize)': "onResize($event)" },
            styles: [".fc-list-item-marker { width: 38px }", ".p0501 .ui-tabview-panel { box-sizing: content-box; padding: 0.5em 0.1em !important; }"],
            template: __webpack_require__(666)
        }),
        __metadata("design:paramtypes", [conference_service_1.ConferenceService,
            primeng_1.ConfirmationService,
            common_1.DatePipe,
            logger_1.Logger,
            router_1.Router])
    ], ConferenceScheduleComponent);
    return ConferenceScheduleComponent;
}());
exports.ConferenceScheduleComponent = ConferenceScheduleComponent;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(83)))

/***/ },

/***/ 300:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var primeng_1 = __webpack_require__(20);
var logger_1 = __webpack_require__(16);
var models_1 = __webpack_require__(13);
var conference_service_1 = __webpack_require__(104);
var ConferenceTableComponent = (function () {
    function ConferenceTableComponent(conferrenceService, confirmationService, logger, router) {
        var _this = this;
        this.conferrenceService = conferrenceService;
        this.confirmationService = confirmationService;
        this.logger = logger;
        this.router = router;
        this.selectedState = models_1.ConfState.Planned;
        this.appointmentButtonClick = new core_1.EventEmitter();
        this.conferenceRemoveClick = new core_1.EventEmitter();
        // ReSharper disable once InconsistentNaming
        this.ConfState = models_1.ConfState;
        this.actionClick = function () { return _this.actionCommand(); };
        this.addConferenceToList = function (conference) { return _this.conferences.push(conference); };
        this.makeAppointment = function () { return _this.appointmentButtonClick.emit(_this.selectedConference); };
        var stateKeys = Object
            .keys(models_1.ConfState)
            .filter(function (k) { return typeof models_1.ConfState[k] !== "function"; });
        this.states = stateKeys
            .slice(stateKeys.length / 2)
            .map(function (k) {
            var state = models_1.ConfState[k];
            return {
                label: models_1.ConfState.toName(state),
                value: state
            };
        });
    }
    ConferenceTableComponent.prototype.ngOnChanges = function (changes) {
        var startDateChange = changes["startDate"], endDateChange = changes["endDate"];
        if (startDateChange.currentValue !== startDateChange.previousValue &&
            endDateChange.currentValue !== endDateChange.previousValue) {
            if (this.selectedState !== models_1.ConfState.Planned) {
                this.loadConferences();
            }
        }
    };
    ConferenceTableComponent.prototype.ngOnInit = function () {
        this.changeState(this.selectedState);
    };
    ConferenceTableComponent.prototype.changeEditMode = function () {
        this.editMode = !this.editMode;
    };
    ConferenceTableComponent.prototype.changeState = function (state) {
        this.selectedState = state;
        this.loadConferences();
        this.selectedConference = null;
    };
    ConferenceTableComponent.prototype.dragStart = function (e, conference) {
        e.currentTarget.click();
        // ie supports only text data format
        e.dataTransfer.setData("text", JSON.stringify(conference));
    };
    ConferenceTableComponent.prototype.editConference = function (e, id) {
        e.stopPropagation();
        this.router.navigate(["/conferences", id]);
    };
    ConferenceTableComponent.prototype.loadConferences = function (e) {
        var _this = this;
        this.loading = true;
        this.conferrenceService
            .getAll(this.startDate, this.endDate, this.selectedState)
            .subscribe(function (conferences) {
            _this.conferences = conferences;
            _this.loading = false;
        }, function (error) {
            _this.logger.error2(error);
            _this.loading = false;
        });
    };
    ConferenceTableComponent.prototype.removeConference = function () {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C [" + this.selectedConference.subject + "]?",
            accept: function (_) {
                return _this.conferrenceService
                    .delete(_this.selectedConference.id)
                    .subscribe(function (_) { return _this.removeConferenceFromList(_this.selectedConference.id); }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    /**
     * Удаляет конференцию из списка
     * @param id
     * @param emit
     */
    ConferenceTableComponent.prototype.removeConferenceFromList = function (id, emit) {
        if (emit === void 0) { emit = true; }
        this.selectedConference = null;
        var ix = this.conferences.findIndex(function (c) { return c.id === id; });
        (ix !== -1) && this.conferences.splice(ix, 1);
        // В расписании нет [Планируемых] конференций
        if (this.selectedState !== models_1.ConfState.Planned) {
            emit && this.conferenceRemoveClick.emit(id);
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Date)
    ], ConferenceTableComponent.prototype, "endDate", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Date)
    ], ConferenceTableComponent.prototype, "startDate", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ConferenceTableComponent.prototype, "appointmentButtonClick", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ConferenceTableComponent.prototype, "conferenceRemoveClick", void 0);
    ConferenceTableComponent = __decorate([
        core_1.Component({
            selector: "conference-table",
            template: __webpack_require__(667)
        }),
        __metadata("design:paramtypes", [conference_service_1.ConferenceService,
            primeng_1.ConfirmationService,
            logger_1.Logger,
            router_1.Router])
    ], ConferenceTableComponent);
    return ConferenceTableComponent;
}());
exports.ConferenceTableComponent = ConferenceTableComponent;


/***/ },

/***/ 301:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var ContactService = (function (_super) {
    __extends(ContactService, _super);
    function ContactService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/contacts" : "api/contacts";
        return _this;
    }
    /**
    * Изменить соcтояние контакта
    * @param id
    * @param active
    */
    ContactService.prototype.changeActive = function (id, active) {
        var body = [{ op: 'replace', path: '/active', value: active }];
        return this.http
            .patch(this.url + "/" + id, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
    * Изменить адрес контакта
    * @param id
    * @param active
    */
    ContactService.prototype.changeAddress = function (id, address) {
        var body = [{ op: 'replace', path: '/address', value: address }];
        return this.http
            .patch(this.url + "/" + id, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Изменить вид контакта
     * @param id
     * @param kind
     */
    ContactService.prototype.changeKind = function (id, kind) {
        var body = [{ op: 'replace', path: '/kind', value: kind }];
        return this.http
            .patch(this.url + "/" + id, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет контакты
     * @param c
     */
    ContactService.prototype.delete = function (ids) {
        var c = { ids: ids };
        return this.http
            .post(this.url + "/delete", c)
            .catch(http_error_1.handleResponseError);
    };
    ContactService.prototype.getSenders = function () {
        return this.http
            .get(this.url + "/senders")
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    ContactService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], ContactService);
    return ContactService;
}(http_data_service_1.HttpDataService));
exports.ContactService = ContactService;


/***/ },

/***/ 302:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var fileupload_1 = __webpack_require__(279);
var logger_1 = __webpack_require__(16);
var mediator_1 = __webpack_require__(68);
var element_service_1 = __webpack_require__(135);
var ElementDetailComponent = (function () {
    function ElementDetailComponent(elementService, fb, logger, mediator, route) {
        var _this = this;
        this.elementService = elementService;
        this.fb = fb;
        this.logger = logger;
        this.mediator = mediator;
        this.route = route;
        this.onSelect = function () { return _this.fileUpload.styleClass = ""; };
    }
    Object.defineProperty(ElementDetailComponent.prototype, "submitDisabled", {
        get: function () {
            var enabled = this.elementForm.valid;
            if (this.id === void 0) {
                enabled = enabled && (this.fileUpload.files.length > 0);
            }
            return !enabled;
        },
        enumerable: true,
        configurable: true
    });
    ElementDetailComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.elementForm = this.fb.group({
            id: [null],
            name: [null, forms_1.Validators.required],
            height: [0.1, forms_1.Validators.required],
            width: [0.1, forms_1.Validators.required]
        });
        this.route.params
            .switchMap(function (params) {
            // (+) converts string 'id' to a number
            params.hasOwnProperty("id") && (_this.id = +params["id"]);
            return _this.id ? _this.elementService.get(_this.id) : rxjs_1.Observable.empty();
        })
            .subscribe(function (element) { return _this.elementForm.patchValue(element); });
    };
    ElementDetailComponent.prototype.save = function (e, element) {
        var _this = this;
        e.preventDefault();
        (this.fileUpload.files.length > 0) && (element.image = this.fileUpload.files[0]);
        this.elementService[element.id ? "update" : "add"](element)
            .subscribe(function (_) { return _this.mediator.broadcast("elementDetail_itemSaved"); }, function (error) { return _this.logger.error2(error); });
    };
    __decorate([
        core_1.ViewChild('fileUpload'),
        __metadata("design:type", fileupload_1.FileUpload)
    ], ElementDetailComponent.prototype, "fileUpload", void 0);
    ElementDetailComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            selector: 'element-detail',
            styles: [".ui-fileupload-row div:not(:first-child) { display: none; }",
                ".ui-spinner .ui-inputtext { width: 100%; }"],
            template: __webpack_require__(669)
        }),
        __metadata("design:paramtypes", [element_service_1.ElementService,
            forms_1.FormBuilder,
            logger_1.Logger,
            mediator_1.Mediator,
            router_1.ActivatedRoute])
    ], ElementDetailComponent);
    return ElementDetailComponent;
}());
exports.ElementDetailComponent = ElementDetailComponent;


/***/ },

/***/ 303:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var logger_1 = __webpack_require__(16);
var mediator_1 = __webpack_require__(68);
var svg_utils_1 = __webpack_require__(134);
var element_service_1 = __webpack_require__(135);
var ElementListComponent = (function () {
    function ElementListComponent(elementService, logger, mediator, route) {
        var _this = this;
        this.elementService = elementService;
        this.logger = logger;
        this.mediator = mediator;
        this.route = route;
        this.elements = [];
        this.selectedElementIds = [];
        this.subscription = new rxjs_1.Subscription();
        this.subscription.add(mediator
            .on("elementList_addToFavorites")
            .flatMap(function (c) { return _this.elementService.addToFavorites(c); })
            .subscribe(function (_) { }, function (error) { return _this.logger.error2(error); }));
        this.subscription.add(mediator
            .on("elementList_deleteElements")
            .flatMap(function (c) { return _this.elementService.delete(c); })
            .subscribe(function (ids) {
            var _loop_1 = function (id) {
                var ix = _this.elements.findIndex(function (e) { return e.id === id; });
                (ix !== -1) && _this.elements.splice(ix, 1);
            };
            for (var _i = 0, ids_1 = ids; _i < ids_1.length; _i++) {
                var id = ids_1[_i];
                _loop_1(id);
            }
        }, function (error) { return _this.logger.error2(error); }));
        this.subscription.add(mediator
            .on("elementList_viewChanged")
            .subscribe(function (sm) { return _this.smallGrid = sm; }, function (error) { return _this.logger.error2(error); }));
    }
    ElementListComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.queryParams
            .switchMap(function (params) {
            var filter = params["f"], groupid = +params["gid"]; // (+) converts string 'gid' to a number
            return _this.elementService.getAll(filter, groupid);
        })
            .subscribe(function (elements) { return _this.elements = elements; }, function (error) { return _this.logger.error2(error); });
    };
    ElementListComponent.prototype.ngOnDestroy = function () {
        this.subscription.unsubscribe();
    };
    ElementListComponent.prototype.dragStart = function (e, element) {
        var cr = e.currentTarget.getBoundingClientRect(), offset = new svg_utils_1.Point(e.clientX - cr.left, e.clientY - cr.top);
        e.dataTransfer.setData("text", JSON.stringify({ element: element, offset: offset }));
    };
    ElementListComponent.prototype.selectElement = function (element) {
        element.selected = !element.selected;
        if (element.selected)
            this.selectedElementIds.push(element.id);
        else {
            var ix = this.selectedElementIds.indexOf(element.id);
            (ix !== -1) && this.selectedElementIds.splice(ix, 1);
        }
        this.mediator.broadcast("elementList_selectionChanged", this.selectedElementIds);
    };
    ElementListComponent = __decorate([
        core_1.Component({
            selector: 'element-list',
            styles: [__webpack_require__(1019)],
            template: __webpack_require__(670)
        }),
        __metadata("design:paramtypes", [element_service_1.ElementService,
            logger_1.Logger,
            mediator_1.Mediator,
            router_1.ActivatedRoute])
    ], ElementListComponent);
    return ElementListComponent;
}());
exports.ElementListComponent = ElementListComponent;


/***/ },

/***/ 304:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var globals_module_1 = __webpack_require__(294);
var ui_module_1 = __webpack_require__(49);
var primeng_1 = __webpack_require__(20);
var element_detail_component_1 = __webpack_require__(302);
var element_list_component_1 = __webpack_require__(303);
var element_service_1 = __webpack_require__(135);
var ElementsModule = (function () {
    function ElementsModule() {
    }
    ElementsModule = __decorate([
        core_1.NgModule({
            declarations: [element_detail_component_1.ElementDetailComponent, element_list_component_1.ElementListComponent],
            exports: [element_detail_component_1.ElementDetailComponent, element_list_component_1.ElementListComponent],
            imports: [
                primeng_1.ButtonModule,
                common_1.CommonModule,
                globals_module_1.GlobalsModule,
                primeng_1.DataGridModule,
                primeng_1.DataListModule,
                primeng_1.DragDropModule,
                primeng_1.FileUploadModule,
                forms_1.FormsModule,
                primeng_1.InputTextModule,
                forms_1.ReactiveFormsModule,
                primeng_1.SpinnerModule,
                ui_module_1.UiModule
            ],
            providers: [element_service_1.ElementService]
        })
    ], ElementsModule);
    return ElementsModule;
}());
exports.ElementsModule = ElementsModule;


/***/ },

/***/ 305:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var logger_1 = __webpack_require__(16);
var models_1 = __webpack_require__(13);
var employee_service_1 = __webpack_require__(105);
var organization_service_1 = __webpack_require__(106);
var EmployeeDetailComponent = (function () {
    function EmployeeDetailComponent(employeeService, organizationService, fb, location, logger, route) {
        this.employeeService = employeeService;
        this.organizationService = organizationService;
        this.fb = fb;
        this.location = location;
        this.logger = logger;
        this.route = route;
        this.contacts = [];
    }
    EmployeeDetailComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.employeeForm = this.fb.group({
            id: [null],
            name: [null, forms_1.Validators.required],
            orgId: [null, forms_1.Validators.required],
            position: [null],
            user: this.fb.group({
                id: [null],
                bind: [false],
                login: [null],
                locked: [false],
                role: [models_1.UserRole.User],
                password: [null]
            })
        });
        this.organizationService
            .getAll(false)
            .subscribe(function (nodes) { return _this.orgs = nodes.map(function (n) { return ({ label: n.data["name"], value: n.data["id"] }); }); }, function (error) { return _this.logger.error2(error); });
        this.route.params
            .switchMap(function (params) {
            var orgid = params.hasOwnProperty("orgid") ? +params["orgid"] : undefined;
            orgid && _this.employeeForm.patchValue({ orgId: orgid });
            // (+) converts string 'id' to a number
            var key = params.hasOwnProperty("id") ? +params["id"] : undefined;
            return key ? _this.employeeService.get(key) : rxjs_1.Observable.empty();
        })
            .subscribe(function (employee) {
            _this.contacts = employee.contacts;
            employee.user = employee.user || {};
            _this.employeeForm.patchValue(employee);
        }, function (error) { return _this.logger.error2(error); });
    };
    EmployeeDetailComponent.prototype.save = function (event, employee) {
        var _this = this;
        event.preventDefault();
        // существующего пользователя можно только отвязать, а нового привязать !
        var user = employee.user;
        if (user.id)
            user.operation = user.bind ? models_1.UserOperation.Unbind : models_1.UserOperation.Bind;
        else
            user.operation = user.bind ? models_1.UserOperation.Bind : models_1.UserOperation.None;
        delete user["bind"];
        var method = employee.id ? "update" : "add";
        this.employeeService[employee.id ? 'update' : 'add'](employee)
            .subscribe(function (id) {
            if (method === "add")
                _this.employeeForm.patchValue({ id: id });
            _this.logger.info("Ok");
        }, function (error) { return _this.logger.error2(error); });
    };
    EmployeeDetailComponent = __decorate([
        core_1.Component({
            selector: "employee-detail",
            template: __webpack_require__(671)
        }),
        __metadata("design:paramtypes", [employee_service_1.EmployeeService,
            organization_service_1.OrganizationService,
            forms_1.FormBuilder,
            common_1.Location,
            logger_1.Logger,
            router_1.ActivatedRoute])
    ], EmployeeDetailComponent);
    return EmployeeDetailComponent;
}());
exports.EmployeeDetailComponent = EmployeeDetailComponent;


/***/ },

/***/ 306:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var forms_1 = __webpack_require__(6);
var core_1 = __webpack_require__(1);
var primeng_1 = __webpack_require__(20);
var ui_module_1 = __webpack_require__(49);
var contacts_module_1 = __webpack_require__(445);
var employee_detail_component_1 = __webpack_require__(305);
var sysuser_detail_component_1 = __webpack_require__(447);
var employee_routing_module_1 = __webpack_require__(446);
var employee_service_1 = __webpack_require__(105);
var EmployeesModule = (function () {
    function EmployeesModule() {
    }
    EmployeesModule = __decorate([
        core_1.NgModule({
            declarations: [employee_detail_component_1.EmployeeDetailComponent, sysuser_detail_component_1.SysUserDetailComponent],
            imports: [
                primeng_1.AccordionModule,
                primeng_1.ButtonModule,
                primeng_1.CheckboxModule,
                common_1.CommonModule,
                contacts_module_1.ContactsModule,
                primeng_1.DataTableModule,
                primeng_1.DropdownModule,
                forms_1.FormsModule,
                primeng_1.InputSwitchModule,
                primeng_1.InputTextModule,
                employee_routing_module_1.EmployeeRoutingModule,
                primeng_1.PasswordModule,
                forms_1.ReactiveFormsModule,
                primeng_1.ToggleButtonModule,
                ui_module_1.UiModule
            ],
            providers: [employee_service_1.EmployeeService]
        })
    ], EmployeesModule);
    return EmployeesModule;
}());
exports.EmployeesModule = EmployeesModule;


/***/ },

/***/ 307:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var logger_1 = __webpack_require__(16);
var mediator_1 = __webpack_require__(68);
var group_service_1 = __webpack_require__(308);
var GroupTableComponent = (function () {
    function GroupTableComponent(groupService, logger, mediator) {
        var _this = this;
        this.groupService = groupService;
        this.logger = logger;
        this.mediator = mediator;
        this.selectRow = function (e) { return _this.mediator.broadcast("groupList_itemClicked", e.data); };
    }
    GroupTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.groupService
            .getAll()
            .subscribe(function (groups) { return _this.groups = groups; }, function (error) { return _this.logger.error2(error); });
    };
    GroupTableComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            selector: 'group-table',
            styles: [".screen .ui-datatable-data > tr > td { border- width: 0 !important; }"],
            template: __webpack_require__(673)
        }),
        __metadata("design:paramtypes", [group_service_1.GroupService,
            logger_1.Logger,
            mediator_1.Mediator])
    ], GroupTableComponent);
    return GroupTableComponent;
}());
exports.GroupTableComponent = GroupTableComponent;


/***/ },

/***/ 308:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var index_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var GroupService = (function (_super) {
    __extends(GroupService, _super);
    function GroupService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/groups" : "/api/groups";
        return _this;
    }
    GroupService.prototype.getAll = function () {
        return this.http
            .get(this.url)
            .map(function (r) { return r
            .json()
            .map(function (g) { return map_utils_1.default.deserialize(index_1.GroupModel, g); }); })
            .catch(http_error_1.handleResponseError);
    };
    GroupService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], GroupService);
    return GroupService;
}(http_data_service_1.HttpDataService));
exports.GroupService = GroupService;


/***/ },

/***/ 309:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var logger_1 = __webpack_require__(16);
var hall_service_1 = __webpack_require__(87);
var HallDetailComponent = (function () {
    function HallDetailComponent(fb, hallService, location, logger, route, router) {
        this.fb = fb;
        this.hallService = hallService;
        this.location = location;
        this.logger = logger;
        this.route = route;
        this.router = router;
    }
    HallDetailComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.hallForm = this.fb.group({
            id: [null],
            name: [null, forms_1.Validators.required],
            description: [null],
            height: [2, forms_1.Validators.required],
            width: [2, forms_1.Validators.required]
        });
        this.route.params
            .switchMap(function (params) {
            // (+) converts string 'id' to a number
            var key = params.hasOwnProperty("id") ? +params["id"] : undefined;
            return key ? _this.hallService.get(key) : rxjs_1.Observable.empty();
        })
            .subscribe(function (hall) {
            _this.schemes = hall.schemes;
            _this.hallForm.patchValue(hall);
        });
    };
    HallDetailComponent.prototype.editScheme = function (id) {
        this.router.navigate(['schemes', id]);
    };
    HallDetailComponent.prototype.save = function (event, hall) {
        var _this = this;
        event.preventDefault();
        this.hallService[hall.id ? 'update' : 'add'](hall)
            .subscribe(function (_) { return _this.logger.info("Ok"); }, function (error) { return _this.logger.error2(error); });
    };
    HallDetailComponent = __decorate([
        core_1.Component({
            template: __webpack_require__(674)
        }),
        __metadata("design:paramtypes", [forms_1.FormBuilder,
            hall_service_1.HallService,
            common_1.Location,
            logger_1.Logger,
            router_1.ActivatedRoute,
            router_1.Router])
    ], HallDetailComponent);
    return HallDetailComponent;
}());
exports.HallDetailComponent = HallDetailComponent;


/***/ },

/***/ 310:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var primeng_1 = __webpack_require__(20);
var logger_1 = __webpack_require__(16);
var hall_service_1 = __webpack_require__(87);
var HallTableComponent = (function () {
    function HallTableComponent(confirmationService, hallService, logger, router) {
        this.confirmationService = confirmationService;
        this.hallService = hallService;
        this.logger = logger;
        this.router = router;
        this.selectedHalls = [];
        this.selectionChanged = new core_1.EventEmitter();
    }
    HallTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.loading = true;
        this.hallService
            .getAll()
            .subscribe(function (halls) {
            _this.halls = halls;
            _this.loading = false;
        }, function (error) {
            _this.logger.error2(error);
            _this.loading = false;
        });
    };
    HallTableComponent.prototype.changeEditMode = function () {
        this.editMode = !this.editMode;
        this.selectedHalls.length = 0;
    };
    HallTableComponent.prototype.removeRows = function () {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u0438\u0441\u0438?",
            accept: function (_) {
                _this.hallService
                    .delete(_this.selectedHalls.map(function (h) { return h.id; }))
                    .subscribe(function (_) {
                    _this.selectedHalls.forEach(function (h) {
                        var ix = _this.halls.findIndex(function (n) { return n.id === h.id; });
                        (ix !== -1) && _this.halls.splice(ix, 1);
                    });
                    _this.selectedHalls.length = 0;
                }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    HallTableComponent.prototype.selectRow = function (e) {
        if (!this.editMode) {
            var id = e.data["id"];
            if (this.readOnly) {
                var ids = this.selectedHalls.map(function (h) { return h.id; });
                (ids.indexOf(id) === -1) && ids.push(id);
                var c = { ids: ids };
                this.selectionChanged.emit(c);
            }
            else
                this.router.navigate(["/halls", id]);
        }
    };
    HallTableComponent.prototype.unSelectRow = function (e) {
        if (this.readOnly) {
            var id = e.data["id"], ids = this.selectedHalls.map(function (h) { return h.id; }), ix = ids.indexOf(id);
            (ix !== -1) && ids.splice(ix, 1);
            var c = { ids: ids };
            this.selectionChanged.emit(c);
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], HallTableComponent.prototype, "readOnly", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], HallTableComponent.prototype, "selectionChanged", void 0);
    HallTableComponent = __decorate([
        core_1.Component({
            selector: 'hall-table',
            template: __webpack_require__(675)
        }),
        __metadata("design:paramtypes", [primeng_1.ConfirmationService,
            hall_service_1.HallService,
            logger_1.Logger,
            router_1.Router])
    ], HallTableComponent);
    return HallTableComponent;
}());
exports.HallTableComponent = HallTableComponent;


/***/ },

/***/ 311:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var forms_1 = __webpack_require__(6);
var core_1 = __webpack_require__(1);
var primeng_1 = __webpack_require__(20);
var ui_module_1 = __webpack_require__(49);
var hall_detail_component_1 = __webpack_require__(309);
var hall_table_component_1 = __webpack_require__(310);
var halls_routing_module_1 = __webpack_require__(449);
var hall_service_1 = __webpack_require__(87);
var schemes_module_1 = __webpack_require__(108);
var HallsModule = (function () {
    function HallsModule() {
    }
    HallsModule = __decorate([
        core_1.NgModule({
            declarations: [hall_detail_component_1.HallDetailComponent, hall_table_component_1.HallTableComponent],
            exports: [primeng_1.ButtonModule, primeng_1.DataGridModule, primeng_1.FieldsetModule, primeng_1.InputTextModule, primeng_1.InputTextareaModule, primeng_1.SpinnerModule, hall_table_component_1.HallTableComponent],
            imports: [
                primeng_1.AccordionModule,
                primeng_1.ButtonModule,
                common_1.CommonModule,
                primeng_1.DataGridModule,
                primeng_1.DataListModule,
                primeng_1.DataTableModule,
                primeng_1.FieldsetModule,
                forms_1.FormsModule,
                halls_routing_module_1.HallRoutingModule,
                primeng_1.InputTextModule,
                primeng_1.InputTextareaModule,
                primeng_1.PanelModule,
                forms_1.ReactiveFormsModule,
                schemes_module_1.SchemesModule,
                primeng_1.SpinnerModule,
                primeng_1.ToggleButtonModule,
                primeng_1.ToolbarModule,
                ui_module_1.UiModule
            ],
            providers: [hall_service_1.HallService]
        })
    ], HallsModule);
    return HallsModule;
}());
exports.HallsModule = HallsModule;


/***/ },

/***/ 312:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var primeng_1 = __webpack_require__(20);
var member_table_component_1 = __webpack_require__(450);
var member_service_1 = __webpack_require__(88);
var ui_module_1 = __webpack_require__(49);
var MembersModule = (function () {
    function MembersModule() {
    }
    MembersModule = __decorate([
        core_1.NgModule({
            declarations: [member_table_component_1.MemberTableComponent],
            exports: [member_table_component_1.MemberTableComponent],
            imports: [common_1.CommonModule, primeng_1.DataTableModule, primeng_1.DropdownModule, forms_1.FormsModule, primeng_1.InputSwitchModule, ui_module_1.UiModule],
            providers: [member_service_1.MemberService]
        })
    ], MembersModule);
    return MembersModule;
}());
exports.MembersModule = MembersModule;


/***/ },

/***/ 313:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var OfficeComponent = (function () {
    function OfficeComponent() {
    }
    OfficeComponent = __decorate([
        core_1.Component({
            template: 'private office'
        })
    ], OfficeComponent);
    return OfficeComponent;
}());
exports.OfficeComponent = OfficeComponent;


/***/ },

/***/ 314:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var forms_1 = __webpack_require__(6);
var rxjs_1 = __webpack_require__(33);
var fileupload_1 = __webpack_require__(279);
var logger_1 = __webpack_require__(16);
var organization_service_1 = __webpack_require__(106);
var OrganizationDetailComponent = (function () {
    function OrganizationDetailComponent(fb, organizationService, location, logger, route, router) {
        var _this = this;
        this.fb = fb;
        this.organizationService = organizationService;
        this.location = location;
        this.logger = logger;
        this.route = route;
        this.router = router;
        this.onSelect = function () { return _this.fileUpload.styleClass = ""; };
    }
    OrganizationDetailComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.orgForm = this.fb.group({
            id: [null],
            address: [null],
            code: [null, forms_1.Validators.required],
            description: [null],
            name: [null, forms_1.Validators.required]
        });
        this.route.params
            .switchMap(function (params) {
            // (+) converts string 'id' to a number
            _this.id = params.hasOwnProperty("id") ? +params["id"] : undefined;
            return _this.id ? _this.organizationService.get(_this.id) : rxjs_1.Observable.empty();
        })
            .subscribe(function (org) { return _this.orgForm.patchValue(org); });
    };
    OrganizationDetailComponent.prototype.deleteLogo = function () {
        var _this = this;
        this.organizationService
            .deleteLogo(this.id)
            .subscribe(function (_) { return _this.noLogo = true; }, function (error) { return _this.logger.error2(error); });
    };
    OrganizationDetailComponent.prototype.save = function (e, org) {
        var _this = this;
        e.preventDefault();
        (this.fileUpload.files.length > 0) && (org.logo = this.fileUpload.files[0]);
        this.organizationService[org.id ? "update" : "add"](org)
            .subscribe(function (_) { return _this.logger.info("Ok"); }, function (error) { return _this.logger.error2(error); });
    };
    __decorate([
        core_1.ViewChild('fileUpload'),
        __metadata("design:type", fileupload_1.FileUpload)
    ], OrganizationDetailComponent.prototype, "fileUpload", void 0);
    OrganizationDetailComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            styles: [".ui-fileupload-row div:not(:first-child):not(:last-child) { display: none; }"],
            template: __webpack_require__(677)
        }),
        __metadata("design:paramtypes", [forms_1.FormBuilder,
            organization_service_1.OrganizationService,
            common_1.Location,
            logger_1.Logger,
            router_1.ActivatedRoute,
            router_1.Router])
    ], OrganizationDetailComponent);
    return OrganizationDetailComponent;
}());
exports.OrganizationDetailComponent = OrganizationDetailComponent;


/***/ },

/***/ 315:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var globals_module_1 = __webpack_require__(294);
var ui_module_1 = __webpack_require__(49);
var employees_module_1 = __webpack_require__(306);
var organizations_routing_module_1 = __webpack_require__(453);
var primeng_1 = __webpack_require__(20);
var organization_detail_component_1 = __webpack_require__(314);
var organization_tree_component_1 = __webpack_require__(136);
var organization_service_1 = __webpack_require__(106);
var OrganizationsModule = (function () {
    function OrganizationsModule() {
    }
    OrganizationsModule = __decorate([
        core_1.NgModule({
            declarations: [organization_detail_component_1.OrganizationDetailComponent, organization_tree_component_1.OrganizationTreeComponent],
            exports: [organization_tree_component_1.OrganizationTreeComponent],
            imports: [
                primeng_1.AccordionModule,
                primeng_1.BlockUIModule,
                primeng_1.ButtonModule,
                common_1.CommonModule,
                globals_module_1.GlobalsModule,
                employees_module_1.EmployeesModule,
                primeng_1.FileUploadModule,
                forms_1.FormsModule,
                primeng_1.InputTextModule,
                primeng_1.InputTextareaModule,
                organizations_routing_module_1.OrganizationRoutingModule,
                primeng_1.PanelModule,
                forms_1.ReactiveFormsModule,
                primeng_1.SelectButtonModule,
                primeng_1.SplitButtonModule,
                primeng_1.ToggleButtonModule,
                primeng_1.ToolbarModule,
                primeng_1.TreeTableModule,
                ui_module_1.UiModule
            ],
            providers: [organization_service_1.OrganizationService]
        })
    ], OrganizationsModule);
    return OrganizationsModule;
}());
exports.OrganizationsModule = OrganizationsModule;


/***/ },

/***/ 316:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var storage_1 = __webpack_require__(133);
var SchemeDetailComponent = (function () {
    function SchemeDetailComponent(route, router, storage) {
        this.route = route;
        this.router = router;
        this.storage = storage;
        this.referrer = storage.previousRoute || document.referrer;
    }
    SchemeDetailComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.params
            .subscribe(function (params) {
            // (+) converts string 'id' to a number
            _this.id = params.hasOwnProperty("id") ? +params["id"] : undefined;
        });
    };
    SchemeDetailComponent.prototype.onPopState = function (e) {
        var _this = this;
        setTimeout(function () { return _this.router.navigateByUrl(_this.referrer); }, 0);
    };
    SchemeDetailComponent = __decorate([
        core_1.Component({
            host: { '(window:popstate)': "onPopState($event)" },
            template: "\n        <div class=\"ui-g h100p\">\n            <div class=\"ui-g-2 ui-md-2 ui-widget-content ui-g-nopad h100p\">\n                <scheme-toolbox></scheme-toolbox>\n            </div>\n            <div class=\"ui-g-10 ui-md-10 ui-widget-content ui-g-nopad h100p\">\n                <scheme-main [schemeId]=\"id\" [readOnly]=\"false\"></scheme-main>\n            </div>\n        </div>"
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute,
            router_1.Router,
            storage_1.Storage])
    ], SchemeDetailComponent);
    return SchemeDetailComponent;
}());
exports.SchemeDetailComponent = SchemeDetailComponent;


/***/ },

/***/ 317:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var rxjs_1 = __webpack_require__(33);
var mediator_1 = __webpack_require__(68);
var SVG = __webpack_require__(134);
var ShapePropertiesComponent = (function () {
    function ShapePropertiesComponent(fb, mediator) {
        var _this = this;
        this.fb = fb;
        this.mediator = mediator;
        this.subscription = new rxjs_1.Subscription();
        this.subscription.add(mediator
            .on("schemeMain_shapeSelected")
            .subscribe(function (s) {
            _this.svgElement = s;
            var box = _this.svgElement.getBBox();
            // для меток (ellipse)
            if (_this.svgElement.classList.contains(SVG.markClass)) {
                var ellipse = _this.svgElement.querySelector("ellipse");
                ellipse && (box = ellipse.getBBox());
            }
            var shape = {
                angle: 0,
                code: s.getAttribute("data-code"),
                length: box.height,
                width: box.width
            };
            var baseVal = _this.svgElement.transform.baseVal;
            for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
                var t = baseVal.getItem(ix);
                switch (t.type) {
                    case SVGTransform.SVG_TRANSFORM_ROTATE:
                        shape.angle = t.angle;
                        break;
                }
            }
            _this.shapeForm.patchValue(shape, { emitEvent: false });
        }));
    }
    ShapePropertiesComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.shapeForm = this.fb.group({
            angle: [0],
            code: [null],
            length: [0],
            width: [0]
        });
        this.shapeForm
            .valueChanges
            .subscribe(function (model) {
            model.angle = model.angle || 0;
            var attr = [], baseVal = _this.svgElement.transform.baseVal;
            for (var ix = 0; ix < baseVal.numberOfItems; ix++) {
                var t = baseVal.getItem(ix);
                if (t.type === SVGTransform.SVG_TRANSFORM_TRANSLATE) {
                    var box = _this.svgElement.getBBox();
                    if (_this.svgElement.classList.contains(SVG.markClass)) {
                        var ellipse = _this.svgElement.querySelector("ellipse");
                        ellipse && (box = ellipse.getBBox());
                    }
                    attr.push("translate(" + (t.matrix.e - (model.width - box.width) / 2) + " " + (t.matrix.f - (model.length - box.height) / 2) + ")");
                    break;
                }
            }
            // rotate around svgElement center
            if (model.angle !== 0.0) {
                _this.svgElement.classList.contains(SVG.shapeClass)
                    ? attr.push("rotate(" + model.angle + " " + model.width / 2 + " " + model.length / 2 + ")")
                    : attr.push("rotate(" + model.angle + ")");
            }
            _this.svgElement.setAttributeNS(null, "transform", attr.join(" "));
            // метка
            if (model.code != null) {
                _this.svgElement.setAttribute("data-code", model.code);
                var text = _this.svgElement.querySelector("text");
                text.textContent = model.code;
            }
            // children's size
            Array.from(_this.svgElement.childNodes).forEach(function (x) {
                switch (x.nodeName) {
                    case "ellipse":
                        x.setAttributeNS(null, "rx", "" + model.width / 2);
                        x.setAttributeNS(null, "ry", "" + model.length / 2);
                        break;
                    case "rect":
                        x.setAttributeNS(null, "height", "" + model.length);
                        x.setAttributeNS(null, "width", "" + model.width);
                    case "text":
                        var d = Math.min(model.length, model.width);
                        // font-size = 0.6 от диаметра (1.2 от радиуса)
                        x.setAttribute("font-size", "" + d * 0.6);
                        x.setAttributeNS(null, "dy", "" + d * 0.18);
                        break;
                }
            });
        });
    };
    ShapePropertiesComponent.prototype.ngOnDestroy = function () {
        this.subscription.unsubscribe();
    };
    ShapePropertiesComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            selector: 'shape-properties',
            styles: [".ui-spinner .ui-inputtext { width: 100%; }"],
            template: __webpack_require__(682)
        }),
        __metadata("design:paramtypes", [forms_1.FormBuilder,
            mediator_1.Mediator])
    ], ShapePropertiesComponent);
    return ShapePropertiesComponent;
}());
exports.ShapePropertiesComponent = ShapePropertiesComponent;


/***/ },

/***/ 318:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var models_1 = __webpack_require__(13);
var member_service_1 = __webpack_require__(88);
var logger_1 = __webpack_require__(16);
var duration = 1000;
var scrollStep = 0.2;
var MemberScreenComponent = (function () {
    function MemberScreenComponent(el, memberService, logger) {
        var _this = this;
        this.el = el;
        this.memberService = memberService;
        this.logger = logger;
        // ReSharper disable once InconsistentNaming
        this.MemberState = models_1.MemberState;
        this.membersLoaded = new core_1.EventEmitter();
        /**
         * Easing function: easeInOutCubic
         * From: https://gist.github.com/gre/1650294
         */
        this.easing = function (t) { return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; };
        this.getMember = function (id) { return _this.members.find(function (m) { return m.id === id; }); };
    }
    Object.defineProperty(MemberScreenComponent.prototype, "conferenceId", {
        get: function () {
            return this._conferenceId;
        },
        set: function (value) {
            this._conferenceId = value;
            value && this.loadMembers();
        },
        enumerable: true,
        configurable: true
    });
    MemberScreenComponent.prototype.ngAfterViewInit = function () {
        this.wrapper = this.el.nativeElement.querySelector(".ui-datatable-tablewrapper");
    };
    MemberScreenComponent.prototype.confirmMember = function (member) {
        var found = false;
        for (var i = 0; i < this.members.length; i++) {
            var m = this.members[i];
            if (m.id === member.id) {
                m.state = member.state;
                m.seat = member.seat;
                found = true;
            }
        }
        !found && this.members.push(member);
    };
    MemberScreenComponent.prototype.loadMembers = function () {
        var _this = this;
        this.loading = true;
        this.memberService
            .getAll(this.conferenceId)
            .subscribe(function (members) {
            _this.members = members;
            _this.membersLoaded.emit(members);
            _this.loading = false;
        }, function (error) {
            _this.logger.error2(error);
            _this.loading = false;
        });
    };
    MemberScreenComponent.prototype.removeMember = function (id) {
        var ix = this.members.findIndex(function (m) { return m.id === id; });
        (ix !== -1) && this.members.splice(ix, 1);
    };
    MemberScreenComponent.prototype.scroll = function () {
        var _this = this;
        if (this.wrapper && this.wrapper.scrollHeight > this.wrapper.clientHeight) {
            // check whether scrollEnd or not
            var delta_1 = this.wrapper.clientHeight * scrollStep, scrollTop_1 = this.wrapper.scrollTop < this.wrapper.scrollHeight - this.wrapper.clientHeight ? this.wrapper.scrollTop : -delta_1, start_1;
            var callback = function (time) {
                if (!start_1)
                    start_1 = time;
                var elapsed = time - start_1, // Elapsed miliseconds since start of scrolling.
                percent = Math.min(elapsed / duration, 1); // Get percent of completion in range [0, 1].
                percent = _this.easing(percent);
                _this.wrapper.scrollTop = scrollTop_1 + delta_1 * percent;
                elapsed < duration && window.requestAnimationFrame(callback);
            };
            window.requestAnimationFrame(callback);
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], MemberScreenComponent.prototype, "members", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], MemberScreenComponent.prototype, "conferenceId", null);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], MemberScreenComponent.prototype, "membersLoaded", void 0);
    MemberScreenComponent = __decorate([
        core_1.Component({
            selector: "member-screen",
            styles: [__webpack_require__(1022)],
            template: __webpack_require__(683)
        }),
        __metadata("design:paramtypes", [core_1.ElementRef,
            member_service_1.MemberService,
            logger_1.Logger])
    ], MemberScreenComponent);
    return MemberScreenComponent;
}());
exports.MemberScreenComponent = MemberScreenComponent;


/***/ },

/***/ 319:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var logger_1 = __webpack_require__(16);
var models_1 = __webpack_require__(13);
var screen_service_1 = __webpack_require__(138);
var ScreenTableComponent = (function () {
    function ScreenTableComponent(datePipe, location, logger, route, router, screenService) {
        this.datePipe = datePipe;
        this.location = location;
        this.logger = logger;
        this.route = route;
        this.router = router;
        this.screenService = screenService;
        this.ConfState = models_1.ConfState;
    }
    Object.defineProperty(ScreenTableComponent.prototype, "screens", {
        // ReSharper restore InconsistentNaming
        get: function () {
            return this._screens;
        },
        set: function (screens) {
            if (screens && screens.length) {
                var ix_1 = screens.length - 1, prev_1 = new Date(4000, 0, 0), now_1 = new Date();
                screens.forEach(function (s, i) {
                    // startDate/endDate in string --> create date objects
                    s.startDate = new Date(s.startDate);
                    s.endDate = new Date(s.endDate);
                    var diff = s.endDate - now_1; // in ms
                    // endDate > now
                    if (diff > 0) {
                        // search min startDate
                        if (s.startDate < prev_1) {
                            prev_1 = s.startDate;
                            ix_1 = i;
                        }
                    }
                });
                this.firstVisible = ix_1;
            }
            this._screens = screens;
        },
        enumerable: true,
        configurable: true
    });
    ScreenTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.params
            .switchMap(function (params) {
            _this.startDate = new Date(params["startDate"]);
            if (isNaN(_this.startDate.getTime()))
                _this.startDate = new Date();
            return _this.screenService
                .getAll(_this.startDate);
        })
            .subscribe(function (screens) { return _this.screens = screens; });
    };
    ScreenTableComponent.prototype.addDays = function (days) {
        var d = this.startDate.getDate(), m = this.startDate.getMonth(), y = this.startDate.getFullYear();
        this.startDate = new Date(y, m, d + days);
        this.location.replaceState("screens/" + this.datePipe.transform(this.startDate, "yyyy-MM-dd"));
        this.loadScreens();
    };
    ScreenTableComponent.prototype.loadScreens = function () {
        var _this = this;
        this.screenService
            .getAll(this.startDate)
            .subscribe(function (screens) { return _this.screens = screens; }, function (error) { return _this.logger.error2(error); });
    };
    ScreenTableComponent.prototype.openDesktop = function (id) {
        core_1.isDevMode() ? this.router.navigate(["screen", id]) : window.open("/screen/" + id, "_blank");
    };
    ScreenTableComponent = __decorate([
        core_1.Component({
            styles: [__webpack_require__(1023)],
            template: __webpack_require__(684)
        }),
        __metadata("design:paramtypes", [common_1.DatePipe,
            common_1.Location,
            logger_1.Logger,
            router_1.ActivatedRoute,
            router_1.Router,
            screen_service_1.ScreenService])
    ], ScreenTableComponent);
    return ScreenTableComponent;
}());
exports.ScreenTableComponent = ScreenTableComponent;


/***/ },

/***/ 320:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var logger_1 = __webpack_require__(16);
var models_1 = __webpack_require__(13);
var scheme_main_component_1 = __webpack_require__(137);
var animations_1 = __webpack_require__(422);
var hub_service_1 = __webpack_require__(132);
var screen_service_1 = __webpack_require__(138);
var member_screen_component_1 = __webpack_require__(318);
var speakerInterval = 30000;
var tickInterval = 5000;
var ScreenComponent = (function () {
    function ScreenComponent(logger, route, hubService, screenService) {
        var _this = this;
        this.logger = logger;
        this.route = route;
        this.hubService = hubService;
        this.screenService = screenService;
        this.now = new Date();
        this.showSpeaker = false;
        this.speaker = "Выступает speaker";
        // ReSharper disable once InconsistentNaming
        this._tickers = [];
        this.tickerHandler = function () {
            var ix = _this.tickers.indexOf(_this.ticker) + 1;
            if (ix > _this.tickers.length - 1) {
                ix = 0;
            }
            _this.ticker = _this.tickers[ix];
            _this.memberScreen.scroll();
        };
    }
    Object.defineProperty(ScreenComponent.prototype, "tickers", {
        get: function () {
            return this._tickers;
        },
        set: function (tickers) {
            this.ticker = (tickers.length > 0) ? tickers[0] : "";
            this._tickers = tickers;
        },
        enumerable: true,
        configurable: true
    });
    ScreenComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.params
            .switchMap(function (params) {
            // (+) converts string 'id' to a number
            var key = params.hasOwnProperty("id") ? +params["id"] : undefined;
            if (key) {
                _this.memberScreen.conferenceId = key;
                // служба signalR может отсутствовать
                _this.hubService
                    .start(key)
                    .subscribe(function (_) {
                    _this.hubService
                        .confirmMember
                        .subscribe(function (member) {
                        if (member.seat !== member.oldSeat)
                            _this.schemeMain.toggleMark(member.oldSeat, false);
                        _this.schemeMain.toggleMark(member.seat, member.state === models_1.MemberState.Confirmed);
                        _this.memberScreen.confirmMember(member);
                    });
                    _this.hubService
                        .unregisterMember
                        .subscribe(function (id) {
                        var member = _this.memberScreen.getMember(id);
                        if (member) {
                            _this.schemeMain.toggleMark(member.seat, false);
                            _this.memberScreen.removeMember(member.id);
                        }
                    });
                    _this.hubService
                        .sendTickers
                        .subscribe(function (tickers) { return _this.tickers = tickers; });
                });
                return _this.screenService.get(key);
            }
            return rxjs_1.Observable.empty();
        })
            .subscribe(function (screen) {
            _this.activeScreen = screen;
            _this.tickers = _this.activeScreen.tickers || [];
        }, function (error) { return _this.logger.error2(error); });
        rxjs_1.Observable
            .combineLatest(this.schemeMain.schemeLoaded, this.memberScreen.membersLoaded)
            .subscribe(function (a) {
            // занятые места
            var members = a[1] || [];
            [].forEach.call(members, function (m) { return (m.state === models_1.MemberState.Confirmed) && _this.schemeMain.toggleMark(m.seat); });
        });
        // clock
        setInterval(function () { return _this.now = new Date(); }, 1000);
        // ticker
        var ticker = setInterval(this.tickerHandler, tickInterval);
        // speaker
        setInterval(function () {
            if (_this.showSpeaker)
                ticker = setInterval(_this.tickerHandler, tickInterval);
            else
                clearInterval(ticker);
            _this.showSpeaker = !_this.showSpeaker;
        }, speakerInterval);
        this.onResize();
    };
    ScreenComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    ScreenComponent.prototype.onResize = function () {
        var h = this.wrapperElRef.nativeElement.offsetHeight;
        var cs = getComputedStyle(this.headerElRef.nativeElement);
        h -= this.headerElRef.nativeElement.offsetHeight + parseFloat(cs.marginTop) + parseFloat(cs.marginBottom);
        cs = getComputedStyle(this.footerElRef.nativeElement);
        h -= this.footerElRef.nativeElement.offsetHeight + parseFloat(cs.marginTop) + parseFloat(cs.marginBottom);
        this.box1ElRef.nativeElement.style.height = this.box2ElRef.nativeElement.style.height = h + "px";
    };
    __decorate([
        core_1.ViewChild('box1'),
        __metadata("design:type", core_1.ElementRef)
    ], ScreenComponent.prototype, "box1ElRef", void 0);
    __decorate([
        core_1.ViewChild('box2'),
        __metadata("design:type", core_1.ElementRef)
    ], ScreenComponent.prototype, "box2ElRef", void 0);
    __decorate([
        core_1.ViewChild('header'),
        __metadata("design:type", core_1.ElementRef)
    ], ScreenComponent.prototype, "headerElRef", void 0);
    __decorate([
        core_1.ViewChild('footer'),
        __metadata("design:type", core_1.ElementRef)
    ], ScreenComponent.prototype, "footerElRef", void 0);
    __decorate([
        core_1.ViewChild('wrapper'),
        __metadata("design:type", core_1.ElementRef)
    ], ScreenComponent.prototype, "wrapperElRef", void 0);
    __decorate([
        core_1.ViewChild(member_screen_component_1.MemberScreenComponent),
        __metadata("design:type", member_screen_component_1.MemberScreenComponent)
    ], ScreenComponent.prototype, "memberScreen", void 0);
    __decorate([
        core_1.ViewChild(scheme_main_component_1.SchemeMainComponent),
        __metadata("design:type", scheme_main_component_1.SchemeMainComponent)
    ], ScreenComponent.prototype, "schemeMain", void 0);
    ScreenComponent = __decorate([
        core_1.Component({
            animations: [animations_1.slideInAnimation, animations_1.slideOutAnimation],
            host: { '(window:resize)': "onResize($event)" },
            styles: [__webpack_require__(1024)],
            template: __webpack_require__(685)
        }),
        __metadata("design:paramtypes", [logger_1.Logger,
            router_1.ActivatedRoute,
            hub_service_1.HubService,
            screen_service_1.ScreenService])
    ], ScreenComponent);
    return ScreenComponent;
}());
exports.ScreenComponent = ScreenComponent;


/***/ },

/***/ 321:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var logger_1 = __webpack_require__(16);
var employee_service_1 = __webpack_require__(105);
var ticker_service_1 = __webpack_require__(139);
var NotificationComponent = (function () {
    function NotificationComponent(fb, employeeService, tickerService, location, logger, route) {
        this.fb = fb;
        this.employeeService = employeeService;
        this.tickerService = tickerService;
        this.location = location;
        this.logger = logger;
        this.route = route;
        this.msgs = [];
        this.recipients = [];
    }
    NotificationComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.sendMessageForm = this.fb.group({
            selectedRecipients: [null, forms_1.Validators.required],
            body: [null]
        });
        this.route.params
            .switchMap(function (params) {
            // (+) converts string 'confid' to a number
            _this.conferenceId = params.hasOwnProperty("confid") ? +params["confid"] : undefined;
            return _this.employeeService.getAll(_this.conferenceId);
        })
            .subscribe(function (employees) {
            _this.recipients = employees.map(function (e) { return ({ label: e.name, value: e.id }); });
            _this.conferenceId && _this.sendMessageForm.patchValue({ selectedRecipients: _this.recipients.map(function (r) { return r.value; }) });
        }, function (error) { return _this.logger.error2(error); });
    };
    NotificationComponent.prototype.addLink = function () {
        var body = (this.sendMessageForm.get("body").value || "") + ("\n" + document.location.origin + "/conferences/" + this.conferenceId);
        this.sendMessageForm.patchValue({ body: body });
    };
    NotificationComponent.prototype.send = function (e, m) {
        var _this = this;
        e.preventDefault();
        this.msgs.length = 0;
        this.loading = true;
        this.tickerService
            .notify(m.body, m.selectedRecipients)
            .subscribe(function (_) {
            _this.loading = false;
            _this.msgs.push({ severity: "info", detail: "Уведомление отправлено" });
        }, function (error) {
            _this.loading = false;
            var lines = error.summary.split("<br>") || [];
            lines.forEach(function (l) { return _this.msgs.push({ severity: "error", detail: l }); });
        });
    };
    NotificationComponent = __decorate([
        core_1.Component({
            encapsulation: core_1.ViewEncapsulation.None,
            styles: [
                ".ui-multiselect-filter-container { width: 85% }",
                ".ui-multiselect-panel {width: 50% } ",
                ".ui-panel-titlebar { display: none }",
                ".ui-panel-content.ui-widget-content { padding: 0 !important}"
            ],
            template: __webpack_require__(686)
        }),
        __metadata("design:paramtypes", [forms_1.FormBuilder,
            employee_service_1.EmployeeService,
            ticker_service_1.TickerService,
            common_1.Location,
            logger_1.Logger,
            router_1.ActivatedRoute])
    ], NotificationComponent);
    return NotificationComponent;
}());
exports.NotificationComponent = NotificationComponent;


/***/ },

/***/ 322:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var primeng_1 = __webpack_require__(20);
var logger_1 = __webpack_require__(16);
var ticker_service_1 = __webpack_require__(139);
var TickerTableComponent = (function () {
    function TickerTableComponent(confirmationService, tickerService, fb, logger) {
        this.confirmationService = confirmationService;
        this.tickerService = tickerService;
        this.fb = fb;
        this.logger = logger;
        this.tickers = [];
        this.selectedTickers = [];
    }
    Object.defineProperty(TickerTableComponent.prototype, "conferenceId", {
        get: function () {
            return this._conferenceId;
        },
        set: function (value) {
            this._conferenceId = value;
            value && this.loadTickers();
        },
        enumerable: true,
        configurable: true
    });
    TickerTableComponent.prototype.ngOnInit = function () {
        this.tickerForm = this.fb.group({
            content: [null, forms_1.Validators.required]
        });
    };
    TickerTableComponent.prototype.addTicker = function (ticker) {
        var _this = this;
        ticker.active = true;
        ticker.conferenceId = this.conferenceId;
        this.tickerService
            .add(ticker)
            .subscribe(function (key) {
            ticker.id = key;
            _this.tickers.push(ticker);
            _this.tickerForm.reset();
        }, function (error) { return _this.logger.error2(error); });
    };
    TickerTableComponent.prototype.changeActive = function (e, message) {
        var _this = this;
        e.originalEvent.stopPropagation();
        this.tickerService
            .changeActive(message.id, e.checked)
            .subscribe(function (_) { return message.active = e.checked; }, function (error) { return _this.logger.error2(error); });
    };
    TickerTableComponent.prototype.changeContent = function (e, message) {
        var _this = this;
        var content = e.currentTarget.value;
        if (content !== message.content) {
            this.tickerService
                .changeContent(message.id, content)
                .subscribe(function (_) { return message.content = content; }, function (error) { return _this.logger.error2(error); });
        }
    };
    TickerTableComponent.prototype.changeEditMode = function () {
        this.editMode = !this.editMode;
        this.selectedTickers.length = 0;
    };
    TickerTableComponent.prototype.loadTickers = function () {
        var _this = this;
        this.tickerService
            .getAll(this.conferenceId)
            .subscribe(function (tickers) { return _this.tickers = tickers; }, function (error) { return _this.logger.error2(error); });
    };
    TickerTableComponent.prototype.removeRows = function () {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u0438\u0441\u0438?",
            accept: function (_) {
                _this.tickerService
                    .delete(_this.selectedTickers.map(function (s) { return s.id; }))
                    .subscribe(function (_) {
                    _this.selectedTickers.forEach(function (h) {
                        var ix = _this.tickers.findIndex(function (n) { return n.id === h.id; });
                        (ix !== -1) && _this.tickers.splice(ix, 1);
                    });
                    _this.selectedTickers.length = 0;
                }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], TickerTableComponent.prototype, "conferenceId", null);
    TickerTableComponent = __decorate([
        core_1.Component({
            selector: "ticker-table",
            template: __webpack_require__(687)
        }),
        __metadata("design:paramtypes", [primeng_1.ConfirmationService,
            ticker_service_1.TickerService,
            forms_1.FormBuilder,
            logger_1.Logger])
    ], TickerTableComponent);
    return TickerTableComponent;
}());
exports.TickerTableComponent = TickerTableComponent;


/***/ },

/***/ 34:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var rxjs_1 = __webpack_require__(33);
/**
 * Функция получения ошибки из http.Response
 * @param error
 */
function handleResponseError(error) {
    var errMsg = {};
    if (error instanceof http_1.Response) {
        var body = void 0;
        try {
            body = error.json() || "";
        }
        catch (e) {
            body = error.text();
        }
        if (body instanceof Object) {
            if (body.hasOwnProperty("message")) {
                errMsg.summary = body.message;
                errMsg.detail = body.detail;
            }
            else {
                var err = body.error || JSON.stringify(body);
                errMsg.summary = error.status.toString();
                errMsg.detail = (error.statusText || "") + " " + err;
            }
        }
        else
            errMsg.summary = body;
    }
    else
        errMsg.detail = error.message ? error.message : error.toString();
    core_1.isDevMode() && console.error(errMsg);
    return rxjs_1.Observable.throw(errMsg);
}
exports.handleResponseError = handleResponseError;


/***/ },

/***/ 39:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var http_error_1 = __webpack_require__(34);
/**
 * Служба получения данных по http-протоколу
 */
var HttpDataService = (function () {
    function HttpDataService(http) {
        this.http = http;
    }
    HttpDataService.prototype.add = function (entity) {
        return this.http
            .post(this.url, entity)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    HttpDataService.prototype.delete = function (key) {
        return this.http
            .delete(this.url + "/" + key)
            .catch(http_error_1.handleResponseError);
    };
    HttpDataService.prototype.getAll = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return this.http
            .get(this.url)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    HttpDataService.prototype.get = function (key) {
        return this.http
            .get(this.url + "/" + key)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    HttpDataService.prototype.update = function (entity) {
        return this.http
            .put(this.url + "/" + entity.id, entity)
            .catch(http_error_1.handleResponseError);
    };
    return HttpDataService;
}());
exports.HttpDataService = HttpDataService;


/***/ },

/***/ 400:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var animations_1 = __webpack_require__(420);
var app_component_1 = __webpack_require__(421);
var auth_module_1 = __webpack_require__(425);
var navigation_module_1 = __webpack_require__(427);
var logger_1 = __webpack_require__(16);
var mediator_1 = __webpack_require__(68);
var storage_1 = __webpack_require__(133);
var AppModule = (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        core_1.NgModule({
            bootstrap: [app_component_1.AppComponent],
            declarations: [app_component_1.AppComponent],
            imports: [auth_module_1.AuthModule.forRoot(), navigation_module_1.NavigationModule, animations_1.BrowserAnimationsModule],
            providers: [logger_1.Logger, mediator_1.Mediator, storage_1.Storage]
        })
    ], AppModule);
    return AppModule;
}());
exports.AppModule = AppModule;


/***/ },

/***/ 418:
/***/ function(module, exports, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_animations__ = __webpack_require__(36);
/* harmony export (binding) */ __webpack_require__.d(exports, "h", function() { return WebAnimationsStyleNormalizer; });
/* harmony export (binding) */ __webpack_require__.d(exports, "a", function() { return AnimationEngine; });
/* unused harmony export ɵAnimation */
/* harmony export (binding) */ __webpack_require__.d(exports, "d", function() { return AnimationStyleNormalizer; });
/* unused harmony export ɵNoopAnimationStyleNormalizer */
/* harmony export (binding) */ __webpack_require__.d(exports, "c", function() { return AnimationDriver; });
/* harmony export (binding) */ __webpack_require__.d(exports, "g", function() { return NoopAnimationDriver; });
/* harmony export (binding) */ __webpack_require__.d(exports, "b", function() { return DomAnimationEngine; });
/* harmony export (binding) */ __webpack_require__.d(exports, "i", function() { return NoopAnimationEngine; });
/* harmony export (binding) */ __webpack_require__.d(exports, "f", function() { return WebAnimationsDriver; });
/* harmony export (binding) */ __webpack_require__.d(exports, "e", function() { return supportsWebAnimations; });
/* unused harmony export ɵWebAnimationsPlayer */
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/**
 * @license Angular v4.0.2
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */

/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @experimental
 */
var NoopAnimationDriver = (function () {
    function NoopAnimationDriver() {
    }
    NoopAnimationDriver.prototype.animate = function (element, keyframes, duration, delay, easing, previousPlayers) {
        if (previousPlayers === void 0) { previousPlayers = []; }
        return new __WEBPACK_IMPORTED_MODULE_0__angular_animations__["NoopAnimationPlayer"]();
    };
    return NoopAnimationDriver;
}());
/**
 * @experimental
 */
var AnimationDriver = (function () {
    function AnimationDriver() {
    }
    return AnimationDriver;
}());
AnimationDriver.NOOP = new NoopAnimationDriver();
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @abstract
 */
var AnimationEngine = (function () {
    function AnimationEngine() {
    }
    /**
     * @abstract
     * @param {?} trigger
     * @param {?=} name
     * @return {?}
     */
    AnimationEngine.prototype.registerTrigger = function (trigger, name) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} domFn
     * @return {?}
     */
    AnimationEngine.prototype.onInsert = function (element, domFn) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} domFn
     * @return {?}
     */
    AnimationEngine.prototype.onRemove = function (element, domFn) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    AnimationEngine.prototype.setProperty = function (element, property, value) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} eventName
     * @param {?} eventPhase
     * @param {?} callback
     * @return {?}
     */
    AnimationEngine.prototype.listen = function (element, eventName, eventPhase, callback) { };
    /**
     * @abstract
     * @return {?}
     */
    AnimationEngine.prototype.flush = function () { };
    Object.defineProperty(AnimationEngine.prototype, "activePlayers", {
        /**
         * @return {?}
         */
        get: function () { throw new Error('...'); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AnimationEngine.prototype, "queuedPlayers", {
        /**
         * @return {?}
         */
        get: function () { throw new Error('...'); },
        enumerable: true,
        configurable: true
    });
    return AnimationEngine;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ONE_SECOND = 1000;
/**
 * @param {?} exp
 * @param {?} errors
 * @return {?}
 */
function parseTimeExpression(exp, errors) {
    var /** @type {?} */ regex = /^([\.\d]+)(m?s)(?:\s+([\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;
    var /** @type {?} */ duration;
    var /** @type {?} */ delay = 0;
    var /** @type {?} */ easing = null;
    if (typeof exp === 'string') {
        var /** @type {?} */ matches = exp.match(regex);
        if (matches === null) {
            errors.push("The provided timing value \"" + exp + "\" is invalid.");
            return { duration: 0, delay: 0, easing: null };
        }
        var /** @type {?} */ durationMatch = parseFloat(matches[1]);
        var /** @type {?} */ durationUnit = matches[2];
        if (durationUnit == 's') {
            durationMatch *= ONE_SECOND;
        }
        duration = Math.floor(durationMatch);
        var /** @type {?} */ delayMatch = matches[3];
        var /** @type {?} */ delayUnit = matches[4];
        if (delayMatch != null) {
            var /** @type {?} */ delayVal = parseFloat(delayMatch);
            if (delayUnit != null && delayUnit == 's') {
                delayVal *= ONE_SECOND;
            }
            delay = Math.floor(delayVal);
        }
        var /** @type {?} */ easingVal = matches[5];
        if (easingVal) {
            easing = easingVal;
        }
    }
    else {
        duration = (exp);
    }
    return { duration: duration, delay: delay, easing: easing };
}
/**
 * @param {?} styles
 * @return {?}
 */
function normalizeStyles(styles) {
    var /** @type {?} */ normalizedStyles = {};
    if (Array.isArray(styles)) {
        styles.forEach(function (data) { return copyStyles(data, false, normalizedStyles); });
    }
    else {
        copyStyles(styles, false, normalizedStyles);
    }
    return normalizedStyles;
}
/**
 * @param {?} styles
 * @param {?} readPrototype
 * @param {?=} destination
 * @return {?}
 */
function copyStyles(styles, readPrototype, destination) {
    if (destination === void 0) { destination = {}; }
    if (readPrototype) {
        // we make use of a for-in loop so that the
        // prototypically inherited properties are
        // revealed from the backFill map
        for (var /** @type {?} */ prop in styles) {
            destination[prop] = styles[prop];
        }
    }
    else {
        Object.keys(styles).forEach(function (prop) { return destination[prop] = styles[prop]; });
    }
    return destination;
}
/**
 * @param {?} element
 * @param {?} styles
 * @return {?}
 */
function setStyles(element, styles) {
    if (element['style']) {
        Object.keys(styles).forEach(function (prop) { return element.style[prop] = styles[prop]; });
    }
}
/**
 * @param {?} element
 * @param {?} styles
 * @return {?}
 */
function eraseStyles(element, styles) {
    if (element['style']) {
        Object.keys(styles).forEach(function (prop) {
            // IE requires '' instead of null
            // see https://github.com/angular/angular/issues/7916
            element.style[prop] = '';
        });
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} visitor
 * @param {?} node
 * @param {?} context
 * @return {?}
 */
function visitAnimationNode(visitor, node, context) {
    switch (node.type) {
        case 0 /* State */:
            return visitor.visitState(/** @type {?} */ (node), context);
        case 1 /* Transition */:
            return visitor.visitTransition(/** @type {?} */ (node), context);
        case 2 /* Sequence */:
            return visitor.visitSequence(/** @type {?} */ (node), context);
        case 3 /* Group */:
            return visitor.visitGroup(/** @type {?} */ (node), context);
        case 4 /* Animate */:
            return visitor.visitAnimate(/** @type {?} */ (node), context);
        case 5 /* KeyframeSequence */:
            return visitor.visitKeyframeSequence(/** @type {?} */ (node), context);
        case 6 /* Style */:
            return visitor.visitStyle(/** @type {?} */ (node), context);
        default:
            throw new Error("Unable to resolve animation metadata node #" + node.type);
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ANY_STATE = '*';
/**
 * @param {?} transitionValue
 * @param {?} errors
 * @return {?}
 */
function parseTransitionExpr(transitionValue, errors) {
    var /** @type {?} */ expressions = [];
    if (typeof transitionValue == 'string') {
        ((transitionValue))
            .split(/\s*,\s*/)
            .forEach(function (str) { return parseInnerTransitionStr(str, expressions, errors); });
    }
    else {
        expressions.push(/** @type {?} */ (transitionValue));
    }
    return expressions;
}
/**
 * @param {?} eventStr
 * @param {?} expressions
 * @param {?} errors
 * @return {?}
 */
function parseInnerTransitionStr(eventStr, expressions, errors) {
    if (eventStr[0] == ':') {
        eventStr = parseAnimationAlias(eventStr, errors);
    }
    var /** @type {?} */ match = eventStr.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);
    if (match == null || match.length < 4) {
        errors.push("The provided transition expression \"" + eventStr + "\" is not supported");
        return expressions;
    }
    var /** @type {?} */ fromState = match[1];
    var /** @type {?} */ separator = match[2];
    var /** @type {?} */ toState = match[3];
    expressions.push(makeLambdaFromStates(fromState, toState));
    var /** @type {?} */ isFullAnyStateExpr = fromState == ANY_STATE && toState == ANY_STATE;
    if (separator[0] == '<' && !isFullAnyStateExpr) {
        expressions.push(makeLambdaFromStates(toState, fromState));
    }
}
/**
 * @param {?} alias
 * @param {?} errors
 * @return {?}
 */
function parseAnimationAlias(alias, errors) {
    switch (alias) {
        case ':enter':
            return 'void => *';
        case ':leave':
            return '* => void';
        default:
            errors.push("The transition alias value \"" + alias + "\" is not supported");
            return '* => *';
    }
}
/**
 * @param {?} lhs
 * @param {?} rhs
 * @return {?}
 */
function makeLambdaFromStates(lhs, rhs) {
    return function (fromState, toState) {
        var /** @type {?} */ lhsMatch = lhs == ANY_STATE || lhs == fromState;
        var /** @type {?} */ rhsMatch = rhs == ANY_STATE || rhs == toState;
        return lhsMatch && rhsMatch;
    };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} keyframes
 * @param {?} duration
 * @param {?} delay
 * @param {?} easing
 * @return {?}
 */
function createTimelineInstruction(keyframes, duration, delay, easing) {
    return {
        type: 1 /* TimelineAnimation */,
        keyframes: keyframes,
        duration: duration,
        delay: delay,
        totalTime: duration + delay, easing: easing
    };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} ast
 * @param {?=} startingStyles
 * @param {?=} finalStyles
 * @return {?}
 */
function buildAnimationKeyframes(ast, startingStyles, finalStyles) {
    if (startingStyles === void 0) { startingStyles = {}; }
    if (finalStyles === void 0) { finalStyles = {}; }
    var /** @type {?} */ normalizedAst = Array.isArray(ast) ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_animations__["sequence"])(/** @type {?} */ (ast)) : (ast);
    return new AnimationTimelineVisitor().buildKeyframes(normalizedAst, startingStyles, finalStyles);
}
var AnimationTimelineContext = (function () {
    /**
     * @param {?} errors
     * @param {?} timelines
     * @param {?=} initialTimeline
     */
    function AnimationTimelineContext(errors, timelines, initialTimeline) {
        if (initialTimeline === void 0) { initialTimeline = null; }
        this.errors = errors;
        this.timelines = timelines;
        this.previousNode = ({});
        this.subContextCount = 0;
        this.currentTimeline = initialTimeline || new TimelineBuilder(0);
        timelines.push(this.currentTimeline);
    }
    /**
     * @return {?}
     */
    AnimationTimelineContext.prototype.createSubContext = function () {
        var /** @type {?} */ context = new AnimationTimelineContext(this.errors, this.timelines, this.currentTimeline.fork());
        context.previousNode = this.previousNode;
        context.currentAnimateTimings = this.currentAnimateTimings;
        this.subContextCount++;
        return context;
    };
    /**
     * @param {?=} newTime
     * @return {?}
     */
    AnimationTimelineContext.prototype.transformIntoNewTimeline = function (newTime) {
        if (newTime === void 0) { newTime = 0; }
        this.currentTimeline = this.currentTimeline.fork(newTime);
        this.timelines.push(this.currentTimeline);
        return this.currentTimeline;
    };
    /**
     * @param {?} time
     * @return {?}
     */
    AnimationTimelineContext.prototype.incrementTime = function (time) {
        this.currentTimeline.forwardTime(this.currentTimeline.duration + time);
    };
    return AnimationTimelineContext;
}());
var AnimationTimelineVisitor = (function () {
    function AnimationTimelineVisitor() {
    }
    /**
     * @param {?} ast
     * @param {?} startingStyles
     * @param {?} finalStyles
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.buildKeyframes = function (ast, startingStyles, finalStyles) {
        var /** @type {?} */ context = new AnimationTimelineContext([], []);
        context.currentTimeline.setStyles(startingStyles);
        visitAnimationNode(this, ast, context);
        // this checks to see if an actual animation happened
        var /** @type {?} */ timelines = context.timelines.filter(function (timeline) { return timeline.hasStyling(); });
        if (timelines.length && Object.keys(finalStyles).length) {
            var /** @type {?} */ tl = timelines[timelines.length - 1];
            if (!tl.allowOnlyTimelineStyles()) {
                tl.setStyles(finalStyles);
            }
        }
        return timelines.length ? timelines.map(function (timeline) { return timeline.buildKeyframes(); }) :
            [createTimelineInstruction([], 0, 0, '')];
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitState = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitTransition = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitSequence = function (ast, context) {
        var _this = this;
        var /** @type {?} */ subContextCount = context.subContextCount;
        if (context.previousNode.type == 6 /* Style */) {
            context.currentTimeline.forwardFrame();
            context.currentTimeline.snapshotCurrentStyles();
        }
        ast.steps.forEach(function (s) { return visitAnimationNode(_this, s, context); });
        // this means that some animation function within the sequence
        // ended up creating a sub timeline (which means the current
        // timeline cannot overlap with the contents of the sequence)
        if (context.subContextCount > subContextCount) {
            context.transformIntoNewTimeline();
        }
        context.previousNode = ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitGroup = function (ast, context) {
        var _this = this;
        var /** @type {?} */ innerTimelines = [];
        var /** @type {?} */ furthestTime = context.currentTimeline.currentTime;
        ast.steps.forEach(function (s) {
            var /** @type {?} */ innerContext = context.createSubContext();
            visitAnimationNode(_this, s, innerContext);
            furthestTime = Math.max(furthestTime, innerContext.currentTimeline.currentTime);
            innerTimelines.push(innerContext.currentTimeline);
        });
        // this operation is run after the AST loop because otherwise
        // if the parent timeline's collected styles were updated then
        // it would pass in invalid data into the new-to-be forked items
        innerTimelines.forEach(function (timeline) { return context.currentTimeline.mergeTimelineCollectedStyles(timeline); });
        context.transformIntoNewTimeline(furthestTime);
        context.previousNode = ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitAnimate = function (ast, context) {
        var /** @type {?} */ timings = ast.timings.hasOwnProperty('duration') ? (ast.timings) :
            parseTimeExpression(/** @type {?} */ (ast.timings), context.errors);
        context.currentAnimateTimings = timings;
        if (timings.delay) {
            context.incrementTime(timings.delay);
            context.currentTimeline.snapshotCurrentStyles();
        }
        var /** @type {?} */ astType = ast.styles ? ast.styles.type : -1;
        if (astType == 5 /* KeyframeSequence */) {
            this.visitKeyframeSequence(/** @type {?} */ (ast.styles), context);
        }
        else {
            var /** @type {?} */ styleAst = (ast.styles);
            if (!styleAst) {
                var /** @type {?} */ newStyleData = {};
                if (timings.easing) {
                    newStyleData['easing'] = timings.easing;
                }
                styleAst = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_animations__["style"])(newStyleData);
                ((styleAst))['treatAsEmptyStep'] = true;
            }
            context.incrementTime(timings.duration);
            if (styleAst) {
                this.visitStyle(styleAst, context);
            }
        }
        context.currentAnimateTimings = null;
        context.previousNode = ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitStyle = function (ast, context) {
        // this is a special case when a style() call is issued directly after
        // a call to animate(). If the clock is not forwarded by one frame then
        // the style() calls will be merged into the previous animate() call
        // which is incorrect.
        if (!context.currentAnimateTimings &&
            context.previousNode.type == 4 /* Animate */) {
            context.currentTimeline.forwardFrame();
        }
        var /** @type {?} */ normalizedStyles = normalizeStyles(ast.styles);
        var /** @type {?} */ easing = context.currentAnimateTimings && context.currentAnimateTimings.easing;
        this._applyStyles(normalizedStyles, easing, ((ast))['treatAsEmptyStep'] ? true : false, context);
        context.previousNode = ast;
    };
    /**
     * @param {?} styles
     * @param {?} easing
     * @param {?} treatAsEmptyStep
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype._applyStyles = function (styles, easing, treatAsEmptyStep, context) {
        if (styles.hasOwnProperty('easing')) {
            easing = easing || (styles['easing']);
            delete styles['easing'];
        }
        context.currentTimeline.setStyles(styles, easing, treatAsEmptyStep);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTimelineVisitor.prototype.visitKeyframeSequence = function (ast, context) {
        var _this = this;
        var /** @type {?} */ MAX_KEYFRAME_OFFSET = 1;
        var /** @type {?} */ limit = ast.steps.length - 1;
        var /** @type {?} */ firstKeyframe = ast.steps[0];
        var /** @type {?} */ offsetGap = 0;
        var /** @type {?} */ containsOffsets = getOffset(firstKeyframe) != null;
        if (!containsOffsets) {
            offsetGap = MAX_KEYFRAME_OFFSET / limit;
        }
        var /** @type {?} */ startTime = context.currentTimeline.duration;
        var /** @type {?} */ duration = context.currentAnimateTimings.duration;
        var /** @type {?} */ innerContext = context.createSubContext();
        var /** @type {?} */ innerTimeline = innerContext.currentTimeline;
        innerTimeline.easing = context.currentAnimateTimings.easing;
        ast.steps.forEach(function (step, i) {
            var /** @type {?} */ normalizedStyles = normalizeStyles(step.styles);
            var /** @type {?} */ offset = containsOffsets ?
                (step.offset != null ? step.offset : parseFloat(/** @type {?} */ (normalizedStyles['offset']))) :
                (i == limit ? MAX_KEYFRAME_OFFSET : i * offsetGap);
            innerTimeline.forwardTime(offset * duration);
            _this._applyStyles(normalizedStyles, null, false, innerContext);
        });
        // this will ensure that the parent timeline gets all the styles from
        // the child even if the new timeline below is not used
        context.currentTimeline.mergeTimelineCollectedStyles(innerTimeline);
        // we do this because the window between this timeline and the sub timeline
        // should ensure that the styles within are exactly the same as they were before
        context.transformIntoNewTimeline(startTime + duration);
        context.previousNode = ast;
    };
    return AnimationTimelineVisitor;
}());
var TimelineBuilder = (function () {
    /**
     * @param {?} startTime
     * @param {?=} _globalTimelineStyles
     */
    function TimelineBuilder(startTime, _globalTimelineStyles) {
        if (_globalTimelineStyles === void 0) { _globalTimelineStyles = null; }
        this.startTime = startTime;
        this._globalTimelineStyles = _globalTimelineStyles;
        this.duration = 0;
        this.easing = '';
        this._previousKeyframe = {};
        this._keyframes = new Map();
        this._styleSummary = {};
        this._backFill = {};
        this._currentEmptyStepKeyframe = null;
        this._localTimelineStyles = Object.create(this._backFill, {});
        if (!this._globalTimelineStyles) {
            this._globalTimelineStyles = this._localTimelineStyles;
        }
        this._loadKeyframe();
    }
    /**
     * @return {?}
     */
    TimelineBuilder.prototype.hasStyling = function () { return this._keyframes.size > 1; };
    Object.defineProperty(TimelineBuilder.prototype, "currentTime", {
        /**
         * @return {?}
         */
        get: function () { return this.startTime + this.duration; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?=} currentTime
     * @return {?}
     */
    TimelineBuilder.prototype.fork = function (currentTime) {
        if (currentTime === void 0) { currentTime = 0; }
        return new TimelineBuilder(currentTime || this.currentTime, this._globalTimelineStyles);
    };
    /**
     * @return {?}
     */
    TimelineBuilder.prototype._loadKeyframe = function () {
        if (this._currentKeyframe) {
            this._previousKeyframe = this._currentKeyframe;
        }
        this._currentKeyframe = this._keyframes.get(this.duration);
        if (!this._currentKeyframe) {
            this._currentKeyframe = Object.create(this._backFill, {});
            this._keyframes.set(this.duration, this._currentKeyframe);
        }
    };
    /**
     * @return {?}
     */
    TimelineBuilder.prototype.forwardFrame = function () {
        this.duration++;
        this._loadKeyframe();
    };
    /**
     * @param {?} time
     * @return {?}
     */
    TimelineBuilder.prototype.forwardTime = function (time) {
        this.duration = time;
        this._loadKeyframe();
    };
    /**
     * @param {?} prop
     * @param {?} value
     * @return {?}
     */
    TimelineBuilder.prototype._updateStyle = function (prop, value) {
        this._localTimelineStyles[prop] = value;
        this._globalTimelineStyles[prop] = value;
        this._styleSummary[prop] = { time: this.currentTime, value: value };
    };
    /**
     * @return {?}
     */
    TimelineBuilder.prototype.allowOnlyTimelineStyles = function () { return this._currentEmptyStepKeyframe !== this._currentKeyframe; };
    /**
     * @param {?} styles
     * @param {?=} easing
     * @param {?=} treatAsEmptyStep
     * @return {?}
     */
    TimelineBuilder.prototype.setStyles = function (styles, easing, treatAsEmptyStep) {
        var _this = this;
        if (easing === void 0) { easing = null; }
        if (treatAsEmptyStep === void 0) { treatAsEmptyStep = false; }
        if (easing) {
            this._previousKeyframe['easing'] = easing;
        }
        if (treatAsEmptyStep) {
            // special case for animate(duration):
            // all missing styles are filled with a `*` value then
            // if any destination styles are filled in later on the same
            // keyframe then they will override the overridden styles
            // We use `_globalTimelineStyles` here because there may be
            // styles in previous keyframes that are not present in this timeline
            Object.keys(this._globalTimelineStyles).forEach(function (prop) {
                _this._backFill[prop] = _this._globalTimelineStyles[prop] || __WEBPACK_IMPORTED_MODULE_0__angular_animations__["AUTO_STYLE"];
                _this._currentKeyframe[prop] = __WEBPACK_IMPORTED_MODULE_0__angular_animations__["AUTO_STYLE"];
            });
            this._currentEmptyStepKeyframe = this._currentKeyframe;
        }
        else {
            Object.keys(styles).forEach(function (prop) {
                if (prop !== 'offset') {
                    var /** @type {?} */ val = styles[prop];
                    _this._currentKeyframe[prop] = val;
                    if (!_this._localTimelineStyles[prop]) {
                        _this._backFill[prop] = _this._globalTimelineStyles[prop] || __WEBPACK_IMPORTED_MODULE_0__angular_animations__["AUTO_STYLE"];
                    }
                    _this._updateStyle(prop, val);
                }
            });
            Object.keys(this._localTimelineStyles).forEach(function (prop) {
                if (!_this._currentKeyframe.hasOwnProperty(prop)) {
                    _this._currentKeyframe[prop] = _this._localTimelineStyles[prop];
                }
            });
        }
    };
    /**
     * @return {?}
     */
    TimelineBuilder.prototype.snapshotCurrentStyles = function () { copyStyles(this._localTimelineStyles, false, this._currentKeyframe); };
    /**
     * @return {?}
     */
    TimelineBuilder.prototype.getFinalKeyframe = function () { return this._keyframes.get(this.duration); };
    Object.defineProperty(TimelineBuilder.prototype, "properties", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ properties = [];
            for (var /** @type {?} */ prop in this._currentKeyframe) {
                properties.push(prop);
            }
            return properties;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} timeline
     * @return {?}
     */
    TimelineBuilder.prototype.mergeTimelineCollectedStyles = function (timeline) {
        var _this = this;
        Object.keys(timeline._styleSummary).forEach(function (prop) {
            var /** @type {?} */ details0 = _this._styleSummary[prop];
            var /** @type {?} */ details1 = timeline._styleSummary[prop];
            if (!details0 || details1.time > details0.time) {
                _this._updateStyle(prop, details1.value);
            }
        });
    };
    /**
     * @return {?}
     */
    TimelineBuilder.prototype.buildKeyframes = function () {
        var _this = this;
        var /** @type {?} */ finalKeyframes = [];
        // special case for when there are only start/destination
        // styles but no actual animation animate steps...
        if (this.duration == 0) {
            var /** @type {?} */ targetKeyframe = this.getFinalKeyframe();
            var /** @type {?} */ firstKeyframe = copyStyles(targetKeyframe, true);
            firstKeyframe['offset'] = 0;
            finalKeyframes.push(firstKeyframe);
            var /** @type {?} */ lastKeyframe = copyStyles(targetKeyframe, true);
            lastKeyframe['offset'] = 1;
            finalKeyframes.push(lastKeyframe);
        }
        else {
            this._keyframes.forEach(function (keyframe, time) {
                var /** @type {?} */ finalKeyframe = copyStyles(keyframe, true);
                finalKeyframe['offset'] = time / _this.duration;
                finalKeyframes.push(finalKeyframe);
            });
        }
        return createTimelineInstruction(finalKeyframes, this.duration, this.startTime, this.easing);
    };
    return TimelineBuilder;
}());
/**
 * @param {?} ast
 * @return {?}
 */
function getOffset(ast) {
    var /** @type {?} */ offset = ast.offset;
    if (offset == null) {
        var /** @type {?} */ styles = ast.styles;
        if (Array.isArray(styles)) {
            for (var /** @type {?} */ i = 0; i < styles.length; i++) {
                var /** @type {?} */ o = (styles[i]['offset']);
                if (o != null) {
                    offset = o;
                    break;
                }
            }
        }
        else {
            offset = (styles['offset']);
        }
    }
    return offset;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} triggerName
 * @param {?} fromState
 * @param {?} toState
 * @param {?} isRemovalTransition
 * @param {?} fromStyles
 * @param {?} toStyles
 * @param {?} timelines
 * @return {?}
 */
function createTransitionInstruction(triggerName, fromState, toState, isRemovalTransition, fromStyles, toStyles, timelines) {
    return {
        type: 0 /* TransitionAnimation */,
        triggerName: triggerName,
        isRemovalTransition: isRemovalTransition,
        fromState: fromState,
        fromStyles: fromStyles,
        toState: toState,
        toStyles: toStyles,
        timelines: timelines
    };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var AnimationTransitionFactory = (function () {
    /**
     * @param {?} _triggerName
     * @param {?} ast
     * @param {?} matchFns
     * @param {?} _stateStyles
     */
    function AnimationTransitionFactory(_triggerName, ast, matchFns, _stateStyles) {
        this._triggerName = _triggerName;
        this.matchFns = matchFns;
        this._stateStyles = _stateStyles;
        var normalizedAst = Array.isArray(ast.animation) ?
            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_animations__["sequence"])(ast.animation) :
            ast.animation;
        this._animationAst = normalizedAst;
    }
    /**
     * @param {?} currentState
     * @param {?} nextState
     * @return {?}
     */
    AnimationTransitionFactory.prototype.match = function (currentState, nextState) {
        if (!oneOrMoreTransitionsMatch(this.matchFns, currentState, nextState))
            return;
        var /** @type {?} */ backupStateStyles = this._stateStyles['*'] || {};
        var /** @type {?} */ currentStateStyles = this._stateStyles[currentState] || backupStateStyles;
        var /** @type {?} */ nextStateStyles = this._stateStyles[nextState] || backupStateStyles;
        var /** @type {?} */ timelines = buildAnimationKeyframes(this._animationAst, currentStateStyles, nextStateStyles);
        return createTransitionInstruction(this._triggerName, currentState, nextState, nextState === 'void', currentStateStyles, nextStateStyles, timelines);
    };
    return AnimationTransitionFactory;
}());
/**
 * @param {?} matchFns
 * @param {?} currentState
 * @param {?} nextState
 * @return {?}
 */
function oneOrMoreTransitionsMatch(matchFns, currentState, nextState) {
    return matchFns.some(function (fn) { return fn(currentState, nextState); });
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} ast
 * @return {?}
 */
function validateAnimationSequence(ast) {
    var /** @type {?} */ normalizedAst = Array.isArray(ast) ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_animations__["sequence"])(/** @type {?} */ (ast)) : (ast);
    return new AnimationValidatorVisitor().validate(normalizedAst);
}
var AnimationValidatorVisitor = (function () {
    function AnimationValidatorVisitor() {
    }
    /**
     * @param {?} ast
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.validate = function (ast) {
        var /** @type {?} */ context = new AnimationValidatorContext();
        visitAnimationNode(this, ast, context);
        return context.errors;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitState = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitTransition = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitSequence = function (ast, context) {
        var _this = this;
        ast.steps.forEach(function (step) { return visitAnimationNode(_this, step, context); });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitGroup = function (ast, context) {
        var _this = this;
        var /** @type {?} */ currentTime = context.currentTime;
        var /** @type {?} */ furthestTime = 0;
        ast.steps.forEach(function (step) {
            context.currentTime = currentTime;
            visitAnimationNode(_this, step, context);
            furthestTime = Math.max(furthestTime, context.currentTime);
        });
        context.currentTime = furthestTime;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitAnimate = function (ast, context) {
        // we reassign the timings here so that they are not reparsed each
        // time an animation occurs
        context.currentAnimateTimings = ast.timings =
            parseTimeExpression(/** @type {?} */ (ast.timings), context.errors);
        var /** @type {?} */ astType = ast.styles && ast.styles.type;
        if (astType == 5 /* KeyframeSequence */) {
            this.visitKeyframeSequence(/** @type {?} */ (ast.styles), context);
        }
        else {
            context.currentTime +=
                context.currentAnimateTimings.duration + context.currentAnimateTimings.delay;
            if (astType == 6 /* Style */) {
                this.visitStyle(/** @type {?} */ (ast.styles), context);
            }
        }
        context.currentAnimateTimings = null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitStyle = function (ast, context) {
        var /** @type {?} */ styleData = normalizeStyles(ast.styles);
        var /** @type {?} */ timings = context.currentAnimateTimings;
        var /** @type {?} */ endTime = context.currentTime;
        var /** @type {?} */ startTime = context.currentTime;
        if (timings && startTime > 0) {
            startTime -= timings.duration + timings.delay;
        }
        Object.keys(styleData).forEach(function (prop) {
            var /** @type {?} */ collectedEntry = context.collectedStyles[prop];
            var /** @type {?} */ updateCollectedStyle = true;
            if (collectedEntry) {
                if (startTime != endTime && startTime >= collectedEntry.startTime &&
                    endTime <= collectedEntry.endTime) {
                    context.errors.push("The CSS property \"" + prop + "\" that exists between the times of \"" + collectedEntry.startTime + "ms\" and \"" + collectedEntry.endTime + "ms\" is also being animated in a parallel animation between the times of \"" + startTime + "ms\" and \"" + endTime + "ms\"");
                    updateCollectedStyle = false;
                }
                // we always choose the smaller start time value since we
                // want to have a record of the entire animation window where
                // the style property is being animated in between
                startTime = collectedEntry.startTime;
            }
            if (updateCollectedStyle) {
                context.collectedStyles[prop] = { startTime: startTime, endTime: endTime };
            }
        });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationValidatorVisitor.prototype.visitKeyframeSequence = function (ast, context) {
        var _this = this;
        var /** @type {?} */ totalKeyframesWithOffsets = 0;
        var /** @type {?} */ offsets = [];
        var /** @type {?} */ offsetsOutOfOrder = false;
        var /** @type {?} */ keyframesOutOfRange = false;
        var /** @type {?} */ previousOffset = 0;
        ast.steps.forEach(function (step) {
            var /** @type {?} */ styleData = normalizeStyles(step.styles);
            var /** @type {?} */ offset = 0;
            if (styleData.hasOwnProperty('offset')) {
                totalKeyframesWithOffsets++;
                offset = (styleData['offset']);
            }
            keyframesOutOfRange = keyframesOutOfRange || offset < 0 || offset > 1;
            offsetsOutOfOrder = offsetsOutOfOrder || offset < previousOffset;
            previousOffset = offset;
            offsets.push(offset);
        });
        if (keyframesOutOfRange) {
            context.errors.push("Please ensure that all keyframe offsets are between 0 and 1");
        }
        if (offsetsOutOfOrder) {
            context.errors.push("Please ensure that all keyframe offsets are in order");
        }
        var /** @type {?} */ length = ast.steps.length;
        var /** @type {?} */ generatedOffset = 0;
        if (totalKeyframesWithOffsets > 0 && totalKeyframesWithOffsets < length) {
            context.errors.push("Not all style() steps within the declared keyframes() contain offsets");
        }
        else if (totalKeyframesWithOffsets == 0) {
            generatedOffset = 1 / length;
        }
        var /** @type {?} */ limit = length - 1;
        var /** @type {?} */ currentTime = context.currentTime;
        var /** @type {?} */ animateDuration = context.currentAnimateTimings.duration;
        ast.steps.forEach(function (step, i) {
            var /** @type {?} */ offset = generatedOffset > 0 ? (i == limit ? 1 : (generatedOffset * i)) : offsets[i];
            var /** @type {?} */ durationUpToThisFrame = offset * animateDuration;
            context.currentTime =
                currentTime + context.currentAnimateTimings.delay + durationUpToThisFrame;
            context.currentAnimateTimings.duration = durationUpToThisFrame;
            _this.visitStyle(step, context);
        });
    };
    return AnimationValidatorVisitor;
}());
var AnimationValidatorContext = (function () {
    function AnimationValidatorContext() {
        this.errors = [];
        this.currentTime = 0;
        this.collectedStyles = {};
    }
    return AnimationValidatorContext;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@experimental Animation support is experimental.
 * @param {?} name
 * @param {?} definitions
 * @return {?}
 */
function buildTrigger(name, definitions) {
    return new AnimationTriggerVisitor().buildTrigger(name, definitions);
}
/**
 * \@experimental Animation support is experimental.
 */
var AnimationTrigger = (function () {
    /**
     * @param {?} name
     * @param {?} states
     * @param {?} _transitionAsts
     */
    function AnimationTrigger(name, states, _transitionAsts) {
        var _this = this;
        this.name = name;
        this._transitionAsts = _transitionAsts;
        this.transitionFactories = [];
        this.states = {};
        Object.keys(states).forEach(function (stateName) { _this.states[stateName] = copyStyles(states[stateName], false); });
        var errors = [];
        _transitionAsts.forEach(function (ast) {
            var exprs = parseTransitionExpr(ast.expr, errors);
            var sequenceErrors = validateAnimationSequence(ast);
            if (sequenceErrors.length) {
                errors.push.apply(errors, sequenceErrors);
            }
            else {
                _this.transitionFactories.push(new AnimationTransitionFactory(_this.name, ast, exprs, states));
            }
        });
        if (errors.length) {
            var LINE_START = '\n - ';
            throw new Error("Animation parsing for the " + name + " trigger have failed:" + LINE_START + errors.join(LINE_START));
        }
    }
    /**
     * @param {?} currentState
     * @param {?} nextState
     * @return {?}
     */
    AnimationTrigger.prototype.createFallbackInstruction = function (currentState, nextState) {
        var /** @type {?} */ backupStateStyles = this.states['*'] || {};
        var /** @type {?} */ currentStateStyles = this.states[currentState] || backupStateStyles;
        var /** @type {?} */ nextStateStyles = this.states[nextState] || backupStateStyles;
        return createTransitionInstruction(this.name, currentState, nextState, nextState == 'void', currentStateStyles, nextStateStyles, []);
    };
    /**
     * @param {?} currentState
     * @param {?} nextState
     * @return {?}
     */
    AnimationTrigger.prototype.matchTransition = function (currentState, nextState) {
        for (var /** @type {?} */ i = 0; i < this.transitionFactories.length; i++) {
            var /** @type {?} */ result = this.transitionFactories[i].match(currentState, nextState);
            if (result)
                return result;
        }
    };
    return AnimationTrigger;
}());
var AnimationTriggerContext = (function () {
    function AnimationTriggerContext() {
        this.errors = [];
        this.states = {};
        this.transitions = [];
    }
    return AnimationTriggerContext;
}());
var AnimationTriggerVisitor = (function () {
    function AnimationTriggerVisitor() {
    }
    /**
     * @param {?} name
     * @param {?} definitions
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.buildTrigger = function (name, definitions) {
        var _this = this;
        var /** @type {?} */ context = new AnimationTriggerContext();
        definitions.forEach(function (def) { return visitAnimationNode(_this, def, context); });
        return new AnimationTrigger(name, context.states, context.transitions);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitState = function (ast, context) {
        var /** @type {?} */ styles = normalizeStyles(ast.styles.styles);
        ast.name.split(/\s*,\s*/).forEach(function (name) { context.states[name] = styles; });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitTransition = function (ast, context) {
        context.transitions.push(ast);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitSequence = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitGroup = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitAnimate = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitStyle = function (ast, context) {
        // these values are not visited in this AST
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AnimationTriggerVisitor.prototype.visitKeyframeSequence = function (ast, context) {
        // these values are not visited in this AST
    };
    return AnimationTriggerVisitor;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var MARKED_FOR_ANIMATION_CLASSNAME = 'ng-animating';
var MARKED_FOR_ANIMATION_SELECTOR = '.ng-animating';
var MARKED_FOR_REMOVAL = '$$ngRemove';
var VOID_STATE = 'void';
var DomAnimationEngine = (function () {
    /**
     * @param {?} _driver
     * @param {?} _normalizer
     */
    function DomAnimationEngine(_driver, _normalizer) {
        this._driver = _driver;
        this._normalizer = _normalizer;
        this._flaggedInserts = new Set();
        this._queuedRemovals = new Map();
        this._queuedTransitionAnimations = [];
        this._activeTransitionAnimations = new Map();
        this._activeElementAnimations = new Map();
        this._elementTriggerStates = new Map();
        this._triggers = Object.create(null);
        this._triggerListeners = new Map();
        this._pendingListenerRemovals = new Map();
    }
    Object.defineProperty(DomAnimationEngine.prototype, "queuedPlayers", {
        /**
         * @return {?}
         */
        get: function () {
            return this._queuedTransitionAnimations.map(function (q) { return q.player; });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DomAnimationEngine.prototype, "activePlayers", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ players = [];
            this._activeElementAnimations.forEach(function (activePlayers) { return players.push.apply(players, activePlayers); });
            return players;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} trigger
     * @param {?=} name
     * @return {?}
     */
    DomAnimationEngine.prototype.registerTrigger = function (trigger, name) {
        if (name === void 0) { name = null; }
        name = name || trigger.name;
        if (this._triggers[name]) {
            return;
        }
        this._triggers[name] = buildTrigger(name, trigger.definitions);
    };
    /**
     * @param {?} element
     * @param {?} domFn
     * @return {?}
     */
    DomAnimationEngine.prototype.onInsert = function (element, domFn) {
        if (element['nodeType'] == 1) {
            this._flaggedInserts.add(element);
        }
        domFn();
    };
    /**
     * @param {?} element
     * @param {?} domFn
     * @return {?}
     */
    DomAnimationEngine.prototype.onRemove = function (element, domFn) {
        var _this = this;
        if (element['nodeType'] != 1) {
            domFn();
            return;
        }
        var /** @type {?} */ lookupRef = this._elementTriggerStates.get(element);
        if (lookupRef) {
            var /** @type {?} */ possibleTriggers = Object.keys(lookupRef);
            var /** @type {?} */ hasRemoval = possibleTriggers.some(function (triggerName) {
                var /** @type {?} */ oldValue = lookupRef[triggerName];
                var /** @type {?} */ instruction = _this._triggers[triggerName].matchTransition(oldValue, VOID_STATE);
                return !!instruction;
            });
            if (hasRemoval) {
                element[MARKED_FOR_REMOVAL] = true;
                this._queuedRemovals.set(element, domFn);
                return;
            }
        }
        // this means that there are no animations to take on this
        // leave operation therefore we should fire the done|start callbacks
        if (this._triggerListeners.has(element)) {
            element[MARKED_FOR_REMOVAL] = true;
            this._queuedRemovals.set(element, function () { });
        }
        this._onRemovalTransition(element).forEach(function (player) { return player.destroy(); });
        domFn();
    };
    /**
     * @param {?} element
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    DomAnimationEngine.prototype.setProperty = function (element, property, value) {
        var /** @type {?} */ trigger = this._triggers[property];
        if (!trigger) {
            throw new Error("The provided animation trigger \"" + property + "\" has not been registered!");
        }
        var /** @type {?} */ lookupRef = this._elementTriggerStates.get(element);
        if (!lookupRef) {
            this._elementTriggerStates.set(element, lookupRef = {});
        }
        var /** @type {?} */ oldValue = lookupRef.hasOwnProperty(property) ? lookupRef[property] : VOID_STATE;
        if (oldValue !== value) {
            value = normalizeTriggerValue(value);
            var /** @type {?} */ instruction = trigger.matchTransition(oldValue, value);
            if (!instruction) {
                // we do this to make sure we always have an animation player so
                // that callback operations are properly called
                instruction = trigger.createFallbackInstruction(oldValue, value);
            }
            this.animateTransition(element, instruction);
            lookupRef[property] = value;
        }
    };
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} eventPhase
     * @param {?} callback
     * @return {?}
     */
    DomAnimationEngine.prototype.listen = function (element, eventName, eventPhase, callback) {
        var _this = this;
        if (!eventPhase) {
            throw new Error("Unable to listen on the animation trigger \"" + eventName + "\" because the provided event is undefined!");
        }
        if (!this._triggers[eventName]) {
            throw new Error("Unable to listen on the animation trigger event \"" + eventPhase + "\" because the animation trigger \"" + eventName + "\" doesn't exist!");
        }
        var /** @type {?} */ elementListeners = this._triggerListeners.get(element);
        if (!elementListeners) {
            this._triggerListeners.set(element, elementListeners = []);
        }
        validatePlayerEvent(eventName, eventPhase);
        var /** @type {?} */ tuple = ({ triggerName: eventName, phase: eventPhase, callback: callback });
        elementListeners.push(tuple);
        return function () {
            // this is queued up in the event that a removal animation is set
            // to fire on the element (the listeners need to be set during flush)
            getOrSetAsInMap(_this._pendingListenerRemovals, element, []).push(tuple);
        };
    };
    /**
     * @return {?}
     */
    DomAnimationEngine.prototype._clearPendingListenerRemovals = function () {
        var _this = this;
        this._pendingListenerRemovals.forEach(function (tuples, element) {
            var /** @type {?} */ elementListeners = _this._triggerListeners.get(element);
            if (elementListeners) {
                tuples.forEach(function (tuple) {
                    var /** @type {?} */ index = elementListeners.indexOf(tuple);
                    if (index >= 0) {
                        elementListeners.splice(index, 1);
                    }
                });
            }
        });
        this._pendingListenerRemovals.clear();
    };
    /**
     * @param {?} element
     * @return {?}
     */
    DomAnimationEngine.prototype._onRemovalTransition = function (element) {
        // when a parent animation is set to trigger a removal we want to
        // find all of the children that are currently animating and clear
        // them out by destroying each of them.
        var /** @type {?} */ elms = element.querySelectorAll(MARKED_FOR_ANIMATION_SELECTOR);
        var _loop_1 = function (i) {
            var /** @type {?} */ elm = elms[i];
            var /** @type {?} */ activePlayers = this_1._activeElementAnimations.get(elm);
            if (activePlayers) {
                activePlayers.forEach(function (player) { return player.destroy(); });
            }
            var /** @type {?} */ activeTransitions = this_1._activeTransitionAnimations.get(elm);
            if (activeTransitions) {
                Object.keys(activeTransitions).forEach(function (triggerName) {
                    var /** @type {?} */ player = activeTransitions[triggerName];
                    if (player) {
                        player.destroy();
                    }
                });
            }
        };
        var this_1 = this;
        for (var /** @type {?} */ i = 0; i < elms.length; i++) {
            _loop_1(/** @type {?} */ i);
        }
        // we make a copy of the array because the actual source array is modified
        // each time a player is finished/destroyed (the forEach loop would fail otherwise)
        return copyArray(this._activeElementAnimations.get(element));
    };
    /**
     * @param {?} element
     * @param {?} instruction
     * @return {?}
     */
    DomAnimationEngine.prototype.animateTransition = function (element, instruction) {
        var _this = this;
        var /** @type {?} */ triggerName = instruction.triggerName;
        var /** @type {?} */ previousPlayers;
        if (instruction.isRemovalTransition) {
            previousPlayers = this._onRemovalTransition(element);
        }
        else {
            previousPlayers = [];
            var /** @type {?} */ existingTransitions = this._activeTransitionAnimations.get(element);
            var /** @type {?} */ existingPlayer = existingTransitions ? existingTransitions[triggerName] : null;
            if (existingPlayer) {
                previousPlayers.push(existingPlayer);
            }
        }
        // it's important to do this step before destroying the players
        // so that the onDone callback below won't fire before this
        eraseStyles(element, instruction.fromStyles);
        // we first run this so that the previous animation player
        // data can be passed into the successive animation players
        var /** @type {?} */ totalTime = 0;
        var /** @type {?} */ players = instruction.timelines.map(function (timelineInstruction, i) {
            totalTime = Math.max(totalTime, timelineInstruction.totalTime);
            return _this._buildPlayer(element, timelineInstruction, previousPlayers, i);
        });
        previousPlayers.forEach(function (previousPlayer) { return previousPlayer.destroy(); });
        var /** @type {?} */ player = optimizeGroupPlayer(players);
        player.onDone(function () {
            player.destroy();
            var /** @type {?} */ elmTransitionMap = _this._activeTransitionAnimations.get(element);
            if (elmTransitionMap) {
                delete elmTransitionMap[triggerName];
                if (Object.keys(elmTransitionMap).length == 0) {
                    _this._activeTransitionAnimations.delete(element);
                }
            }
            deleteFromArrayMap(_this._activeElementAnimations, element, player);
            setStyles(element, instruction.toStyles);
        });
        var /** @type {?} */ elmTransitionMap = getOrSetAsInMap(this._activeTransitionAnimations, element, {});
        elmTransitionMap[triggerName] = player;
        this._queuePlayer(element, triggerName, player, makeAnimationEvent(element, triggerName, instruction.fromState, instruction.toState, null, // this will be filled in during event creation
        totalTime));
        return player;
    };
    /**
     * @param {?} element
     * @param {?} instructions
     * @param {?=} previousPlayers
     * @return {?}
     */
    DomAnimationEngine.prototype.animateTimeline = function (element, instructions, previousPlayers) {
        var _this = this;
        if (previousPlayers === void 0) { previousPlayers = []; }
        var /** @type {?} */ players = instructions.map(function (instruction, i) {
            var /** @type {?} */ player = _this._buildPlayer(element, instruction, previousPlayers, i);
            player.onDestroy(function () { deleteFromArrayMap(_this._activeElementAnimations, element, player); });
            _this._markPlayerAsActive(element, player);
            return player;
        });
        return optimizeGroupPlayer(players);
    };
    /**
     * @param {?} element
     * @param {?} instruction
     * @param {?} previousPlayers
     * @param {?=} index
     * @return {?}
     */
    DomAnimationEngine.prototype._buildPlayer = function (element, instruction, previousPlayers, index) {
        if (index === void 0) { index = 0; }
        // only the very first animation can absorb the previous styles. This
        // is here to prevent the an overlap situation where a group animation
        // absorbs previous styles multiple times for the same element.
        if (index && previousPlayers.length) {
            previousPlayers = [];
        }
        return this._driver.animate(element, this._normalizeKeyframes(instruction.keyframes), instruction.duration, instruction.delay, instruction.easing, previousPlayers);
    };
    /**
     * @param {?} keyframes
     * @return {?}
     */
    DomAnimationEngine.prototype._normalizeKeyframes = function (keyframes) {
        var _this = this;
        var /** @type {?} */ errors = [];
        var /** @type {?} */ normalizedKeyframes = [];
        keyframes.forEach(function (kf) {
            var /** @type {?} */ normalizedKeyframe = {};
            Object.keys(kf).forEach(function (prop) {
                var /** @type {?} */ normalizedProp = prop;
                var /** @type {?} */ normalizedValue = kf[prop];
                if (prop != 'offset') {
                    normalizedProp = _this._normalizer.normalizePropertyName(prop, errors);
                    normalizedValue =
                        _this._normalizer.normalizeStyleValue(prop, normalizedProp, kf[prop], errors);
                }
                normalizedKeyframe[normalizedProp] = normalizedValue;
            });
            normalizedKeyframes.push(normalizedKeyframe);
        });
        if (errors.length) {
            var /** @type {?} */ LINE_START = '\n - ';
            throw new Error("Unable to animate due to the following errors:" + LINE_START + errors.join(LINE_START));
        }
        return normalizedKeyframes;
    };
    /**
     * @param {?} element
     * @param {?} player
     * @return {?}
     */
    DomAnimationEngine.prototype._markPlayerAsActive = function (element, player) {
        var /** @type {?} */ elementAnimations = getOrSetAsInMap(this._activeElementAnimations, element, []);
        elementAnimations.push(player);
    };
    /**
     * @param {?} element
     * @param {?} triggerName
     * @param {?} player
     * @param {?} event
     * @return {?}
     */
    DomAnimationEngine.prototype._queuePlayer = function (element, triggerName, player, event) {
        var /** @type {?} */ tuple = ({ element: element, player: player, triggerName: triggerName, event: event });
        this._queuedTransitionAnimations.push(tuple);
        player.init();
        element.classList.add(MARKED_FOR_ANIMATION_CLASSNAME);
        player.onDone(function () { element.classList.remove(MARKED_FOR_ANIMATION_CLASSNAME); });
    };
    /**
     * @return {?}
     */
    DomAnimationEngine.prototype._flushQueuedAnimations = function () {
        var _loop_2 = function () {
            var _a = this_2._queuedTransitionAnimations.shift(), player = _a.player, element = _a.element, triggerName = _a.triggerName, event = _a.event;
            var /** @type {?} */ parent = element;
            while (parent = parent.parentNode) {
                // this means that a parent element will or will not
                // have its own animation operation which in this case
                // there's no point in even trying to do an animation
                if (parent[MARKED_FOR_REMOVAL])
                    return "continue-parentLoop";
            }
            var /** @type {?} */ listeners = this_2._triggerListeners.get(element);
            if (listeners) {
                listeners.forEach(function (tuple) {
                    if (tuple.triggerName == triggerName) {
                        listenOnPlayer(player, tuple.phase, event, tuple.callback);
                    }
                });
            }
            // if a removal exists for the given element then we need cancel
            // all the queued players so that a proper removal animation can go
            if (this_2._queuedRemovals.has(element)) {
                player.destroy();
                return "continue";
            }
            this_2._markPlayerAsActive(element, player);
            // in the event that an animation throws an error then we do
            // not want to re-run animations on any previous animations
            // if they have already been kicked off beforehand
            player.init();
            if (!player.hasStarted()) {
                player.play();
            }
        };
        var this_2 = this;
        parentLoop: while (this._queuedTransitionAnimations.length) {
            var state_1 = _loop_2();
            switch (state_1) {
                case "continue-parentLoop": continue parentLoop;
            }
        }
    };
    /**
     * @return {?}
     */
    DomAnimationEngine.prototype.flush = function () {
        var _this = this;
        var /** @type {?} */ leaveListeners = new Map();
        this._queuedRemovals.forEach(function (callback, element) {
            var /** @type {?} */ tuple = _this._pendingListenerRemovals.get(element);
            if (tuple) {
                leaveListeners.set(element, tuple);
                _this._pendingListenerRemovals.delete(element);
            }
        });
        this._clearPendingListenerRemovals();
        this._pendingListenerRemovals = leaveListeners;
        this._flushQueuedAnimations();
        var /** @type {?} */ flushAgain = false;
        this._queuedRemovals.forEach(function (callback, element) {
            // an item that was inserted/removed in the same flush means
            // that an animation should not happen anyway
            if (_this._flaggedInserts.has(element))
                return;
            var /** @type {?} */ parent = element;
            var /** @type {?} */ players = [];
            while (parent = parent.parentNode) {
                // there is no reason to even try to
                if (parent[MARKED_FOR_REMOVAL]) {
                    callback();
                    return;
                }
                var /** @type {?} */ match = _this._activeElementAnimations.get(parent);
                if (match) {
                    players.push.apply(players, match);
                    break;
                }
            }
            // the loop was unable to find an parent that is animating even
            // though this element has set to be removed, so the algorithm
            // should check to see if there are any triggers on the element
            // that are present to handle a leave animation and then setup
            // those players to facilitate the callback after done
            if (players.length == 0) {
                // this means that the element has valid state triggers
                var /** @type {?} */ stateDetails_1 = _this._elementTriggerStates.get(element);
                if (stateDetails_1) {
                    Object.keys(stateDetails_1).forEach(function (triggerName) {
                        flushAgain = true;
                        var /** @type {?} */ oldValue = stateDetails_1[triggerName];
                        var /** @type {?} */ instruction = _this._triggers[triggerName].matchTransition(oldValue, VOID_STATE);
                        if (instruction) {
                            players.push(_this.animateTransition(element, instruction));
                        }
                        else {
                            var /** @type {?} */ event = makeAnimationEvent(element, triggerName, oldValue, VOID_STATE, '', 0);
                            var /** @type {?} */ player = new __WEBPACK_IMPORTED_MODULE_0__angular_animations__["NoopAnimationPlayer"]();
                            _this._queuePlayer(element, triggerName, player, event);
                        }
                    });
                }
            }
            if (players.length) {
                optimizeGroupPlayer(players).onDone(callback);
            }
            else {
                callback();
            }
        });
        this._queuedRemovals.clear();
        this._flaggedInserts.clear();
        // this means that one or more leave animations were detected
        if (flushAgain) {
            this._flushQueuedAnimations();
            this._clearPendingListenerRemovals();
        }
    };
    return DomAnimationEngine;
}());
/**
 * @param {?} map
 * @param {?} key
 * @param {?} defaultValue
 * @return {?}
 */
function getOrSetAsInMap(map, key, defaultValue) {
    var /** @type {?} */ value = map.get(key);
    if (!value) {
        map.set(key, value = defaultValue);
    }
    return value;
}
/**
 * @param {?} map
 * @param {?} key
 * @param {?} value
 * @return {?}
 */
function deleteFromArrayMap(map, key, value) {
    var /** @type {?} */ arr = map.get(key);
    if (arr) {
        var /** @type {?} */ index = arr.indexOf(value);
        if (index >= 0) {
            arr.splice(index, 1);
            if (arr.length == 0) {
                map.delete(key);
            }
        }
    }
}
/**
 * @param {?} players
 * @return {?}
 */
function optimizeGroupPlayer(players) {
    switch (players.length) {
        case 0:
            return new __WEBPACK_IMPORTED_MODULE_0__angular_animations__["NoopAnimationPlayer"]();
        case 1:
            return players[0];
        default:
            return new __WEBPACK_IMPORTED_MODULE_0__angular_animations__["ɵAnimationGroupPlayer"](players);
    }
}
/**
 * @param {?} source
 * @return {?}
 */
function copyArray(source) {
    return source ? source.splice(0) : [];
}
/**
 * @param {?} triggerName
 * @param {?} eventName
 * @return {?}
 */
function validatePlayerEvent(triggerName, eventName) {
    switch (eventName) {
        case 'start':
        case 'done':
            return;
        default:
            throw new Error("The provided animation trigger event \"" + eventName + "\" for the animation trigger \"" + triggerName + "\" is not supported!");
    }
}
/**
 * @param {?} player
 * @param {?} eventName
 * @param {?} baseEvent
 * @param {?} callback
 * @return {?}
 */
function listenOnPlayer(player, eventName, baseEvent, callback) {
    switch (eventName) {
        case 'start':
            player.onStart(function () {
                var /** @type {?} */ event = copyAnimationEvent(baseEvent);
                event.phaseName = 'start';
                callback(event);
            });
            break;
        case 'done':
            player.onDone(function () {
                var /** @type {?} */ event = copyAnimationEvent(baseEvent);
                event.phaseName = 'done';
                callback(event);
            });
            break;
    }
}
/**
 * @param {?} e
 * @return {?}
 */
function copyAnimationEvent(e) {
    return makeAnimationEvent(e.element, e.triggerName, e.fromState, e.toState, e.phaseName, e.totalTime);
}
/**
 * @param {?} element
 * @param {?} triggerName
 * @param {?} fromState
 * @param {?} toState
 * @param {?} phaseName
 * @param {?} totalTime
 * @return {?}
 */
function makeAnimationEvent(element, triggerName, fromState, toState, phaseName, totalTime) {
    return ({ element: element, triggerName: triggerName, fromState: fromState, toState: toState, phaseName: phaseName, totalTime: totalTime });
}
/**
 * @param {?} value
 * @return {?}
 */
function normalizeTriggerValue(value) {
    switch (typeof value) {
        case 'boolean':
            return value ? '1' : '0';
        default:
            return value ? value.toString() : null;
    }
}
/**
 * \@experimental Animation support is experimental.
 * @abstract
 */
var AnimationStyleNormalizer = (function () {
    function AnimationStyleNormalizer() {
    }
    /**
     * @abstract
     * @param {?} propertyName
     * @param {?} errors
     * @return {?}
     */
    AnimationStyleNormalizer.prototype.normalizePropertyName = function (propertyName, errors) { };
    /**
     * @abstract
     * @param {?} userProvidedProperty
     * @param {?} normalizedProperty
     * @param {?} value
     * @param {?} errors
     * @return {?}
     */
    AnimationStyleNormalizer.prototype.normalizeStyleValue = function (userProvidedProperty, normalizedProperty, value, errors) { };
    return AnimationStyleNormalizer;
}());
/**
 * \@experimental Animation support is experimental.
 */
var NoopAnimationStyleNormalizer = (function () {
    function NoopAnimationStyleNormalizer() {
    }
    /**
     * @param {?} propertyName
     * @param {?} errors
     * @return {?}
     */
    NoopAnimationStyleNormalizer.prototype.normalizePropertyName = function (propertyName, errors) { return propertyName; };
    /**
     * @param {?} userProvidedProperty
     * @param {?} normalizedProperty
     * @param {?} value
     * @param {?} errors
     * @return {?}
     */
    NoopAnimationStyleNormalizer.prototype.normalizeStyleValue = function (userProvidedProperty, normalizedProperty, value, errors) {
        return (value);
    };
    return NoopAnimationStyleNormalizer;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Animation = (function () {
    /**
     * @param {?} input
     */
    function Animation(input) {
        var ast = Array.isArray(input) ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_animations__["sequence"])(input) : input;
        var errors = validateAnimationSequence(ast);
        if (errors.length) {
            var errorMessage = "animation validation failed:\n" + errors.join("\n");
            throw new Error(errorMessage);
        }
        this._animationAst = ast;
    }
    /**
     * @param {?} startingStyles
     * @param {?} destinationStyles
     * @return {?}
     */
    Animation.prototype.buildTimelines = function (startingStyles, destinationStyles) {
        var /** @type {?} */ start = Array.isArray(startingStyles) ? normalizeStyles(startingStyles) : (startingStyles);
        var /** @type {?} */ dest = Array.isArray(destinationStyles) ? normalizeStyles(destinationStyles) : (destinationStyles);
        return buildAnimationKeyframes(this._animationAst, start, dest);
    };
    /**
     * @param {?} injector
     * @param {?} element
     * @param {?=} startingStyles
     * @param {?=} destinationStyles
     * @return {?}
     */
    Animation.prototype.create = function (injector, element, startingStyles, destinationStyles) {
        if (startingStyles === void 0) { startingStyles = {}; }
        if (destinationStyles === void 0) { destinationStyles = {}; }
        var /** @type {?} */ instructions = this.buildTimelines(startingStyles, destinationStyles);
        // note the code below is only here to make the tests happy (once the new renderer is
        // within core then the code below will interact with Renderer.transition(...))
        var /** @type {?} */ driver = injector.get(AnimationDriver);
        var /** @type {?} */ normalizer = injector.get(AnimationStyleNormalizer);
        var /** @type {?} */ engine = new DomAnimationEngine(driver, normalizer);
        return engine.animateTimeline(element, instructions);
    };
    return Animation;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var WebAnimationsStyleNormalizer = (function (_super) {
    __extends(WebAnimationsStyleNormalizer, _super);
    function WebAnimationsStyleNormalizer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} propertyName
     * @param {?} errors
     * @return {?}
     */
    WebAnimationsStyleNormalizer.prototype.normalizePropertyName = function (propertyName, errors) {
        return dashCaseToCamelCase(propertyName);
    };
    /**
     * @param {?} userProvidedProperty
     * @param {?} normalizedProperty
     * @param {?} value
     * @param {?} errors
     * @return {?}
     */
    WebAnimationsStyleNormalizer.prototype.normalizeStyleValue = function (userProvidedProperty, normalizedProperty, value, errors) {
        var /** @type {?} */ unit = '';
        var /** @type {?} */ strVal = value.toString().trim();
        if (DIMENSIONAL_PROP_MAP[normalizedProperty] && value !== 0 && value !== '0') {
            if (typeof value === 'number') {
                unit = 'px';
            }
            else {
                var /** @type {?} */ valAndSuffixMatch = value.match(/^[+-]?[\d\.]+([a-z]*)$/);
                if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {
                    errors.push("Please provide a CSS unit value for " + userProvidedProperty + ":" + value);
                }
            }
        }
        return strVal + unit;
    };
    return WebAnimationsStyleNormalizer;
}(AnimationStyleNormalizer));
var DIMENSIONAL_PROP_MAP = makeBooleanMap('width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent'
    .split(','));
/**
 * @param {?} keys
 * @return {?}
 */
function makeBooleanMap(keys) {
    var /** @type {?} */ map = {};
    keys.forEach(function (key) { return map[key] = true; });
    return map;
}
var DASH_CASE_REGEXP = /-+([a-z0-9])/g;
/**
 * @param {?} input
 * @return {?}
 */
function dashCaseToCamelCase(input) {
    return input.replace(DASH_CASE_REGEXP, function () {
        var m = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            m[_i] = arguments[_i];
        }
        return m[1].toUpperCase();
    });
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var DEFAULT_STATE_VALUE = 'void';
var DEFAULT_STATE_STYLES = '*';
var NoopAnimationEngine = (function (_super) {
    __extends(NoopAnimationEngine, _super);
    function NoopAnimationEngine() {
        var _this = _super.apply(this, arguments) || this;
        _this._listeners = new Map();
        _this._changes = [];
        _this._flaggedRemovals = new Set();
        _this._onDoneFns = [];
        _this._triggerStyles = Object.create(null);
        return _this;
    }
    /**
     * @param {?} trigger
     * @param {?=} name
     * @return {?}
     */
    NoopAnimationEngine.prototype.registerTrigger = function (trigger, name) {
        if (name === void 0) { name = null; }
        name = name || trigger.name;
        if (this._triggerStyles[name]) {
            return;
        }
        var /** @type {?} */ stateMap = {};
        trigger.definitions.forEach(function (def) {
            if (def.type === 0 /* State */) {
                var /** @type {?} */ stateDef = (def);
                stateMap[stateDef.name] = normalizeStyles(stateDef.styles.styles);
            }
        });
        this._triggerStyles[name] = stateMap;
    };
    /**
     * @param {?} element
     * @param {?} domFn
     * @return {?}
     */
    NoopAnimationEngine.prototype.onInsert = function (element, domFn) { domFn(); };
    /**
     * @param {?} element
     * @param {?} domFn
     * @return {?}
     */
    NoopAnimationEngine.prototype.onRemove = function (element, domFn) {
        domFn();
        if (element['nodeType'] == 1) {
            this._flaggedRemovals.add(element);
        }
    };
    /**
     * @param {?} element
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    NoopAnimationEngine.prototype.setProperty = function (element, property, value) {
        var /** @type {?} */ storageProp = makeStorageProp(property);
        var /** @type {?} */ oldValue = element[storageProp] || DEFAULT_STATE_VALUE;
        this._changes.push(/** @type {?} */ ({ element: element, oldValue: oldValue, newValue: value, triggerName: property }));
        var /** @type {?} */ triggerStateStyles = this._triggerStyles[property] || {};
        var /** @type {?} */ fromStateStyles = triggerStateStyles[oldValue] || triggerStateStyles[DEFAULT_STATE_STYLES];
        if (fromStateStyles) {
            eraseStyles(element, fromStateStyles);
        }
        element[storageProp] = value;
        this._onDoneFns.push(function () {
            var /** @type {?} */ toStateStyles = triggerStateStyles[value] || triggerStateStyles[DEFAULT_STATE_STYLES];
            if (toStateStyles) {
                setStyles(element, toStateStyles);
            }
        });
    };
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} eventPhase
     * @param {?} callback
     * @return {?}
     */
    NoopAnimationEngine.prototype.listen = function (element, eventName, eventPhase, callback) {
        var /** @type {?} */ listeners = this._listeners.get(element);
        if (!listeners) {
            this._listeners.set(element, listeners = []);
        }
        var /** @type {?} */ tuple = ({ triggerName: eventName, eventPhase: eventPhase, callback: callback });
        listeners.push(tuple);
        return function () { return tuple.doRemove = true; };
    };
    /**
     * @return {?}
     */
    NoopAnimationEngine.prototype.flush = function () {
        var _this = this;
        var /** @type {?} */ onStartCallbacks = [];
        var /** @type {?} */ onDoneCallbacks = [];
        /**
         * @param {?} listener
         * @param {?} data
         * @return {?}
         */
        function handleListener(listener, data) {
            var /** @type {?} */ phase = listener.eventPhase;
            var /** @type {?} */ event = makeAnimationEvent$1(data.element, data.triggerName, data.oldValue, data.newValue, phase, 0);
            if (phase == 'start') {
                onStartCallbacks.push(function () { return listener.callback(event); });
            }
            else if (phase == 'done') {
                onDoneCallbacks.push(function () { return listener.callback(event); });
            }
        }
        this._changes.forEach(function (change) {
            var /** @type {?} */ element = change.element;
            var /** @type {?} */ listeners = _this._listeners.get(element);
            if (listeners) {
                listeners.forEach(function (listener) {
                    if (listener.triggerName == change.triggerName) {
                        handleListener(listener, change);
                    }
                });
            }
        });
        // upon removal ALL the animation triggers need to get fired
        this._flaggedRemovals.forEach(function (element) {
            var /** @type {?} */ listeners = _this._listeners.get(element);
            if (listeners) {
                listeners.forEach(function (listener) {
                    var /** @type {?} */ triggerName = listener.triggerName;
                    var /** @type {?} */ storageProp = makeStorageProp(triggerName);
                    handleListener(listener, /** @type {?} */ ({
                        element: element,
                        triggerName: triggerName,
                        oldValue: element[storageProp] || DEFAULT_STATE_VALUE,
                        newValue: DEFAULT_STATE_VALUE
                    }));
                });
            }
        });
        // remove all the listeners after everything is complete
        Array.from(this._listeners.keys()).forEach(function (element) {
            var /** @type {?} */ listenersToKeep = _this._listeners.get(element).filter(function (l) { return !l.doRemove; });
            if (listenersToKeep.length) {
                _this._listeners.set(element, listenersToKeep);
            }
            else {
                _this._listeners.delete(element);
            }
        });
        onStartCallbacks.forEach(function (fn) { return fn(); });
        onDoneCallbacks.forEach(function (fn) { return fn(); });
        this._flaggedRemovals.clear();
        this._changes = [];
        this._onDoneFns.forEach(function (doneFn) { return doneFn(); });
        this._onDoneFns = [];
    };
    Object.defineProperty(NoopAnimationEngine.prototype, "activePlayers", {
        /**
         * @return {?}
         */
        get: function () { return []; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NoopAnimationEngine.prototype, "queuedPlayers", {
        /**
         * @return {?}
         */
        get: function () { return []; },
        enumerable: true,
        configurable: true
    });
    return NoopAnimationEngine;
}(AnimationEngine));
/**
 * @param {?} element
 * @param {?} triggerName
 * @param {?} fromState
 * @param {?} toState
 * @param {?} phaseName
 * @param {?} totalTime
 * @return {?}
 */
function makeAnimationEvent$1(element, triggerName, fromState, toState, phaseName, totalTime) {
    return ({ element: element, triggerName: triggerName, fromState: fromState, toState: toState, phaseName: phaseName, totalTime: totalTime });
}
/**
 * @param {?} property
 * @return {?}
 */
function makeStorageProp(property) {
    return '_@_' + property;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var WebAnimationsPlayer = (function () {
    /**
     * @param {?} element
     * @param {?} keyframes
     * @param {?} options
     * @param {?=} previousPlayers
     */
    function WebAnimationsPlayer(element, keyframes, options, previousPlayers) {
        if (previousPlayers === void 0) { previousPlayers = []; }
        var _this = this;
        this.element = element;
        this.keyframes = keyframes;
        this.options = options;
        this._onDoneFns = [];
        this._onStartFns = [];
        this._onDestroyFns = [];
        this._initialized = false;
        this._finished = false;
        this._started = false;
        this._destroyed = false;
        this.time = 0;
        this.parentPlayer = null;
        this._duration = options['duration'];
        this._delay = options['delay'] || 0;
        this.time = this._duration + this._delay;
        this.previousStyles = {};
        previousPlayers.forEach(function (player) {
            var styles = player._captureStyles();
            Object.keys(styles).forEach(function (prop) { return _this.previousStyles[prop] = styles[prop]; });
        });
    }
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype._onFinish = function () {
        if (!this._finished) {
            this._finished = true;
            this._onDoneFns.forEach(function (fn) { return fn(); });
            this._onDoneFns = [];
        }
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.init = function () {
        var _this = this;
        if (this._initialized)
            return;
        this._initialized = true;
        var /** @type {?} */ keyframes = this.keyframes.map(function (styles) {
            var /** @type {?} */ formattedKeyframe = {};
            Object.keys(styles).forEach(function (prop, index) {
                var /** @type {?} */ value = styles[prop];
                if (value == __WEBPACK_IMPORTED_MODULE_0__angular_animations__["AUTO_STYLE"]) {
                    value = _computeStyle(_this.element, prop);
                }
                if (value != undefined) {
                    formattedKeyframe[prop] = value;
                }
            });
            return formattedKeyframe;
        });
        var /** @type {?} */ previousStyleProps = Object.keys(this.previousStyles);
        if (previousStyleProps.length) {
            var /** @type {?} */ startingKeyframe_1 = keyframes[0];
            var /** @type {?} */ missingStyleProps_1 = [];
            previousStyleProps.forEach(function (prop) {
                if (!startingKeyframe_1.hasOwnProperty(prop)) {
                    missingStyleProps_1.push(prop);
                }
                startingKeyframe_1[prop] = _this.previousStyles[prop];
            });
            if (missingStyleProps_1.length) {
                var /** @type {?} */ self_1 = this;
                var _loop_3 = function () {
                    var /** @type {?} */ kf = keyframes[i];
                    missingStyleProps_1.forEach(function (prop) {
                        kf[prop] = _computeStyle(self_1.element, prop);
                    });
                };
                // tslint:disable-next-line
                for (var /** @type {?} */ i = 1; i < keyframes.length; i++) {
                    _loop_3();
                }
            }
        }
        this._player = this._triggerWebAnimation(this.element, keyframes, this.options);
        this._finalKeyframe =
            keyframes.length ? _copyKeyframeStyles(keyframes[keyframes.length - 1]) : {};
        // this is required so that the player doesn't start to animate right away
        this._resetDomPlayerState();
        this._player.addEventListener('finish', function () { return _this._onFinish(); });
    };
    /**
     * \@internal
     * @param {?} element
     * @param {?} keyframes
     * @param {?} options
     * @return {?}
     */
    WebAnimationsPlayer.prototype._triggerWebAnimation = function (element, keyframes, options) {
        // jscompiler doesn't seem to know animate is a native property because it's not fully
        // supported yet across common browsers (we polyfill it for Edge/Safari) [CL #143630929]
        return (element['animate'](keyframes, options));
    };
    Object.defineProperty(WebAnimationsPlayer.prototype, "domPlayer", {
        /**
         * @return {?}
         */
        get: function () { return this._player; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} fn
     * @return {?}
     */
    WebAnimationsPlayer.prototype.onStart = function (fn) { this._onStartFns.push(fn); };
    /**
     * @param {?} fn
     * @return {?}
     */
    WebAnimationsPlayer.prototype.onDone = function (fn) { this._onDoneFns.push(fn); };
    /**
     * @param {?} fn
     * @return {?}
     */
    WebAnimationsPlayer.prototype.onDestroy = function (fn) { this._onDestroyFns.push(fn); };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.play = function () {
        this.init();
        if (!this.hasStarted()) {
            this._onStartFns.forEach(function (fn) { return fn(); });
            this._onStartFns = [];
            this._started = true;
        }
        this._player.play();
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.pause = function () {
        this.init();
        this._player.pause();
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.finish = function () {
        this.init();
        this._onFinish();
        this._player.finish();
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.reset = function () {
        this._resetDomPlayerState();
        this._destroyed = false;
        this._finished = false;
        this._started = false;
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype._resetDomPlayerState = function () {
        if (this._player) {
            this._player.cancel();
        }
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.restart = function () {
        this.reset();
        this.play();
    };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.hasStarted = function () { return this._started; };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.destroy = function () {
        if (!this._destroyed) {
            this._resetDomPlayerState();
            this._onFinish();
            this._destroyed = true;
            this._onDestroyFns.forEach(function (fn) { return fn(); });
            this._onDestroyFns = [];
        }
    };
    /**
     * @param {?} p
     * @return {?}
     */
    WebAnimationsPlayer.prototype.setPosition = function (p) { this._player.currentTime = p * this.time; };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype.getPosition = function () { return this._player.currentTime / this.time; };
    /**
     * @return {?}
     */
    WebAnimationsPlayer.prototype._captureStyles = function () {
        var _this = this;
        var /** @type {?} */ styles = {};
        if (this.hasStarted()) {
            Object.keys(this._finalKeyframe).forEach(function (prop) {
                if (prop != 'offset') {
                    styles[prop] =
                        _this._finished ? _this._finalKeyframe[prop] : _computeStyle(_this.element, prop);
                }
            });
        }
        return styles;
    };
    return WebAnimationsPlayer;
}());
/**
 * @param {?} element
 * @param {?} prop
 * @return {?}
 */
function _computeStyle(element, prop) {
    return ((window.getComputedStyle(element)))[prop];
}
/**
 * @param {?} styles
 * @return {?}
 */
function _copyKeyframeStyles(styles) {
    var /** @type {?} */ newStyles = {};
    Object.keys(styles).forEach(function (prop) {
        if (prop != 'offset') {
            newStyles[prop] = styles[prop];
        }
    });
    return newStyles;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var WebAnimationsDriver = (function () {
    function WebAnimationsDriver() {
    }
    /**
     * @param {?} element
     * @param {?} keyframes
     * @param {?} duration
     * @param {?} delay
     * @param {?} easing
     * @param {?=} previousPlayers
     * @return {?}
     */
    WebAnimationsDriver.prototype.animate = function (element, keyframes, duration, delay, easing, previousPlayers) {
        if (previousPlayers === void 0) { previousPlayers = []; }
        var /** @type {?} */ playerOptions = { 'duration': duration, 'delay': delay, 'fill': 'forwards' };
        // we check for this to avoid having a null|undefined value be present
        // for the easing (which results in an error for certain browsers #9752)
        if (easing) {
            playerOptions['easing'] = easing;
        }
        var /** @type {?} */ previousWebAnimationPlayers = (previousPlayers.filter(function (player) { return player instanceof WebAnimationsPlayer; }));
        return new WebAnimationsPlayer(element, keyframes, playerOptions, previousWebAnimationPlayers);
    };
    return WebAnimationsDriver;
}());
/**
 * @return {?}
 */
function supportsWebAnimations() {
    return typeof Element !== 'undefined' && typeof ((Element)).prototype['animate'] === 'function';
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all animation APIs of the animation browser package.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the animation package.
 */
/**
 * Generated bundle index. Do not edit.
 */

//# sourceMappingURL=browser.es5.js.map


/***/ },

/***/ 420:
/***/ function(module, exports, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__ = __webpack_require__(418);
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵb", function() { return instantiateSupportedAnimationDriver; });
/* harmony export (binding) */ __webpack_require__.d(exports, "BrowserAnimationsModule", function() { return BrowserAnimationsModule; });
/* harmony export (binding) */ __webpack_require__.d(exports, "NoopAnimationsModule", function() { return NoopAnimationsModule; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵAnimationRenderer", function() { return AnimationRenderer; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵAnimationRendererFactory", function() { return AnimationRendererFactory; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵe", function() { return BROWSER_ANIMATIONS_PROVIDERS; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵf", function() { return BROWSER_NOOP_ANIMATIONS_PROVIDERS; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵa", function() { return InjectableAnimationEngine; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵc", function() { return instantiateDefaultStyleNormalizer; });
/* harmony export (binding) */ __webpack_require__.d(exports, "ɵd", function() { return instantiateRendererFactory; });
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/**
 * @license Angular v4.0.2
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */



/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var AnimationRendererFactory = (function () {
    /**
     * @param {?} delegate
     * @param {?} _engine
     * @param {?} _zone
     */
    function AnimationRendererFactory(delegate, _engine, _zone) {
        this.delegate = delegate;
        this._engine = _engine;
        this._zone = _zone;
    }
    /**
     * @param {?} hostElement
     * @param {?} type
     * @return {?}
     */
    AnimationRendererFactory.prototype.createRenderer = function (hostElement, type) {
        var _this = this;
        var /** @type {?} */ delegate = this.delegate.createRenderer(hostElement, type);
        if (!hostElement || !type || !type.data || !type.data['animation'])
            return delegate;
        var /** @type {?} */ namespaceId = type.id;
        var /** @type {?} */ animationTriggers = (type.data['animation']);
        animationTriggers.forEach(function (trigger) { return _this._engine.registerTrigger(trigger, namespaceify(namespaceId, trigger.name)); });
        return new AnimationRenderer(delegate, this._engine, this._zone, namespaceId);
    };
    return AnimationRendererFactory;
}());
AnimationRendererFactory.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"] },
];
/**
 * @nocollapse
 */
AnimationRendererFactory.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["RendererFactory2"], },
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["a" /* ɵAnimationEngine */], },
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["NgZone"], },
]; };
var AnimationRenderer = (function () {
    /**
     * @param {?} delegate
     * @param {?} _engine
     * @param {?} _zone
     * @param {?} _namespaceId
     */
    function AnimationRenderer(delegate, _engine, _zone, _namespaceId) {
        this.delegate = delegate;
        this._engine = _engine;
        this._zone = _zone;
        this._namespaceId = _namespaceId;
        this.destroyNode = null;
        this._flushPromise = null;
        this.destroyNode = this.delegate.destroyNode ? function (n) { return delegate.destroyNode(n); } : null;
    }
    Object.defineProperty(AnimationRenderer.prototype, "data", {
        /**
         * @return {?}
         */
        get: function () { return this.delegate.data; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AnimationRenderer.prototype.destroy = function () { this.delegate.destroy(); };
    /**
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    AnimationRenderer.prototype.createElement = function (name, namespace) {
        return this.delegate.createElement(name, namespace);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    AnimationRenderer.prototype.createComment = function (value) { return this.delegate.createComment(value); };
    /**
     * @param {?} value
     * @return {?}
     */
    AnimationRenderer.prototype.createText = function (value) { return this.delegate.createText(value); };
    /**
     * @param {?} selectorOrNode
     * @return {?}
     */
    AnimationRenderer.prototype.selectRootElement = function (selectorOrNode) {
        return this.delegate.selectRootElement(selectorOrNode);
    };
    /**
     * @param {?} node
     * @return {?}
     */
    AnimationRenderer.prototype.parentNode = function (node) { return this.delegate.parentNode(node); };
    /**
     * @param {?} node
     * @return {?}
     */
    AnimationRenderer.prototype.nextSibling = function (node) { return this.delegate.nextSibling(node); };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @param {?=} namespace
     * @return {?}
     */
    AnimationRenderer.prototype.setAttribute = function (el, name, value, namespace) {
        this.delegate.setAttribute(el, name, value, namespace);
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    AnimationRenderer.prototype.removeAttribute = function (el, name, namespace) {
        this.delegate.removeAttribute(el, name, namespace);
    };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    AnimationRenderer.prototype.addClass = function (el, name) { this.delegate.addClass(el, name); };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    AnimationRenderer.prototype.removeClass = function (el, name) { this.delegate.removeClass(el, name); };
    /**
     * @param {?} el
     * @param {?} style
     * @param {?} value
     * @param {?} flags
     * @return {?}
     */
    AnimationRenderer.prototype.setStyle = function (el, style, value, flags) {
        this.delegate.setStyle(el, style, value, flags);
    };
    /**
     * @param {?} el
     * @param {?} style
     * @param {?} flags
     * @return {?}
     */
    AnimationRenderer.prototype.removeStyle = function (el, style, flags) {
        this.delegate.removeStyle(el, style, flags);
    };
    /**
     * @param {?} node
     * @param {?} value
     * @return {?}
     */
    AnimationRenderer.prototype.setValue = function (node, value) { this.delegate.setValue(node, value); };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @return {?}
     */
    AnimationRenderer.prototype.appendChild = function (parent, newChild) {
        var _this = this;
        this._engine.onInsert(newChild, function () { return _this.delegate.appendChild(parent, newChild); });
        this._queueFlush();
    };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @param {?} refChild
     * @return {?}
     */
    AnimationRenderer.prototype.insertBefore = function (parent, newChild, refChild) {
        var _this = this;
        this._engine.onInsert(newChild, function () { return _this.delegate.insertBefore(parent, newChild, refChild); });
        this._queueFlush();
    };
    /**
     * @param {?} parent
     * @param {?} oldChild
     * @return {?}
     */
    AnimationRenderer.prototype.removeChild = function (parent, oldChild) {
        var _this = this;
        this._engine.onRemove(oldChild, function () {
            // Note: if an component element has a leave animation, and the component
            // a host leave animation, the view engine will call `removeChild` for the parent
            // component renderer as well as for the child component renderer.
            // Therefore, we need to check if we already removed the element.
            if (_this.delegate.parentNode(oldChild)) {
                _this.delegate.removeChild(parent, oldChild);
            }
        });
        this._queueFlush();
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    AnimationRenderer.prototype.setProperty = function (el, name, value) {
        if (name.charAt(0) == '@') {
            this._engine.setProperty(el, namespaceify(this._namespaceId, name.substr(1)), value);
            this._queueFlush();
        }
        else {
            this.delegate.setProperty(el, name, value);
        }
    };
    /**
     * @param {?} target
     * @param {?} eventName
     * @param {?} callback
     * @return {?}
     */
    AnimationRenderer.prototype.listen = function (target, eventName, callback) {
        var _this = this;
        if (eventName.charAt(0) == '@') {
            var /** @type {?} */ element = resolveElementFromTarget(target);
            var _a = parseTriggerCallbackName(eventName.substr(1)), name = _a[0], phase = _a[1];
            return this._engine.listen(element, namespaceify(this._namespaceId, name), phase, function (event) {
                var /** @type {?} */ e = (event);
                if (e.triggerName) {
                    e.triggerName = deNamespaceify(_this._namespaceId, e.triggerName);
                }
                _this._zone.run(function () { return callback(event); });
            });
        }
        return this.delegate.listen(target, eventName, callback);
    };
    /**
     * @return {?}
     */
    AnimationRenderer.prototype._queueFlush = function () {
        var _this = this;
        if (!this._flushPromise) {
            this._zone.runOutsideAngular(function () {
                _this._flushPromise = Promise.resolve(null).then(function () {
                    _this._flushPromise = null;
                    _this._engine.flush();
                });
            });
        }
    };
    return AnimationRenderer;
}());
/**
 * @param {?} target
 * @return {?}
 */
function resolveElementFromTarget(target) {
    switch (target) {
        case 'body':
            return document.body;
        case 'document':
            return document;
        case 'window':
            return window;
        default:
            return target;
    }
}
/**
 * @param {?} triggerName
 * @return {?}
 */
function parseTriggerCallbackName(triggerName) {
    var /** @type {?} */ dotIndex = triggerName.indexOf('.');
    var /** @type {?} */ trigger = triggerName.substring(0, dotIndex);
    var /** @type {?} */ phase = triggerName.substr(dotIndex + 1);
    return [trigger, phase];
}
/**
 * @param {?} namespaceId
 * @param {?} value
 * @return {?}
 */
function namespaceify(namespaceId, value) {
    return namespaceId + "#" + value;
}
/**
 * @param {?} namespaceId
 * @param {?} value
 * @return {?}
 */
function deNamespaceify(namespaceId, value) {
    return value.replace(namespaceId + '#', '');
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var InjectableAnimationEngine = (function (_super) {
    __extends(InjectableAnimationEngine, _super);
    /**
     * @param {?} driver
     * @param {?} normalizer
     */
    function InjectableAnimationEngine(driver, normalizer) {
        return _super.call(this, driver, normalizer) || this;
    }
    return InjectableAnimationEngine;
}(__WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["b" /* ɵDomAnimationEngine */]));
InjectableAnimationEngine.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"] },
];
/**
 * @nocollapse
 */
InjectableAnimationEngine.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["c" /* AnimationDriver */], },
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["d" /* ɵAnimationStyleNormalizer */], },
]; };
/**
 * @return {?}
 */
function instantiateSupportedAnimationDriver() {
    if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["e" /* ɵsupportsWebAnimations */])()) {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["f" /* ɵWebAnimationsDriver */]();
    }
    return new __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["g" /* ɵNoopAnimationDriver */]();
}
/**
 * @return {?}
 */
function instantiateDefaultStyleNormalizer() {
    return new __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["h" /* ɵWebAnimationsStyleNormalizer */]();
}
/**
 * @param {?} renderer
 * @param {?} engine
 * @param {?} zone
 * @return {?}
 */
function instantiateRendererFactory(renderer, engine, zone) {
    return new AnimationRendererFactory(renderer, engine, zone);
}
/**
 * Separate providers from the actual module so that we can do a local modification in Google3 to
 * include them in the BrowserModule.
 */
var BROWSER_ANIMATIONS_PROVIDERS = [
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["c" /* AnimationDriver */], useFactory: instantiateSupportedAnimationDriver },
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["d" /* ɵAnimationStyleNormalizer */], useFactory: instantiateDefaultStyleNormalizer },
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["a" /* ɵAnimationEngine */], useClass: InjectableAnimationEngine }, {
        provide: __WEBPACK_IMPORTED_MODULE_0__angular_core__["RendererFactory2"],
        useFactory: instantiateRendererFactory,
        deps: [__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["ɵDomRendererFactory2"], __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["a" /* ɵAnimationEngine */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["NgZone"]]
    }
];
/**
 * Separate providers from the actual module so that we can do a local modification in Google3 to
 * include them in the BrowserTestingModule.
 */
var BROWSER_NOOP_ANIMATIONS_PROVIDERS = [
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["a" /* ɵAnimationEngine */], useClass: __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["i" /* ɵNoopAnimationEngine */] }, {
        provide: __WEBPACK_IMPORTED_MODULE_0__angular_core__["RendererFactory2"],
        useFactory: instantiateRendererFactory,
        deps: [__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["ɵDomRendererFactory2"], __WEBPACK_IMPORTED_MODULE_2__angular_animations_browser__["a" /* ɵAnimationEngine */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["NgZone"]]
    }
];
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@experimental Animation support is experimental.
 */
var BrowserAnimationsModule = (function () {
    function BrowserAnimationsModule() {
    }
    return BrowserAnimationsModule;
}());
BrowserAnimationsModule.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"], args: [{
                imports: [__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["BrowserModule"]],
                providers: BROWSER_ANIMATIONS_PROVIDERS,
            },] },
];
/**
 * @nocollapse
 */
BrowserAnimationsModule.ctorParameters = function () { return []; };
/**
 * \@experimental Animation support is experimental.
 */
var NoopAnimationsModule = (function () {
    function NoopAnimationsModule() {
    }
    return NoopAnimationsModule;
}());
NoopAnimationsModule.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"], args: [{
                imports: [__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["BrowserModule"]],
                providers: BROWSER_NOOP_ANIMATIONS_PROVIDERS,
            },] },
];
/**
 * @nocollapse
 */
NoopAnimationsModule.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all animation APIs of the animation browser package.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the animation package.
 */
/**
 * Generated bundle index. Do not edit.
 */

//# sourceMappingURL=animations.es5.js.map


/***/ },

/***/ 421:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var router_1 = __webpack_require__(7);
var auth_service_1 = __webpack_require__(102);
var auth_guard_1 = __webpack_require__(292);
var ie_utils_1 = __webpack_require__(426);
var logger_1 = __webpack_require__(16);
var layout_1 = __webpack_require__(103);
var storage_1 = __webpack_require__(133);
var startViewKey = 'returnUrl';
var AppComponent = (function () {
    function AppComponent(authGuard, authService, logger, route, router, storage) {
        var _this = this;
        this.authGuard = authGuard;
        this.authService = authService;
        this.logger = logger;
        this.route = route;
        this.router = router;
        this.storage = storage;
        this.msgs = [];
        this.layout = layout_1.Layout.None;
        this.Layout = layout_1.Layout;
        this.bitTest = function (layout) { return _this.layout & layout; };
        this.router
            .events
            .filter(function (e) { return e instanceof router_1.RoutesRecognized; })
            .subscribe(function (e) {
            if (!_this.authGuard.canActivate(_this.route.snapshot, e.state))
                return;
        });
        this.router
            .events
            .filter(function (e) { return e instanceof router_1.NavigationEnd; })
            .map(function (e) {
            // store referrer
            storage.previousRoute = e.url;
            return _this.route;
        })
            .map(function (r) {
            // find the last activated route
            while (r.firstChild)
                r = r.firstChild;
            return r;
        })
            .mergeMap(function (r) { return r.data; })
            .subscribe(function (data) {
            _this.layout = (data.layout !== undefined) ? data.layout : layout_1.Layout.ShowHeader | layout_1.Layout.ShowLeftSide | layout_1.Layout.ShowRightSide;
            _this.cls = "ui-xl-12";
            if (_this.bitTest(layout_1.Layout.ShowLeftSide | layout_1.Layout.ShowRightSide))
                _this.cls = "ui-xl-10";
            else if (_this.bitTest(layout_1.Layout.ShowLeftSide) || _this.bitTest(layout_1.Layout.ShowRightSide))
                _this.cls = "ui-xl-11";
            setTimeout(function () {
                var e;
                if (!ie_utils_1.isIe)
                    e = new Event("resize");
                else {
                    e = document.createEvent("UIEvents");
                    e.initUIEvent("resize", true, false, window, 0);
                }
                window.dispatchEvent(e);
            }, 0);
        });
        this.startView = new http_1.URLSearchParams(window.location.search.slice(1)).get(startViewKey);
    }
    AppComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    AppComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.logger.msgReсeived.subscribe(function (msgs) { return _this.msgs = msgs; });
        // start page --> navigate
        if (this.startView != undefined)
            this.router.navigateByUrl(this.startView);
    };
    AppComponent.prototype.logout = function () {
        this.authService.logout();
        this.router.navigate(["/login"]);
    };
    AppComponent.prototype.onResize = function () {
        var h = window.innerHeight;
        this.bottomBarEl && (h -= this.bottomBarEl.nativeElement.offsetHeight);
        this.topBarEl && (h -= this.topBarEl.nativeElement.offsetHeight);
        this.contentEl.nativeElement.style.height = h + "px";
    };
    __decorate([
        core_1.ViewChild("bottombar"),
        __metadata("design:type", core_1.ElementRef)
    ], AppComponent.prototype, "bottomBarEl", void 0);
    __decorate([
        core_1.ViewChild("topbar"),
        __metadata("design:type", core_1.ElementRef)
    ], AppComponent.prototype, "topBarEl", void 0);
    __decorate([
        core_1.ViewChild("content"),
        __metadata("design:type", core_1.ElementRef)
    ], AppComponent.prototype, "contentEl", void 0);
    AppComponent = __decorate([
        core_1.Component({
            host: { '(window:resize)': 'onResize($event)' },
            selector: 'conferenceHall-app',
            styles: [__webpack_require__(1018)],
            template: __webpack_require__(662)
        }),
        __metadata("design:paramtypes", [auth_guard_1.AuthGuard,
            auth_service_1.AuthService,
            logger_1.Logger,
            router_1.ActivatedRoute,
            router_1.Router,
            storage_1.Storage])
    ], AppComponent);
    return AppComponent;
}());
exports.AppComponent = AppComponent;


/***/ },

/***/ 422:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(423));
__export(__webpack_require__(424));


/***/ },

/***/ 423:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var animations_1 = __webpack_require__(36);
exports.slideInAnimation = animations_1.trigger('slideInAnimation', [
    animations_1.state('in', animations_1.style({ transform: 'translateX(0%)' })),
    animations_1.state('out', animations_1.style({ transform: 'translateX(-100%)' })),
    animations_1.transition('in => out', animations_1.animate('1000ms ease-in')),
    animations_1.transition('out => in', animations_1.animate('1000ms ease-out'))
]);


/***/ },

/***/ 424:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var animations_1 = __webpack_require__(36);
exports.slideOutAnimation = animations_1.trigger('slideOutAnimation', [
    animations_1.state('in', animations_1.style({ transform: 'translateX(0%)' })),
    animations_1.state('out', animations_1.style({ transform: 'translateX(100%)' })),
    animations_1.transition('in => out', animations_1.animate('1000ms ease-out')),
    animations_1.transition('out => in', animations_1.animate('1000ms ease-in'))
]);


/***/ },

/***/ 425:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var http_1 = __webpack_require__(24);
var primeng_1 = __webpack_require__(20);
var angular2_jwt_1 = __webpack_require__(130);
var auth_guard_1 = __webpack_require__(292);
var auth_service_1 = __webpack_require__(102);
var login_component_1 = __webpack_require__(293);
var authHttpServiceFactory = function (authService, http, options) {
    return new angular2_jwt_1.AuthHttp(new angular2_jwt_1.AuthConfig({
        tokenName: auth_service_1.TokenKey,
        tokenGetter: (function () { return authService.isAuthenticated ? auth_service_1.Storage.getItem(auth_service_1.TokenKey) : authService.login().toPromise(); })
    }), http, options);
};
var AuthModule = (function () {
    var AuthModule = AuthModule_1 = function AuthModule() {
    };
    AuthModule.forRoot = function () {
        return {
            ngModule: AuthModule_1,
            providers: [
                auth_guard_1.AuthGuard,
                {
                    provide: angular2_jwt_1.AuthHttp,
                    useFactory: authHttpServiceFactory,
                    deps: [auth_service_1.AuthService, http_1.Http, http_1.RequestOptions]
                },
                auth_service_1.AuthService
            ]
        };
    };
    AuthModule = AuthModule_1 = __decorate([
        core_1.NgModule({
            declarations: [login_component_1.LoginComponent],
            exports: [login_component_1.LoginComponent],
            imports: [primeng_1.BlockUIModule, primeng_1.ButtonModule, common_1.CommonModule, forms_1.FormsModule, http_1.HttpModule, primeng_1.InputTextModule, primeng_1.MessagesModule, primeng_1.PanelModule, primeng_1.PasswordModule, forms_1.ReactiveFormsModule]
        })
    ], AuthModule);
    return AuthModule;
    var AuthModule_1;
}());
exports.AuthModule = AuthModule;


/***/ },

/***/ 426:
/***/ function(module, exports) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isIe = detectIe();
/**
 * detect IE
 * returns version of IE or false, if browser is not Internet Explorer
 */
function detectIe() {
    var ua = window.navigator.userAgent;
    // Test values; Uncomment to check result …
    // IE 10
    // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';
    // IE 11
    // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';
    // Edge 12 (Spartan)
    // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';
    // Edge 13
    // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';
    var msie = ua.indexOf("MSIE ");
    if (msie > 0) {
        // IE 10 or older => return version number
        return parseInt(ua.substring(msie + 5, ua.indexOf(".", msie)), 10);
    }
    var trident = ua.indexOf("Trident/");
    if (trident > 0) {
        // IE 11 => return version number
        var rv = ua.indexOf("rv:");
        return parseInt(ua.substring(rv + 3, ua.indexOf(".", rv)), 10);
    }
    var edge = ua.indexOf("Edge/");
    if (edge > 0) {
        // Edge (IE 12+) => return version number
        return parseInt(ua.substring(edge + 5, ua.indexOf(".", edge)), 10);
    }
    // other browser
    return false;
}
exports.detectIe = detectIe;


/***/ },

/***/ 427:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var layout_1 = __webpack_require__(103);
var selective_preloading_strategy_1 = __webpack_require__(428);
var login_component_1 = __webpack_require__(293);
var views_module_1 = __webpack_require__(461);
var routes = [
    { path: '', redirectTo: '/screens', pathMatch: 'full' },
    { path: 'login', component: login_component_1.LoginComponent, data: { layout: layout_1.Layout.ShowHeader | layout_1.Layout.ShowFooter | layout_1.Layout.ShowLeftSide | layout_1.Layout.ShowRightSide } }
];
var NavigationModule = (function () {
    function NavigationModule() {
    }
    NavigationModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forRoot(routes, { preloadingStrategy: selective_preloading_strategy_1.SelectivePreloadingStrategy }), views_module_1.ViewsModule],
            exports: [router_1.RouterModule, views_module_1.ViewsModule],
            providers: [selective_preloading_strategy_1.SelectivePreloadingStrategy]
        })
    ], NavigationModule);
    return NavigationModule;
}());
exports.NavigationModule = NavigationModule;


/***/ },

/***/ 428:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var Observable_1 = __webpack_require__(0);
var SelectivePreloadingStrategy = (function () {
    function SelectivePreloadingStrategy() {
        this.preloadedModules = [];
    }
    SelectivePreloadingStrategy.prototype.preload = function (route, load) {
        if (route.data && route.data['preload']) {
            // add the route path to the preloaded module array
            this.preloadedModules.push(route.path);
            // log the route path to the console
            console.log('Preloaded: ' + route.path);
            return load();
        }
        else
            return Observable_1.Observable.of(null);
    };
    SelectivePreloadingStrategy = __decorate([
        core_1.Injectable()
    ], SelectivePreloadingStrategy);
    return SelectivePreloadingStrategy;
}());
exports.SelectivePreloadingStrategy = SelectivePreloadingStrategy;


/***/ },

/***/ 429:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var DetailComponent = (function () {
    function DetailComponent() {
    }
    DetailComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    DetailComponent.prototype.onResize = function () {
        var mainEl = this.mainElRef.nativeElement;
        mainEl.style.height = mainEl.parentElement.offsetHeight - this.navElRef.nativeElement.offsetHeight + "px";
    };
    __decorate([
        core_1.ViewChild('main'),
        __metadata("design:type", core_1.ElementRef)
    ], DetailComponent.prototype, "mainElRef", void 0);
    __decorate([
        core_1.ViewChild('nav'),
        __metadata("design:type", core_1.ElementRef)
    ], DetailComponent.prototype, "navElRef", void 0);
    DetailComponent = __decorate([
        core_1.Component({
            host: { '(window:resize)': "onResize($event)" },
            selector: "detail",
            template: " <div class=\"h100p\">\n                    <div #nav class=\"ui-widget-header\" style=\"height: 37px; padding: .5em .75em\">\n                        <ng-content select=\"nav\"></ng-content>\n                    </div>\n                    <div #main style=\"overflow:auto\">\n                        <ng-content select=\"main\"></ng-content>\n                    </div>\n                </div>"
        })
    ], DetailComponent);
    return DetailComponent;
}());
exports.DetailComponent = DetailComponent;


/***/ },

/***/ 430:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
/**
 * Выставляет высоту .ui-(data|tree)table-tablewrapper в 100% высоты от контейнера
 * Исключает header/footer
 */
var MatchTableDirective = (function () {
    function MatchTableDirective(el) {
        this.el = el;
        // table class name to match height (.ui-datatable | .ui-treetable)
        this.matchTable = "";
        this.overflow = "auto";
    }
    MatchTableDirective.prototype.ngAfterViewChecked = function () {
        var cls = "ui-widget-content";
        this.table = this.el.nativeElement.querySelector("div." + this.matchTable);
        if (this.table) {
            this.wrapper = this.table.querySelector("div." + this.matchTable + "-tablewrapper");
            this.wrapper.classList.add(cls);
            this.wrapper.style.overflow = this.overflow;
            this.wrapper.querySelector("table").classList.remove(cls);
            // call our matchHeight function here later
            this.onResize();
        }
    };
    MatchTableDirective.prototype.onResize = function () {
        if (!this.table)
            return;
        // call our applyHeight function here later
        var header = this.table.querySelector("div." + this.matchTable + "-header"), footer = this.table.querySelector("div." + this.matchTable + "-footer"), paginator = this.table.querySelector("div.ui-paginator");
        var h = this.table.offsetHeight;
        header && (h -= header.offsetHeight);
        footer && (h -= footer.offsetHeight);
        paginator && (h -= paginator.offsetHeight);
        this.wrapper.style.height = h + "px";
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], MatchTableDirective.prototype, "matchTable", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], MatchTableDirective.prototype, "overflow", void 0);
    __decorate([
        core_1.HostListener('window:resize'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], MatchTableDirective.prototype, "onResize", null);
    MatchTableDirective = __decorate([
        core_1.Directive({
            selector: '[matchTable]'
        }),
        __metadata("design:paramtypes", [core_1.ElementRef])
    ], MatchTableDirective);
    return MatchTableDirective;
}());
exports.MatchTableDirective = MatchTableDirective;


/***/ },

/***/ 431:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Состояние конференции
 */
var ConfState;
(function (ConfState) {
    ConfState[ConfState["Planned"] = 0] = "Planned";
    ConfState[ConfState["Preparing"] = 1] = "Preparing";
    ConfState[ConfState["Active"] = 2] = "Active";
    ConfState[ConfState["Closed"] = 3] = "Closed";
})(ConfState = exports.ConfState || (exports.ConfState = {}));
(function (ConfState) {
    function toName(state) {
        var name = "";
        switch (state) {
            case ConfState.Planned:
                name = "Планируемые";
                break;
            case ConfState.Preparing:
                name = "На подготовке";
                break;
            case ConfState.Active:
                name = "Активные";
                break;
            case ConfState.Closed:
                name = "Завершенные";
                break;
        }
        return name;
    }
    ConfState.toName = toName;
})(ConfState = exports.ConfState || (exports.ConfState = {}));
/**
 * Запрос поиска конференций
 */
var FindConferencesQuery = (function () {
    function FindConferencesQuery() {
    }
    return FindConferencesQuery;
}());
exports.FindConferencesQuery = FindConferencesQuery;
/**
 * Модель. Конференция
 */
var ConferenceModel = (function (_super) {
    __extends(ConferenceModel, _super);
    function ConferenceModel() {
        var _this = _super.call(this) || this;
        _this.description = null;
        _this.hallId = null;
        _this.startDate = null;
        _this.endDate = null;
        _this.state = ConfState.Planned;
        _this.subject = null;
        _this.schemeId = null;
        return _this;
    }
    return ConferenceModel;
}(index_1.KeyModel));
exports.ConferenceModel = ConferenceModel;
/**
 * Модель. Назначение конференции
 */
var AppointmentModel = (function () {
    function AppointmentModel() {
    }
    return AppointmentModel;
}());
exports.AppointmentModel = AppointmentModel;


/***/ },

/***/ 432:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Команда мульти-обработки элементов
 */
var ElementGroupCommand = (function (_super) {
    __extends(ElementGroupCommand, _super);
    function ElementGroupCommand() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return ElementGroupCommand;
}(index_1.GroupCommand));
exports.ElementGroupCommand = ElementGroupCommand;
/**
 * Модель. Элемент схемы
 */
var ElementModel = (function (_super) {
    __extends(ElementModel, _super);
    function ElementModel() {
        var _this = _super.call(this) || this;
        _this.selected = false;
        _this.name = undefined;
        _this.height = 1;
        _this.width = 1;
        return _this;
    }
    return ElementModel;
}(index_1.KeyModel));
exports.ElementModel = ElementModel;


/***/ },

/***/ 433:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
// для JsonProperty необходимо объявить через require()
var sysuser = __webpack_require__(296);
var SysUserModel = sysuser.SysUserModel;
/**
 * Модель. Контакт
 */
var ContactModel = (function (_super) {
    __extends(ContactModel, _super);
    function ContactModel() {
        var _this = _super.call(this) || this;
        _this.active = false;
        _this.address = undefined;
        _this.kind = undefined;
        _this.name = undefined;
        return _this;
    }
    return ContactModel;
}(index_1.KeyModel));
exports.ContactModel = ContactModel;
/**
 * Модель. Сотрудник
 */
var EmployeeModel = (function (_super) {
    __extends(EmployeeModel, _super);
    function EmployeeModel() {
        var _this = _super.call(this) || this;
        _this.id = undefined;
        _this.name = undefined;
        _this.orgId = undefined;
        _this.position = undefined;
        _this.user = undefined;
        _this.contacts = undefined;
        return _this;
    }
    __decorate([
        map_utils_1.JsonProperty({ clazz: SysUserModel }),
        __metadata("design:type", SysUserModel)
    ], EmployeeModel.prototype, "user", void 0);
    __decorate([
        map_utils_1.JsonProperty({ clazz: ContactModel }),
        __metadata("design:type", Array)
    ], EmployeeModel.prototype, "contacts", void 0);
    return EmployeeModel;
}(index_1.KeyModel));
exports.EmployeeModel = EmployeeModel;


/***/ },

/***/ 434:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
var GroupType;
(function (GroupType) {
    GroupType[GroupType["User"] = 0] = "User";
    GroupType[GroupType["Favorites"] = 1] = "Favorites";
    GroupType[GroupType["Global"] = 2] = "Global";
})(GroupType = exports.GroupType || (exports.GroupType = {}));
;
/**
 * Модель. Группа элементов
 */
var GroupModel = (function (_super) {
    __extends(GroupModel, _super);
    function GroupModel() {
        var _this = _super.call(this) || this;
        _this.icon = undefined;
        _this.name = undefined;
        _this.type = GroupType.Global;
        return _this;
    }
    return GroupModel;
}(index_1.KeyModel));
exports.GroupModel = GroupModel;


/***/ },

/***/ 435:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
/**
 * Модель. Конференц-холл
 */
var HallModel = (function (_super) {
    __extends(HallModel, _super);
    function HallModel() {
        var _this = _super.call(this) || this;
        _this.name = undefined;
        _this.description = undefined;
        _this.selected = false;
        _this.height = 2;
        _this.width = 2;
        _this.schemes = undefined;
        return _this;
    }
    __decorate([
        map_utils_1.JsonProperty({ clazz: index_1.SchemeModel }),
        __metadata("design:type", Array)
    ], HallModel.prototype, "schemes", void 0);
    return HallModel;
}(index_1.KeyModel));
exports.HallModel = HallModel;


/***/ },

/***/ 436:
/***/ function(module, exports) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Интервал
 */
var Range = (function () {
    function Range() {
    }
    return Range;
}());
exports.Range = Range;
/**
 * Базовая модель объекта
 */
var KeyModel = (function () {
    function KeyModel() {
        this.id = undefined;
    }
    return KeyModel;
}());
exports.KeyModel = KeyModel;
var GroupCommand = (function () {
    function GroupCommand() {
    }
    return GroupCommand;
}());
exports.GroupCommand = GroupCommand;


/***/ },

/***/ 437:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Состояние участника
 */
var MemberState;
(function (MemberState) {
    MemberState[MemberState["Invited"] = 0] = "Invited";
    MemberState[MemberState["Registered"] = 1] = "Registered";
    MemberState[MemberState["Confirmed"] = 2] = "Confirmed";
})(MemberState = exports.MemberState || (exports.MemberState = {}));
;
/**
 * Запрос. Поиск учстников
 */
var FindMembersQuery = (function () {
    function FindMembersQuery() {
    }
    return FindMembersQuery;
}());
exports.FindMembersQuery = FindMembersQuery;
/**
 * Модель. Участник
 */
var MemberModel = (function (_super) {
    __extends(MemberModel, _super);
    function MemberModel() {
        var _this = _super.call(this) || this;
        _this.id = undefined;
        _this.employeeId = undefined;
        _this.name = undefined;
        _this.job = undefined;
        _this.oldSeat = undefined;
        _this.position = undefined;
        _this.seat = undefined;
        _this.state = MemberState.Invited;
        return _this;
    }
    return MemberModel;
}(index_1.KeyModel));
exports.MemberModel = MemberModel;


/***/ },

/***/ 438:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Команда мульти-обработки узлов
 */
var NodeGroupCommand = (function () {
    function NodeGroupCommand() {
    }
    return NodeGroupCommand;
}());
exports.NodeGroupCommand = NodeGroupCommand;
/**
 * Элемент дерева OrganizationsTree
 */
var OrganizationNode = (function (_super) {
    __extends(OrganizationNode, _super);
    function OrganizationNode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return OrganizationNode;
}(index_1.KeyModel));
exports.OrganizationNode = OrganizationNode;
/**
 * Модель. Организация
 */
var OrganizationModel = (function (_super) {
    __extends(OrganizationModel, _super);
    function OrganizationModel() {
        var _this = _super.call(this) || this;
        _this.address = undefined;
        _this.code = undefined;
        _this.description = undefined;
        _this.name = undefined;
        return _this;
    }
    return OrganizationModel;
}(index_1.KeyModel));
exports.OrganizationModel = OrganizationModel;


/***/ },

/***/ 439:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Команда копирования схемы
 */
var CopyCommand = (function (_super) {
    __extends(CopyCommand, _super);
    function CopyCommand() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return CopyCommand;
}(index_1.KeyModel));
exports.CopyCommand = CopyCommand;
/**
 * Модель. Схема холла
 */
var SchemeModel = (function (_super) {
    __extends(SchemeModel, _super);
    function SchemeModel() {
        var _this = _super.call(this) || this;
        _this.name = undefined;
        return _this;
    }
    return SchemeModel;
}(index_1.KeyModel));
exports.SchemeModel = SchemeModel;


/***/ },

/***/ 440:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Модель. Активная конференция (на отдельном экране)
 */
var ScreenModel = (function (_super) {
    __extends(ScreenModel, _super);
    function ScreenModel() {
        var _this = _super.call(this) || this;
        _this.schemeId = null;
        _this.startDate = null;
        _this.endDate = null;
        _this.state = index_1.ConfState.Planned;
        _this.subject = null;
        _this.tickers = null;
        return _this;
    }
    return ScreenModel;
}(index_1.KeyModel));
exports.ScreenModel = ScreenModel;
/**
 * Оратор
 */
var SpeakerModel = (function () {
    function SpeakerModel() {
    }
    return SpeakerModel;
}());
exports.SpeakerModel = SpeakerModel;


/***/ },

/***/ 441:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = __webpack_require__(13);
/**
 * Модель. Сообщения конференции
 */
var TickerModel = (function (_super) {
    __extends(TickerModel, _super);
    function TickerModel() {
        var _this = _super.call(this) || this;
        _this.active = false;
        _this.content = undefined;
        return _this;
    }
    return TickerModel;
}(index_1.KeyModel));
exports.TickerModel = TickerModel;


/***/ },

/***/ 442:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var conference_main_component_1 = __webpack_require__(298);
var conference_schedule_component_1 = __webpack_require__(299);
var conferenceRoutes = [
    { path: 'schedule', component: conference_schedule_component_1.ConferenceScheduleComponent },
    { path: 'conferences/new', component: conference_main_component_1.ConferenceMainComponent },
    { path: 'conferences/:id', component: conference_main_component_1.ConferenceMainComponent }
];
var ConferenceRoutingModule = (function () {
    function ConferenceRoutingModule() {
    }
    ConferenceRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(conferenceRoutes)],
            exports: [router_1.RouterModule]
        })
    ], ConferenceRoutingModule);
    return ConferenceRoutingModule;
}());
exports.ConferenceRoutingModule = ConferenceRoutingModule;


/***/ },

/***/ 443:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var forms_1 = __webpack_require__(6);
var core_1 = __webpack_require__(1);
var primeng_1 = __webpack_require__(20);
var pipes_1 = __webpack_require__(86);
var hub_service_1 = __webpack_require__(132);
var appointment_dialog_component_1 = __webpack_require__(297);
var conference_main_component_1 = __webpack_require__(298);
var conference_table_component_1 = __webpack_require__(300);
var conference_schedule_component_1 = __webpack_require__(299);
var conferences_routing_module_1 = __webpack_require__(442);
var conference_service_1 = __webpack_require__(104);
var ui_module_1 = __webpack_require__(49);
var halls_module_1 = __webpack_require__(311);
var members_module_1 = __webpack_require__(312);
var organizations_module_1 = __webpack_require__(315);
var schemes_module_1 = __webpack_require__(108);
var tickers_module_1 = __webpack_require__(460);
var ConferencesModule = (function () {
    function ConferencesModule() {
    }
    ConferencesModule = __decorate([
        core_1.NgModule({
            declarations: [appointment_dialog_component_1.AppointmentDialogComponent, conference_main_component_1.ConferenceMainComponent, conference_table_component_1.ConferenceTableComponent, conference_schedule_component_1.ConferenceScheduleComponent],
            imports: [
                schemes_module_1.SchemesModule,
                primeng_1.AccordionModule,
                primeng_1.ButtonModule,
                primeng_1.CalendarModule,
                common_1.CommonModule,
                conferences_routing_module_1.ConferenceRoutingModule,
                primeng_1.DataListModule,
                primeng_1.DataTableModule,
                primeng_1.DialogModule,
                primeng_1.DragDropModule,
                primeng_1.DropdownModule,
                forms_1.FormsModule,
                halls_module_1.HallsModule,
                primeng_1.InputSwitchModule,
                members_module_1.MembersModule,
                primeng_1.MenuModule,
                organizations_module_1.OrganizationsModule,
                forms_1.ReactiveFormsModule,
                primeng_1.ScheduleModule,
                primeng_1.SplitButtonModule,
                primeng_1.TabViewModule,
                tickers_module_1.TickersModule,
                primeng_1.ToggleButtonModule,
                primeng_1.ToolbarModule,
                ui_module_1.UiModule
            ],
            providers: [conference_service_1.ConferenceService, common_1.DatePipe, pipes_1.DateToUtcPipe, hub_service_1.HubService]
        })
    ], ConferencesModule);
    return ConferencesModule;
}());
exports.ConferencesModule = ConferencesModule;


/***/ },

/***/ 444:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var primeng_1 = __webpack_require__(20);
var logger_1 = __webpack_require__(16);
var contact_service_1 = __webpack_require__(301);
var defaultKind = 'email';
var ContactTableComponent = (function () {
    function ContactTableComponent(confirmationService, contactService, fb, logger) {
        this.confirmationService = confirmationService;
        this.contactService = contactService;
        this.fb = fb;
        this.logger = logger;
        this.selectedContacts = [];
    }
    ContactTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.contactForm = this.fb.group({
            address: [null, forms_1.Validators.required],
            kind: [defaultKind, forms_1.Validators.required]
        });
        this.contactService
            .getSenders()
            .subscribe(function (senders) {
            var keys = Object.keys(senders);
            _this.senders = new Array(keys.length);
            for (var ix = 0; ix < keys.length; ix++) {
                var k = keys[ix];
                _this.senders[ix] = { label: senders[k] || k, value: k };
            }
            _this.contacts.forEach(function (c) { return c.name = senders[c.kind] || c.kind; });
        });
    };
    ContactTableComponent.prototype.addContact = function (contact) {
        var _this = this;
        contact.active = true;
        contact.employeeId = this.employeeId;
        this.contactService
            .add(contact)
            .subscribe(function (key) {
            contact.id = key;
            var sender = _this.senders.find(function (s) { return s.value === contact.kind; });
            sender && (contact.name = sender.label);
            _this.contacts.push(contact);
            _this.contactForm.reset({ kind: defaultKind });
        }, function (error) { return _this.logger.error2(error); });
    };
    ContactTableComponent.prototype.changeActive = function (e, contact) {
        var _this = this;
        e.originalEvent.stopPropagation();
        this.contactService
            .changeActive(contact.id, e.checked)
            .subscribe(function (_) { return contact.active = e.checked; }, function (error) { return _this.logger.error2(error); });
    };
    ContactTableComponent.prototype.changeAddress = function (e, contact) {
        var _this = this;
        var address = e.currentTarget.value;
        if (address !== contact.address) {
            this.contactService
                .changeAddress(contact.id, address)
                .subscribe(function (_) { return contact.address = address; }, function (error) { return _this.logger.error2(error); });
        }
    };
    ContactTableComponent.prototype.changeKind = function (e, contact) {
        var _this = this;
        this.contactService
            .changeKind(contact.id, e.value)
            .subscribe(function (_) {
            contact.kind = e.value;
            var sender = _this.senders.find(function (s) { return s.value === contact.kind; });
            sender && (contact.name = sender.label);
        }, function (error) { return _this.logger.error2(error); });
    };
    ContactTableComponent.prototype.changeEditMode = function () {
        this.editMode = !this.editMode;
        this.selectedContacts.length = 0;
    };
    ContactTableComponent.prototype.removeRows = function () {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u0438\u0441\u0438?",
            accept: function (_) {
                _this.contactService
                    .delete(_this.selectedContacts.map(function (s) { return s.id; }))
                    .subscribe(function (_) {
                    _this.selectedContacts.forEach(function (h) {
                        var ix = _this.contacts.findIndex(function (n) { return n.id === h.id; });
                        (ix !== -1) && _this.contacts.splice(ix, 1);
                    });
                    _this.selectedContacts.length = 0;
                }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number)
    ], ContactTableComponent.prototype, "employeeId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], ContactTableComponent.prototype, "contacts", void 0);
    ContactTableComponent = __decorate([
        core_1.Component({
            selector: "contact-table",
            template: __webpack_require__(668)
        }),
        __metadata("design:paramtypes", [primeng_1.ConfirmationService,
            contact_service_1.ContactService,
            forms_1.FormBuilder,
            logger_1.Logger])
    ], ContactTableComponent);
    return ContactTableComponent;
}());
exports.ContactTableComponent = ContactTableComponent;


/***/ },

/***/ 445:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var primeng_1 = __webpack_require__(20);
var contact_table_component_1 = __webpack_require__(444);
var contact_service_1 = __webpack_require__(301);
var ContactsModule = (function () {
    function ContactsModule() {
    }
    ContactsModule = __decorate([
        core_1.NgModule({
            declarations: [contact_table_component_1.ContactTableComponent],
            exports: [contact_table_component_1.ContactTableComponent],
            imports: [common_1.CommonModule, primeng_1.ButtonModule, primeng_1.DataTableModule, primeng_1.DropdownModule, forms_1.FormsModule, primeng_1.InputSwitchModule, primeng_1.InputTextModule, forms_1.ReactiveFormsModule, primeng_1.ToggleButtonModule],
            providers: [contact_service_1.ContactService]
        })
    ], ContactsModule);
    return ContactsModule;
}());
exports.ContactsModule = ContactsModule;


/***/ },

/***/ 446:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var employee_detail_component_1 = __webpack_require__(305);
var employeeRoutes = [
    { path: 'employees/:id', component: employee_detail_component_1.EmployeeDetailComponent },
    { path: 'employees/new/:orgid', component: employee_detail_component_1.EmployeeDetailComponent }
];
var EmployeeRoutingModule = (function () {
    function EmployeeRoutingModule() {
    }
    EmployeeRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(employeeRoutes)],
            exports: [router_1.RouterModule]
        })
    ], EmployeeRoutingModule);
    return EmployeeRoutingModule;
}());
exports.EmployeeRoutingModule = EmployeeRoutingModule;


/***/ },

/***/ 447:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var models_1 = __webpack_require__(13);
var SysUserDetailComponent = (function () {
    function SysUserDetailComponent(fb) {
        this.fb = fb;
        this.bindLabel = "Привязать";
        var roleKeys = Object
            .keys(models_1.UserRole)
            .filter(function (k) { return typeof models_1.UserRole[k] !== "function"; });
        this.roles = roleKeys
            .slice(roleKeys.length / 2)
            .map(function (k) {
            var role = models_1.UserRole[k];
            return {
                label: models_1.UserRole.toName(role),
                value: role
            };
        });
    }
    SysUserDetailComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.sysUserForm.get("id")
            .valueChanges
            .subscribe(function (value) {
            _this.id = value;
            _this.bindLabel = "Отвязать";
            _this.requireCredentialsValidation = true;
            _this.enableValidation();
        });
        this.sysUserForm.get("bind")
            .valueChanges
            .subscribe(function (value) {
            _this.requireCredentialsValidation = (_this.id !== void 0) || value;
            _this.requirePasswordValidation = (_this.id === void 0) && value;
            _this.enableValidation();
        });
    };
    SysUserDetailComponent.prototype.enableValidation = function () {
        var loginControl = this.sysUserForm.get("login");
        if (loginControl) {
            loginControl.setValidators(this.requireCredentialsValidation ? [forms_1.Validators.required] : null);
            loginControl.updateValueAndValidity(true);
        }
        var passwdControl = this.sysUserForm.get("password");
        if (passwdControl) {
            passwdControl.setValidators(this.requirePasswordValidation ? [forms_1.Validators.required] : null);
            passwdControl.updateValueAndValidity(true);
        }
        var userRoleControl = this.sysUserForm.get("userRole");
        if (userRoleControl) {
            userRoleControl.setValidators(this.requireCredentialsValidation ? [forms_1.Validators.required] : null);
            userRoleControl.updateValueAndValidity(true);
        }
    };
    __decorate([
        core_1.Input("group"),
        __metadata("design:type", forms_1.FormGroup)
    ], SysUserDetailComponent.prototype, "sysUserForm", void 0);
    SysUserDetailComponent = __decorate([
        core_1.Component({
            selector: "sysuser-detail",
            template: __webpack_require__(672)
        }),
        __metadata("design:paramtypes", [forms_1.FormBuilder])
    ], SysUserDetailComponent);
    return SysUserDetailComponent;
}());
exports.SysUserDetailComponent = SysUserDetailComponent;


/***/ },

/***/ 448:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var primeng_1 = __webpack_require__(20);
var ui_module_1 = __webpack_require__(49);
var group_table_component_1 = __webpack_require__(307);
var group_service_1 = __webpack_require__(308);
var GroupsModule = (function () {
    function GroupsModule() {
    }
    GroupsModule = __decorate([
        core_1.NgModule({
            declarations: [group_table_component_1.GroupTableComponent],
            imports: [
                common_1.CommonModule,
                primeng_1.DataTableModule,
                ui_module_1.UiModule
            ],
            providers: [group_service_1.GroupService]
        })
    ], GroupsModule);
    return GroupsModule;
}());
exports.GroupsModule = GroupsModule;


/***/ },

/***/ 449:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var hall_detail_component_1 = __webpack_require__(309);
var hall_table_component_1 = __webpack_require__(310);
var hallRoutes = [
    { path: 'halls', component: hall_table_component_1.HallTableComponent },
    { path: 'halls/new', component: hall_detail_component_1.HallDetailComponent },
    { path: 'halls/:id', component: hall_detail_component_1.HallDetailComponent }
];
var HallRoutingModule = (function () {
    function HallRoutingModule() {
    }
    HallRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(hallRoutes)],
            exports: [router_1.RouterModule]
        })
    ], HallRoutingModule);
    return HallRoutingModule;
}());
exports.HallRoutingModule = HallRoutingModule;


/***/ },

/***/ 45:
/***/ function(module, exports) {

"use strict";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var jsonMetadataKey = "jsonProperty";
// ReSharper disable once InconsistentNaming
function JsonProperty(metadata) {
    // ReSharper disable once TypeGuardDoesntAffectAnything
    if (metadata instanceof String || typeof metadata === "string") {
        return Reflect.metadata(jsonMetadataKey, {
            name: metadata,
            clazz: undefined
        });
    }
    else {
        var metadataObj = metadata;
        return Reflect.metadata(jsonMetadataKey, {
            name: metadataObj ? metadataObj.name : undefined,
            clazz: metadataObj ? metadataObj.clazz : undefined
        });
    }
}
exports.JsonProperty = JsonProperty;
/**
 * JSON to class mapper
 */
var MapUtils = (function () {
    function MapUtils() {
    }
    MapUtils.isArray = function (object) {
        if (object === Array)
            return true;
        else if (typeof Array.isArray === "function")
            return Array.isArray(object);
        else
            return !!(object instanceof Array);
    };
    MapUtils.isPrimitive = function (obj) {
        switch (typeof obj) {
            case "string":
            case "number":
            case "boolean":
                return true;
        }
        return !!(obj instanceof String || obj === String || obj instanceof Number || obj === Number || obj instanceof Boolean || obj === Boolean);
    };
    MapUtils.getClazz = function (target, propertyKey) {
        return Reflect.getMetadata("design:type", target, propertyKey);
    };
    MapUtils.getJsonProperty = function (target, propertyKey) {
        return Reflect.getMetadata(jsonMetadataKey, target, propertyKey);
    };
    /**
     * Json-десерилизатор
     * @param clazz
     * @param jsonObject
     */
    MapUtils.deserialize = function (clazz, jsonObject) {
        var _this = this;
        if ((clazz === undefined) || (jsonObject === undefined))
            return undefined;
        // ReSharper disable once InconsistentNaming
        var obj = new clazz();
        Object.keys(obj).forEach(function (key) {
            // ReSharper disable once InconsistentNaming
            var propertyMetadataFn = function (propertyMetadata) {
                var propertyName = propertyMetadata.name || key;
                var innerJson = jsonObject ? jsonObject[propertyName] : undefined;
                var clazz = _this.getClazz(obj, key);
                if (MapUtils.isArray(clazz)) {
                    var metadata_1 = _this.getJsonProperty(obj, key);
                    if (metadata_1.clazz || MapUtils.isPrimitive(clazz)) {
                        if (innerJson && MapUtils.isArray(innerJson))
                            return innerJson.map(function (item) { return MapUtils.deserialize(metadata_1.clazz, item); });
                        else
                            return undefined;
                    }
                    else
                        return innerJson;
                }
                else if (!MapUtils.isPrimitive(clazz))
                    return MapUtils.deserialize(clazz, innerJson);
                else
                    return jsonObject ? jsonObject[propertyName] : undefined;
            };
            var propertyMetadata = _this.getJsonProperty(obj, key);
            if (propertyMetadata) {
                obj[key] = propertyMetadataFn(propertyMetadata);
            }
            else {
                if (jsonObject && jsonObject[key] !== undefined)
                    obj[key] = jsonObject[key];
            }
        });
        return obj;
    };
    return MapUtils;
}());
exports.default = MapUtils;


/***/ },

/***/ 450:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var models_1 = __webpack_require__(13);
var member_service_1 = __webpack_require__(88);
var logger_1 = __webpack_require__(16);
var MemberTableComponent = (function () {
    function MemberTableComponent(memberService, logger) {
        this.memberService = memberService;
        this.logger = logger;
        // ReSharper disable once InconsistentNaming
        this.MemberState = models_1.MemberState;
        this.selectedMembers = [];
        this.seatChanged = new core_1.EventEmitter();
        this.stateChanged = new core_1.EventEmitter();
        this.membersLoaded = new core_1.EventEmitter();
        this.selectionChanged = new core_1.EventEmitter();
    }
    Object.defineProperty(MemberTableComponent.prototype, "conferenceId", {
        get: function () {
            return this._conferenceId;
        },
        set: function (value) {
            this._conferenceId = value;
            value && this.loadMembers();
        },
        enumerable: true,
        configurable: true
    });
    MemberTableComponent.prototype.changeSeat = function (seat, member) {
        member.seat = seat;
        this.seatChanged.emit(member);
        member.oldSeat = member.seat;
    };
    MemberTableComponent.prototype.changeState = function (checked, member) {
        member.state = checked ? models_1.MemberState.Confirmed : models_1.MemberState.Registered;
        this.stateChanged.emit(member);
    };
    MemberTableComponent.prototype.confirmMember = function (member) {
        var found = false;
        for (var i = 0; i < this.members.length; i++) {
            var m = this.members[i];
            if (m.id === member.id) {
                m.state = member.state;
                m.seat = member.seat;
                found = true;
            }
        }
        !found && this.members.push(member);
    };
    MemberTableComponent.prototype.loadMembers = function () {
        var _this = this;
        this.loading = true;
        this.memberService
            .getAll(this.conferenceId)
            .subscribe(function (members) {
            _this.members = members;
            _this.membersLoaded.emit(members);
            _this.loading = false;
        }, function (error) {
            _this.logger.error2(error);
            _this.loading = false;
        });
    };
    MemberTableComponent.prototype.removeMember = function (id) {
        var ix = this.members.findIndex(function (m) { return m.id === id; });
        (ix !== -1) && this.members.splice(ix, 1);
    };
    MemberTableComponent.prototype.selectRow = function (e) {
        this.selectionChanged.emit(this.selectedMembers);
    };
    MemberTableComponent.prototype.unSelectRow = function (e) {
        this.selectionChanged.emit(this.selectedMembers);
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], MemberTableComponent.prototype, "availableSeats", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], MemberTableComponent.prototype, "members", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], MemberTableComponent.prototype, "conferenceId", null);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], MemberTableComponent.prototype, "editable", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], MemberTableComponent.prototype, "selectionMode", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], MemberTableComponent.prototype, "seatChanged", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], MemberTableComponent.prototype, "stateChanged", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], MemberTableComponent.prototype, "membersLoaded", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], MemberTableComponent.prototype, "selectionChanged", void 0);
    MemberTableComponent = __decorate([
        core_1.Component({
            selector: "member-table",
            styles: [__webpack_require__(1020)],
            template: __webpack_require__(676)
        }),
        __metadata("design:paramtypes", [member_service_1.MemberService,
            logger_1.Logger])
    ], MemberTableComponent);
    return MemberTableComponent;
}());
exports.MemberTableComponent = MemberTableComponent;


/***/ },

/***/ 451:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var office_component_1 = __webpack_require__(313);
var officeRoutes = [
    { path: 'office', component: office_component_1.OfficeComponent }
];
var OfficeRoutingModule = (function () {
    function OfficeRoutingModule() {
    }
    OfficeRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(officeRoutes)],
            exports: [router_1.RouterModule]
        })
    ], OfficeRoutingModule);
    return OfficeRoutingModule;
}());
exports.OfficeRoutingModule = OfficeRoutingModule;


/***/ },

/***/ 452:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var office_routing_module_1 = __webpack_require__(451);
var office_component_1 = __webpack_require__(313);
var OfficeModule = (function () {
    function OfficeModule() {
    }
    OfficeModule = __decorate([
        core_1.NgModule({
            declarations: [office_component_1.OfficeComponent],
            imports: [office_routing_module_1.OfficeRoutingModule]
        })
    ], OfficeModule);
    return OfficeModule;
}());
exports.OfficeModule = OfficeModule;


/***/ },

/***/ 453:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var organization_detail_component_1 = __webpack_require__(314);
var organization_tree_component_1 = __webpack_require__(136);
var orgRoutes = [
    { path: 'orgs', component: organization_tree_component_1.OrganizationTreeComponent },
    { path: 'orgs/new', component: organization_detail_component_1.OrganizationDetailComponent },
    { path: 'orgs/:id', component: organization_detail_component_1.OrganizationDetailComponent }
];
var OrganizationRoutingModule = (function () {
    function OrganizationRoutingModule() {
    }
    OrganizationRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(orgRoutes)],
            exports: [router_1.RouterModule]
        })
    ], OrganizationRoutingModule);
    return OrganizationRoutingModule;
}());
exports.OrganizationRoutingModule = OrganizationRoutingModule;


/***/ },

/***/ 454:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var router_1 = __webpack_require__(7);
var primeng_1 = __webpack_require__(20);
var logger_1 = __webpack_require__(16);
var scheme_service_1 = __webpack_require__(107);
var SchemeTableComponent = (function () {
    function SchemeTableComponent(confirmationService, fb, logger, router, schemeService) {
        this.confirmationService = confirmationService;
        this.fb = fb;
        this.logger = logger;
        this.router = router;
        this.schemeService = schemeService;
        this.selectedSchemes = [];
    }
    SchemeTableComponent.prototype.ngOnInit = function () {
        this.schemeForm = this.fb.group({
            name: [null, forms_1.Validators.required]
        });
    };
    SchemeTableComponent.prototype.addScheme = function (scheme) {
        var _this = this;
        scheme.hallId = this.hallId;
        this.schemeService
            .add(scheme)
            .subscribe(function (key) {
            scheme.id = key;
            _this.schemes.push(scheme);
            _this.schemeForm.reset();
        }, function (error) { return _this.logger.error2(error); });
    };
    SchemeTableComponent.prototype.copyScheme = function (e, id) {
        var _this = this;
        e.stopPropagation();
        this.schemeService
            .copy({ id: id })
            .subscribe(function (scheme) { return _this.schemes.push(scheme); });
    };
    SchemeTableComponent.prototype.changeEditMode = function () {
        this.editMode = !this.editMode;
        this.selectedSchemes.length = 0;
    };
    SchemeTableComponent.prototype.removeRows = function () {
        var _this = this;
        this.confirmationService.confirm({
            header: 'Вопрос',
            icon: 'fa fa-trash',
            message: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u0438\u0441\u0438?",
            accept: function (_) {
                _this.schemeService
                    .delete(_this.selectedSchemes.map(function (s) { return s.id; }))
                    .subscribe(function (_) {
                    _this.selectedSchemes.forEach(function (s) {
                        var ix = _this.schemes.findIndex(function (n) { return n.id === s.id; });
                        (ix !== -1) && _this.schemes.splice(ix, 1);
                    });
                    _this.selectedSchemes.length = 0;
                }, function (error) { return _this.logger.error2(error); });
            }
        });
    };
    SchemeTableComponent.prototype.selectRow = function (e) {
        !this.editMode && this.router.navigate(["/schemes", e.data["id"]]);
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number)
    ], SchemeTableComponent.prototype, "hallId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], SchemeTableComponent.prototype, "schemes", void 0);
    SchemeTableComponent = __decorate([
        core_1.Component({
            selector: 'scheme-table',
            template: __webpack_require__(680)
        }),
        __metadata("design:paramtypes", [primeng_1.ConfirmationService,
            forms_1.FormBuilder,
            logger_1.Logger,
            router_1.Router,
            scheme_service_1.SchemeService])
    ], SchemeTableComponent);
    return SchemeTableComponent;
}());
exports.SchemeTableComponent = SchemeTableComponent;


/***/ },

/***/ 455:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var common_1 = __webpack_require__(3);
var router_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(33);
var logger_1 = __webpack_require__(16);
var mediator_1 = __webpack_require__(68);
var models_1 = __webpack_require__(13);
/**
 * min кол-во символов фильтра
 */
var minChars = 3;
var SchemeToolboxComponent = (function () {
    function SchemeToolboxComponent(location, logger, mediator, route, router) {
        var _this = this;
        this.location = location;
        this.logger = logger;
        this.mediator = mediator;
        this.route = route;
        this.router = router;
        // ReSharper disable once InconsistentNaming
        this.GroupType = models_1.GroupType;
        this.gridButtonsVisible = false;
        this.selectedElementIds = [];
        this.subscription = new rxjs_1.Subscription();
        this.subscription.add(mediator
            .on("groupList_itemClicked")
            .subscribe(function (g) {
            _this.router.navigate(["elements"], { queryParams: { gid: g.id }, relativeTo: _this.route });
            _this.filter = null;
            _this.header = g.name;
            _this.gridButtonsVisible = true;
            _this.groupId = g.id;
            _this.groupType = g.type;
        }));
        this.subscription.add(mediator
            .on("elementDetail_itemSaved")
            .subscribe(function (_) { return _this.homeButtonClick(); }));
        this.subscription.add(mediator
            .on("elementList_selectionChanged")
            .subscribe(function (n) { return _this.selectedElementIds = n; }));
        this.subscription.add(mediator
            .on("schemeMain_shapeSelected")
            .subscribe(function (s) {
            _this.header = s ? s.getAttribute("data-name") : null;
            _this.gridButtonsVisible = false;
        }));
    }
    SchemeToolboxComponent.prototype.ngAfterViewInit = function () {
        this.onResize();
    };
    SchemeToolboxComponent.prototype.ngOnDestroy = function () {
        this.subscription.unsubscribe();
    };
    SchemeToolboxComponent.prototype.homeButtonClick = function () {
        this.router.navigate(["groups"], { relativeTo: this.route });
        this.filter = this.header = null;
        this.gridButtonsVisible = false;
        this.groupType = null;
        this.selectedElementIds = [];
    };
    /**
     * Handle input text value change
     * @param value
     */
    SchemeToolboxComponent.prototype.filterChange = function (value) {
        this.filter = value;
        if (value.length >= minChars) {
            this.router.navigate(["elements"], { queryParams: { f: value }, relativeTo: this.route });
            this.header = value;
            this.gridButtonsVisible = true;
            this.groupId = null;
            this.groupType = null;
        }
    };
    /**
     * Handle enter key press
     */
    SchemeToolboxComponent.prototype.filterKeyPressed = function (event) {
        (event.keyCode === 13) && this.filterChange(event.target.value);
    };
    SchemeToolboxComponent.prototype.toggleGridView = function (smallGrid) {
        this.mediator.broadcast("elementList_viewChanged", smallGrid);
    };
    SchemeToolboxComponent.prototype.toggleMenu = function (e) {
        var _this = this;
        this.menuItems = [];
        switch (this.groupType) {
            // изменения только в пользовательской группе!
            case models_1.GroupType.User:
                this.menuItems.push({
                    label: 'Добавить',
                    icon: 'fa-plus',
                    command: function (event) {
                        _this.header = event.item.label;
                        _this.router.navigate(["elements/new"], { relativeTo: _this.route });
                        _this.groupType = undefined;
                    }
                });
                if (this.selectedElementIds.length > 0) {
                    this.menuItems.push({
                        label: "Изменить",
                        icon: 'fa-pencil-square-o',
                        command: function (e) {
                            _this.header = e.item.label;
                            _this.router.navigate(["elements/" + _this.selectedElementIds[0]], { relativeTo: _this.route });
                            _this.groupType = undefined;
                            _this.selectedElementIds.length = 0;
                        }
                    });
                    this.menuItems.push({
                        label: 'Удалить',
                        icon: 'fa-trash',
                        command: function () {
                            _this.mediator.broadcast("elementList_deleteElements", { ids: _this.selectedElementIds, groupid: _this.groupId });
                            _this.selectedElementIds.length = 0;
                        }
                    });
                    this.menuItems.push({
                        label: 'В избранное',
                        icon: 'fa-star',
                        command: function () { return _this.mediator.broadcast("elementList_addToFavorites", { ids: _this.selectedElementIds, groupid: _this.groupId }); }
                    });
                }
                break;
            case models_1.GroupType.Favorites:
                this.menuItems.push({
                    label: 'Из избранного',
                    icon: 'fa-star',
                    command: function () {
                        _this.mediator.broadcast("elementList_deleteElements", { ids: _this.selectedElementIds, groupid: _this.groupId });
                        _this.selectedElementIds.length = 0;
                    }
                });
                break;
            default:
                this.menuItems.push({
                    label: 'В избранное',
                    icon: 'fa-star',
                    command: function () { return _this.mediator.broadcast("elementList_addToFavorites", { ids: _this.selectedElementIds, groupid: _this.groupId }); }
                });
                break;
        }
        this.menuTogglerElRef.nativeElement.click();
        e.stopPropagation();
    };
    SchemeToolboxComponent.prototype.onResize = function () {
        this.contentElRef.nativeElement.style.height = this.wrapperElRef.nativeElement.offsetHeight - this.contentElRef.nativeElement.offsetTop + "px";
    };
    __decorate([
        core_1.ViewChild('content'),
        __metadata("design:type", core_1.ElementRef)
    ], SchemeToolboxComponent.prototype, "contentElRef", void 0);
    __decorate([
        core_1.ViewChild('menuToggler'),
        __metadata("design:type", core_1.ElementRef)
    ], SchemeToolboxComponent.prototype, "menuTogglerElRef", void 0);
    __decorate([
        core_1.ViewChild('wrapper'),
        __metadata("design:type", core_1.ElementRef)
    ], SchemeToolboxComponent.prototype, "wrapperElRef", void 0);
    SchemeToolboxComponent = __decorate([
        core_1.Component({
            host: { '(window:resize)': 'onResize($event)' },
            selector: 'scheme-toolbox',
            template: __webpack_require__(681)
        }),
        __metadata("design:paramtypes", [common_1.Location,
            logger_1.Logger,
            mediator_1.Mediator,
            router_1.ActivatedRoute,
            router_1.Router])
    ], SchemeToolboxComponent);
    return SchemeToolboxComponent;
}());
exports.SchemeToolboxComponent = SchemeToolboxComponent;


/***/ },

/***/ 456:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var layout_1 = __webpack_require__(103);
var element_detail_component_1 = __webpack_require__(302);
var element_list_component_1 = __webpack_require__(303);
var group_table_component_1 = __webpack_require__(307);
var scheme_detail_component_1 = __webpack_require__(316);
var shape_properties_component_1 = __webpack_require__(317);
var schemeRoutes = [
    {
        path: "schemes/:id", component: scheme_detail_component_1.SchemeDetailComponent,
        children: [
            { path: "", redirectTo: "groups", pathMatch: "full" },
            { path: "groups", component: group_table_component_1.GroupTableComponent, data: { layout: layout_1.Layout.None } },
            { path: "elements", component: element_list_component_1.ElementListComponent, data: { layout: layout_1.Layout.None } },
            { path: "elements/new", component: element_detail_component_1.ElementDetailComponent, data: { layout: layout_1.Layout.None } },
            { path: "elements/:id", component: element_detail_component_1.ElementDetailComponent, data: { layout: layout_1.Layout.None } },
            { path: "shape", component: shape_properties_component_1.ShapePropertiesComponent, data: { layout: layout_1.Layout.None } }
        ]
    }
];
var SchemeRoutingModule = (function () {
    function SchemeRoutingModule() {
    }
    SchemeRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(schemeRoutes)],
            exports: [router_1.RouterModule]
        })
    ], SchemeRoutingModule);
    return SchemeRoutingModule;
}());
exports.SchemeRoutingModule = SchemeRoutingModule;


/***/ },

/***/ 457:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var layout_1 = __webpack_require__(103);
var screen_component_1 = __webpack_require__(320);
var screen_table_component_1 = __webpack_require__(319);
var screenRoutes = [
    // presentation mode
    { path: 'screen/:id', component: screen_component_1.ScreenComponent, data: { layout: layout_1.Layout.None } },
    { path: 'screens', component: screen_table_component_1.ScreenTableComponent, data: { layout: layout_1.Layout.ShowHeader | layout_1.Layout.ShowFooter | layout_1.Layout.ShowLeftSide | layout_1.Layout.ShowRightSide } },
    { path: 'screens/:startDate', component: screen_table_component_1.ScreenTableComponent, data: { layout: layout_1.Layout.ShowHeader | layout_1.Layout.ShowFooter | layout_1.Layout.ShowLeftSide | layout_1.Layout.ShowRightSide } }
];
var ScreenRoutingModule = (function () {
    function ScreenRoutingModule() {
    }
    ScreenRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(screenRoutes)],
            exports: [router_1.RouterModule]
        })
    ], ScreenRoutingModule);
    return ScreenRoutingModule;
}());
exports.ScreenRoutingModule = ScreenRoutingModule;


/***/ },

/***/ 458:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var primeng_1 = __webpack_require__(20);
var hub_service_1 = __webpack_require__(132);
var member_service_1 = __webpack_require__(88);
var screen_routing_module_1 = __webpack_require__(457);
var schemes_module_1 = __webpack_require__(108);
var screen_component_1 = __webpack_require__(320);
var screen_table_component_1 = __webpack_require__(319);
var member_screen_component_1 = __webpack_require__(318);
var screen_service_1 = __webpack_require__(138);
var pipes_1 = __webpack_require__(86);
var ui_module_1 = __webpack_require__(49);
var ScreenModule = (function () {
    function ScreenModule() {
    }
    ScreenModule = __decorate([
        core_1.NgModule({
            declarations: [pipes_1.DatexPipe, member_screen_component_1.MemberScreenComponent, screen_component_1.ScreenComponent, screen_table_component_1.ScreenTableComponent],
            imports: [primeng_1.ButtonModule, primeng_1.CarouselModule, common_1.CommonModule, primeng_1.DataTableModule, schemes_module_1.SchemesModule, screen_routing_module_1.ScreenRoutingModule, primeng_1.ToolbarModule, ui_module_1.UiModule],
            providers: [hub_service_1.HubService, member_service_1.MemberService, screen_service_1.ScreenService]
        })
    ], ScreenModule);
    return ScreenModule;
}());
exports.ScreenModule = ScreenModule;


/***/ },

/***/ 459:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var notification_component_1 = __webpack_require__(321);
var tickerRoutes = [
    { path: 'send', component: notification_component_1.NotificationComponent },
    { path: 'send/:confid', component: notification_component_1.NotificationComponent }
];
var TickerRoutingModule = (function () {
    function TickerRoutingModule() {
    }
    TickerRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forChild(tickerRoutes)],
            exports: [router_1.RouterModule]
        })
    ], TickerRoutingModule);
    return TickerRoutingModule;
}());
exports.TickerRoutingModule = TickerRoutingModule;


/***/ },

/***/ 460:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var forms_1 = __webpack_require__(6);
var primeng_1 = __webpack_require__(20);
var ui_module_1 = __webpack_require__(49);
var ticker_table_component_1 = __webpack_require__(322);
var notification_component_1 = __webpack_require__(321);
var tickers_routing_module_1 = __webpack_require__(459);
var ticker_service_1 = __webpack_require__(139);
var TickersModule = (function () {
    function TickersModule() {
    }
    TickersModule = __decorate([
        core_1.NgModule({
            declarations: [notification_component_1.NotificationComponent, ticker_table_component_1.TickerTableComponent],
            exports: [ticker_table_component_1.TickerTableComponent],
            imports: [
                primeng_1.BlockUIModule,
                primeng_1.ButtonModule,
                common_1.CommonModule,
                primeng_1.DataTableModule,
                forms_1.FormsModule,
                primeng_1.InputSwitchModule,
                primeng_1.InputTextareaModule,
                primeng_1.MessagesModule,
                primeng_1.MultiSelectModule,
                primeng_1.PanelModule,
                forms_1.ReactiveFormsModule,
                tickers_routing_module_1.TickerRoutingModule,
                primeng_1.ToggleButtonModule,
                ui_module_1.UiModule
            ],
            providers: [ticker_service_1.TickerService]
        })
    ], TickersModule);
    return TickersModule;
}());
exports.TickersModule = TickersModule;


/***/ },

/***/ 461:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(3);
var core_1 = __webpack_require__(1);
var router_1 = __webpack_require__(7);
var primeng_1 = __webpack_require__(20);
var conferences_module_1 = __webpack_require__(443);
var elements_module_1 = __webpack_require__(304);
var employees_module_1 = __webpack_require__(306);
var halls_module_1 = __webpack_require__(311);
var members_module_1 = __webpack_require__(312);
var office_module_1 = __webpack_require__(452);
var organizations_module_1 = __webpack_require__(315);
var schemes_module_1 = __webpack_require__(108);
var screen_module_1 = __webpack_require__(458);
var ViewsModule = (function () {
    function ViewsModule() {
    }
    ViewsModule = __decorate([
        core_1.NgModule({
            exports: [primeng_1.ConfirmDialogModule, common_1.CommonModule, primeng_1.GrowlModule],
            imports: [
                common_1.CommonModule,
                primeng_1.ConfirmDialogModule,
                conferences_module_1.ConferencesModule,
                schemes_module_1.SchemesModule,
                elements_module_1.ElementsModule,
                employees_module_1.EmployeesModule,
                primeng_1.GrowlModule,
                halls_module_1.HallsModule,
                members_module_1.MembersModule,
                office_module_1.OfficeModule,
                organizations_module_1.OrganizationsModule,
                router_1.RouterModule,
                schemes_module_1.SchemesModule,
                screen_module_1.ScreenModule
            ],
            providers: [primeng_1.ConfirmationService]
        })
    ], ViewsModule);
    return ViewsModule;
}());
exports.ViewsModule = ViewsModule;


/***/ },

/***/ 49:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var detail_component_1 = __webpack_require__(429);
var match_table_directive_1 = __webpack_require__(430);
var UiModule = (function () {
    function UiModule() {
    }
    UiModule = __decorate([
        core_1.NgModule({
            declarations: [detail_component_1.DetailComponent, match_table_directive_1.MatchTableDirective],
            exports: [detail_component_1.DetailComponent, match_table_directive_1.MatchTableDirective]
        })
    ], UiModule);
    return UiModule;
}());
exports.UiModule = UiModule;


/***/ },

/***/ 635:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, "html, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, font, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td {\r\n    margin: 0;\r\n    padding: 0;\r\n    border: 0;\r\n    outline: 0;\r\n    vertical-align: baseline;\r\n    background: transparent;\r\n}\r\n\r\nbody {\r\n    font-family: Roboto,\"Helvetica Neue\",sans-serif;\r\n    font-size: 16px;\r\n    line-height: 1.5em;\r\n    color: #212121;\r\n    -webkit-font-smoothing: antialiased;\r\n    background-color: #f7f7f7;\r\n    height: 100%;\r\n}\r\n\r\n#layout-topbar {\r\n    background-color: #607D8B;\r\n    display: block;\r\n    padding: 0;\r\n    height: 70px;\r\n    -moz-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    z-index: 999;\r\n    box-shadow: 0 2px 5px 0 rgba(0,0,0,.3);\r\n}\r\n\r\n#layout-topbar .menu-button {\r\n    display: none;\r\n    color: #fff;\r\n    font-size: 24px;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 60px;\r\n    height: 60px;\r\n    line-height: 58px;\r\n    text-align: center;\r\n    -ms-transition: background-color .3s;\r\n    -o-transition: background-color .3s;\r\n    -webkit-transition: background-color .3s;\r\n    transition: background-color .3s;\r\n}\r\n\r\n#layout-topbar .logo {\r\n    margin-left: 45px;\r\n    margin-top: 15px;\r\n    display: inline-block;\r\n}\r\n\r\n#layout-bottombar {\r\n    background-color: #607D8B;\r\n    color: #fff;\r\n    height: 70px;\r\n}\r\n\r\n#layout-bottombar svg {\r\n    width: 100%;\r\n    height: 100%;\r\n    fill: #FFFFFF;\r\n    fill-opacity: 1;\r\n    stroke: rgba(0, 0, 0, 1);\r\n    stroke-width: 0px;\r\n}\r\n\r\n#layout-content {\r\n    background-color: #fff;\r\n    min-height: 460px;\r\n}\r\n\r\n.topbar-menu {\r\n    list-style-type: none;\r\n    float: right;\r\n    margin: 0 44px 0 0;\r\n    padding: 0;\r\n}\r\n\r\n.topbar-menu, .topbar-menu > li, .topbar-menu > li > a {\r\n    display: inline-block;\r\n    height: 100%;\r\n}\r\n\r\n.topbar-menu > li > a {\r\n    text-decoration: none;\r\n    color: #fff;\r\n    -ms-transition: background-color .3s;\r\n    -o-transition: background-color .3s;\r\n    -webkit-transition: background-color .3s;\r\n    transition: background-color .3s;\r\n    min-width: 40px;\r\n    text-align: center;\r\n    -moz-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    line-height: 70px;\r\n}\r\n\r\n.logo svg {\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    margin: auto;\r\n    fill: greenyellow;\r\n    fill-opacity: 1;\r\n    stroke: rgba(145, 85, 167, 1);\r\n    stroke-width: 0px;\r\n}\r\n\r\n/*****\r\nRaleway font\r\n*****/\r\n\r\n/* latin-ext */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    src: local('Raleway'), local('Raleway-Regular'), url(" + __webpack_require__(653) + ") format('woff2');\r\n    unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\r\n}\r\n\r\n/* latin */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    src: local('Raleway'), local('Raleway-Regular'), url(" + __webpack_require__(649) + ") format('woff2');\r\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;\r\n}\r\n/* latin-ext */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    src: local('Raleway Bold'), local('Raleway-Bold'), url(" + __webpack_require__(651) + ") format('woff2');\r\n    unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\r\n}\r\n/* latin */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    src: local('Raleway Bold'), local('Raleway-Bold'), url(" + __webpack_require__(647) + ") format('woff2');\r\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;\r\n}\r\n/* latin-ext */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: italic;\r\n    font-weight: 400;\r\n    src: local('Raleway Italic'), local('Raleway-Italic'), url(" + __webpack_require__(652) + ") format('woff2');\r\n    unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\r\n}\r\n/* latin */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: italic;\r\n    font-weight: 400;\r\n    src: local('Raleway Italic'), local('Raleway-Italic'), url(" + __webpack_require__(648) + ") format('woff2');\r\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;\r\n}\r\n/* latin-ext */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: italic;\r\n    font-weight: 700;\r\n    src: local('Raleway Bold Italic'), local('Raleway-BoldItalic'), url(" + __webpack_require__(650) + ") format('woff2');\r\n    unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\r\n}\r\n/* latin */\r\n@font-face {\r\n    font-family: 'Raleway';\r\n    font-style: italic;\r\n    font-weight: 700;\r\n    src: local('Raleway Bold Italic'), local('Raleway-BoldItalic'), url(" + __webpack_require__(646) + ") format('woff2');\r\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;\r\n}\r\n\r\n.font_0 {\r\n    font: normal normal normal 32px/1.4em raleway,sans-serif;\r\n    color: greenyellow;\r\n}\r\n\r\n.font_6 {\r\n    font: normal normal normal 28px/1.4em raleway,sans-serif;\r\n}\r\n\r\n.font_8 {\r\n    font: normal normal normal 15px/1.4em raleway,sans-serif;\r\n    color: white;\r\n}\r\n\r\n\r\n.ui-growl {\r\n    width: 450px;\r\n}\r\n\r\n.h100p {\r\n    height: 100%\r\n}\r\n\r\n.w100p {\r\n    width: 100%\r\n}\r\n\r\n.h100p .ui-datagrid-content, .h100p .ui-datalist-content {\r\n    height: 100%;\r\n    overflow-y: auto;\r\n}\r\n\r\n.center {\r\n    text-align: center;\r\n}\r\n\r\n/* ellipsis */\r\n.ellipsis {\r\n    text-overflow: ellipsis;\r\n    text-overflow: -o-ellipsis-lastline;\r\n    white-space: nowrap;\r\n}\r\n\r\n.ellipsis-m3 {\r\n    -webkit-line-clamp: 3;\r\n}\r\n\r\n.ellipsis-m4 {\r\n    -webkit-line-clamp: 4;\r\n}\r\n\r\n.ellipsis-m3, .ellipsis-m4 {\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n}\r\n\r\n.ellipsis, .ellipsis-m3, .ellipsis-m4 {\r\n    overflow: hidden;\r\n}\r\n\r\n.no-header thead {\r\n    display: none;\r\n}\r\n\r\n.ui-fileupload-buttonbar button:not(:first-child) {\r\n    display: none;\r\n}\r\n\r\n.ui-fileupload-content {\r\n    padding: 0;\r\n}\r\n\r\n.hidden .ui-fileupload-content {\r\n    display: none;\r\n}\r\n\r\n.ui-treetable .ui-treetable-header, .ui-treetable .ui-treetable-footer {\r\n    padding: 0.25em 0.5em;\r\n}", ""]);

// exports


/***/ },

/***/ 636:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, "img.center {\r\n    vertical-align: middle;\r\n}\r\n\r\n.ui-select {\r\n    position: absolute;\r\n    top: 24px;\r\n    right: 0;\r\n}\r\n\r\n.text-ellipsis {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n\r\ndiv._32, div._48 {\r\n    overflow: hidden;\r\n}\r\n\r\ndiv._32 {\r\n    height: 32px;\r\n    width: 32px;\r\n}\r\n\r\ndiv._48 {\r\n    height: 48px;\r\n    width: 48px;\r\n}", ""]);

// exports


/***/ },

/***/ 637:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, ".circle {\r\n    -ms-border-radius: 50%;\r\n    border: 1px solid blue;\r\n    border-radius: 50%;\r\n    color: blue;\r\n}\r\n\r\n.on {\r\n    background-color: rgba(0, 255, 0, 0.9);\r\n}\r\n\r\n", ""]);

// exports


/***/ },

/***/ 638:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, ".mark ellipse { \r\n    fill: rgba(255, 255, 255, 0.9); \r\n    stroke: blue; stroke-width: 2px \r\n}\r\n\r\n.mark.on ellipse {\r\n    fill: rgba(0, 255, 0, 0.9)\r\n}\r\n\r\n.mark text { \r\n    text-anchor: middle\r\n}\r\n", ""]);

// exports


/***/ },

/***/ 639:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, ".screen .circle {\r\n    -ms-border-radius: 50%;\r\n    border: 2px solid blue;\r\n    border-radius: 15%;\r\n    color: blue;\r\n}\r\n\r\n.on {\r\n    background-color: rgba(0, 255, 0, 0.9);\r\n}\r\n\r\n.screen .ui-datatable-data > tr > td {\r\n    border-width: 0 !important;\r\n}", ""]);

// exports


/***/ },

/***/ 640:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, ".font_1 {\r\n    font-size: 1.5em;\r\n    font-weight: 600\r\n}\r\n\r\n.carousel .ui-grid-row {\r\n    text-align: center;\r\n}\r\n\r\n.carousel .ui-carousel-button, .carousel .ui-carousel-page-links {\r\n    font-size: 2em;\r\n}\r\n\r\n.carousel .ui-carousel-dropdown {\r\n    font-size: 2em !important;\r\n}", ""]);

// exports


/***/ },

/***/ 641:
/***/ function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(43)(undefined);
// imports


// module
exports.push([module.i, "#speaker {\r\n    position: absolute;\r\n    top: 40%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n}\r\n\r\n.font2 { font-size: 1.5em; font-weight: bold} \r\n\r\n.h48 { height: 2em }\r\n\r\n.h72 { height: 72px }\r\n\r\n.bggreen {\r\n    background-color: rgba(0, 180, 115, 1);\r\n}\r\n\r\n.bgred {\r\n    background-color: rgba(240, 60, 70, 1);\r\n}\r\n\r\n.bggreen, .bgred {\r\n    color: white;\r\n}\r\n\r\n.tnlogo {\r\n    max-height: 100%;\r\n    max-width: 100%;\r\n}", ""]);

// exports


/***/ },

/***/ 646:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin-bold-italic.3be942d12e2c0b14aba8af063a7fe6a5.woff2";

/***/ },

/***/ 647:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin-bold.06f1c8615c08750cfa3d4a6a5b626298.woff2";

/***/ },

/***/ 648:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin-italic.8fdbe5b4fb7a8dc7835cf2f8cff527db.woff2";

/***/ },

/***/ 649:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin-regular.9106435a7a18b6d90d24545c816923c1.woff2";

/***/ },

/***/ 650:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin_ext-bold-italic.8920180d0e3ecc8f470f8d8842cdf1c5.woff2";

/***/ },

/***/ 651:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin_ext-bold.9d312b33e4259782ed6dd8ceb8de1860.woff2";

/***/ },

/***/ 652:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin_ext-italic.513b56e9799a52053a597df9b379517b.woff2";

/***/ },

/***/ 653:
/***/ function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/raleway-latin_ext-regular.51bafff5002d14350afec586cea948f9.woff2";

/***/ },

/***/ 662:
/***/ function(module, exports) {

module.exports = "<div class=\"ui-g layout-wrapper\">\r\n    <div class=\"ui-xl-1 ui-g-nopad\" *ngIf=\"bitTest(Layout.ShowLeftSide)\"></div>\r\n    <div class=\"ui-g-nopad ui-g-12\" [ngClass]=\"cls\">\r\n        <div #topbar id=\"layout-topbar\" class=\"ui-g-12\" *ngIf=\"bitTest(Layout.ShowHeader)\">\r\n            <a class=\"menu-button\" href=\"#\">\r\n                <i class=\"fa fa-bars\"></i>\r\n            </a>\r\n            <a class=\"logo\" [routerLink]=\"['/']\">\r\n                <div style=\"float: left; height: 44px; width: 44px\">\r\n                    <svg preserveAspectRatio=\"xMidYMid meet\" style=\"stroke-width: 0\" viewBox=\"0 82.59000396728516 500.7769775390625 340.7220153808594\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <g>\r\n                            <path d=\"M489.842 270.768H403.99L373.785 167.95a10.941 10.941 0 0 0-10.622-6.529 10.932 10.932 0 0 0-9.833 7.666L290 362 223.096 91.286a10.934 10.934 0 0 0-10.443-8.601c-5.048-.095-9.519 3.25-11.811 8.135l-73.81 180.948H10.934C4.897 271.768 0 276.664 0 282.703v2.689c0 6.038 4.897 10.935 10.934 10.935h127.438c5.144 0 9.592-3.586 10.685-8.611l61.645-156.771 68.797 282.199c.808 5.931 4.854 9.688 9.832 10.126.323.028.645.042.964.042 4.604 0 8.763-2.902 10.312-8.313L364.3 208.404l20.81 79.815a10.935 10.935 0 0 0 10.242 7.107h93.714c6.038 0 10.935-4.896 10.935-10.935l.776-2.689c-.001-6.038-4.897-10.934-10.935-10.934z\"></path>\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n                <h1 class=\"font_0\" style=\"margin: 0 0 0 62px; line-height: 1em\">Conference&nbsp;Hall</h1>\r\n                <p class=\"font_8\" style=\"margin: 0 0 0 62px\">\r\n                    <span>\r\n                        <span *ngIf=\"this.authService.LoggedUser\">\r\n                            Вошел как : {{this.authService.LoggedUser.name}}\r\n                        </span>\r\n                    </span>\r\n                </p>\r\n            </a>\r\n\r\n            <ul class=\"topbar-menu\" *ngIf=\"authService.isAuthenticated\">\r\n                <li>\r\n                    <a [routerLink]=\"['/schedule']\" title=\"Календарь\">\r\n                        <span class=\"fa-stack fa-2x\">\r\n                            <i class=\"fa fa-calendar\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n                <li>\r\n                    <a [routerLink]=\"['/orgs']\" title=\"Сотрудники\">\r\n                        <span class=\"fa-stack fa-2x\">\r\n                            <i class=\"fa fa-users\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n                <li>\r\n                    <a [routerLink]=\"['/halls']\" title=\"Холлы\">\r\n                        <span class=\"fa-stack fa-2x\">\r\n                            <i class=\"fa fa-building\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n                <li>\r\n                    <a [routerLink]=\"['/office']\" title=\"Личный кабинет\">\r\n                        <span class=\"fa-stack fa-2x\">\r\n                            <i class=\"fa fa-wrench\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"javascript:void(0)\" (click)=\"logout()\" title=\"Выход\">\r\n                        <span class=\"fa-stack fa-2x\">\r\n                            <i class=\"fa fa-sign-out\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div #content id=\"layout-content\" class=\"ui-g-12\">\r\n            <router-outlet></router-outlet>\r\n        </div>\r\n        <div #bottombar id=\"layout-bottombar\" class=\"ui-g-12 font_8\" *ngIf=\"bitTest(Layout.ShowFooter)\">\r\n            <div class=\"ui-g-4\">\r\n                \r\n                <div> © &nbsp; 2017 Aquilon Software Technologies. </div>\r\n               \r\n                <div style=\"float: left; height: 14px; width: 14px\">\r\n                    <svg preserveAspectRatio=\"xMidYMid meet\" style=\"stroke-width: 0\" viewBox=\"42.17698669433594 28.26300048828125 251.81602478027344 297.4230041503906\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <g>\r\n                            <path d=\"M168.085 31.832c4.245-.454 45.943-3.569 84.851 43.417 41.057 49.578 3.873 115.419 3.873 115.419l-88.725 135.018-88.723-135.018s-37.184-65.841 3.873-115.419c38.914-46.986 80.606-43.872 84.851-43.417zm47.415 96.445c0-26.184-21.226-47.409-47.414-47.409-26.184 0-47.414 21.226-47.414 47.409 0 26.189 21.231 47.414 47.414 47.414 26.188 0 47.414-21.225 47.414-47.414z\"></path>\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n\r\n                <div>&nbsp; 252a Беломорская,&nbsp;Казань, РТ 94158</div>\r\n            </div>\r\n\r\n            <div class=\"ui-g-4\">\r\n            \r\n                <div>\r\n                    <div>&nbsp;</div>\r\n                    <div style=\"float: left; height: 14px; width: 14px\">\r\n                        <svg preserveAspectRatio=\"xMidYMid meet\" style=\"stroke-width: 0\" viewBox=\"-3.899993896484375 -2.700000047683716 160.89999389648438 158.90000915527344\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <g>\r\n                                <path d=\"M92.3 116.4c11.4-.3 14.5-13.3 18.9-19.6 4.5-6.3 10.7-6.3 13.9-4.7 2.8 1.4 21.1 14 28.5 25.8 3.4 5.8 2.8 9.6-2.6 14.5-11 9.8-27.2 21.8-31.3 22.8-4.1 1-37.8-.9-80.7-43.8S-.5 39 .4 33.9C.9 27.8 22.1 4.6 22.1 4.6S27-2.7 35.5 1c9.7 4.2 25.4 27.8 25.4 27.8s3.4 5.8-.6 11.7c-3.8 5.8-23.7 10-23.7 20.2S46.8 82 59.4 95.1s21.5 21.6 32.9 21.3z\"></path>\r\n                            </g>\r\n                        </svg>\r\n                    </div>\r\n                    <div>&nbsp; Tel: 123-456-789</div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class=\"ui-g-4\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <span class=\"fa-stack fa-lg\">\r\n                        <i class=\"fa fa-facebook fa-lg\"></i>\r\n                    </span>\r\n                    <span class=\"fa-stack fa-lg\">\r\n                        <i class=\"fa fa-twitter fa-lg\"></i>\r\n                    </span>\r\n                    <span class=\"fa-stack fa-lg\">\r\n                        <i class=\"fa fa-google-plus fa-lg\"></i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"ui-xl-1 ui-g-nopad\" *ngIf=\"bitTest(Layout.ShowRightSide)\"></div>\r\n</div>\r\n    \r\n\r\n<p-confirmDialog #cd width=\"450\">\r\n    <p-footer>\r\n        <button type=\"button\" pButton icon=\"fa-close\" label=\"Нет\" (click)=\"cd.reject()\"></button>\r\n        <button type=\"button\" pButton icon=\"fa-check\" label=\"Да\" (click)=\"cd.accept()\"></button>\r\n    </p-footer>\r\n</p-confirmDialog>\r\n\r\n<p-growl [life]=\"5000\" [value]=\"msgs\"></p-growl>";

/***/ },

/***/ 663:
/***/ function(module, exports) {

module.exports = "<div class=\"card login-panel ui-fluid\">\r\n    <div class=\"ui-g\">\r\n        <div class=\"ui-g-4\"></div>\r\n        <div class=\"ui-g-4\">\r\n            <p-panel #pnl [style]=\"{'border': 'none'}\">\r\n                <div class=\"ui-g\">\r\n                    <div class=\"ui-xl-2 ui-g-nopad\"></div>\r\n                    <div class=\"ui-xl-8 ui-g-12 ui-g-nopad\">\r\n                        <form [formGroup]=\"loginForm\" (ngSubmit)=\"authenticate($event, loginForm.value)\">\r\n                            <div class=\"font_6 center ui-g-12\">\r\n                                Войти в систему\r\n                            </div>\r\n                            <div class=\"ui-g-12\">\r\n                                <input type=\"text\" pInputText formControlName=\"login\" placeholder=\"Логин\" />\r\n                            </div>\r\n                            <div class=\"ui-g-12\">\r\n                                <input type=\"password\" pPassword formControlName=\"password\" [feedback]=\"false\" placeholder=\"Пароль\" />\r\n                            </div>\r\n                            <div class=\"ui-g-12\">\r\n                                <button pButton type=\"submit\" label=\"Войти\" icon=\"ui-icon-person\" [disabled]=\"!loginForm.valid\"></button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"ui-xl-2 ui-g-nopad\"></div>\r\n                </div>\r\n            </p-panel>\r\n            </div>\r\n        <div class=\"ui-g-4\"></div>\r\n    </div>\r\n</div>\r\n<p-blockUI [blocked]=\"loading\" [target]=\"pnl\">\r\n    <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\" style=\"position:absolute; top:40%; left:45%\"></i>\r\n</p-blockUI>";

/***/ },

/***/ 664:
/***/ function(module, exports) {

module.exports = "<p-dialog [header]=\"header\" [(visible)]=\"visible\" modal=\"modal\" minHeight=\"420\" minWidth=\"300\" width=\"400\" dismissableMask=\"true\" [responsive]=\"true\" (onHide)=\"onHide()\">\r\n    <form [formGroup]=\"appointmentForm\" (ngSubmit)=\"save($event, appointmentForm.value)\">\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <div class=\"ui-g-6\" style=\"padding: .5em 0\">\r\n                    Длительность :\r\n                </div>\r\n                <div class=\"ui-g-6 ui-g-nopad\">\r\n                    <p-calendar formControlName=\"duration\" [timeOnly]=\"true\" [inputStyle]=\"{'width': '100%'}\" [style]=\"{'width': '100%'}\"></p-calendar>\r\n                </div>\r\n            </div>\r\n            <div class=\"ui-g-12\" style=\"padding: .5em 0\">\r\n                <p-dropdown [options]=\"halls\" formControlName=\"hallId\" placeholder=\"Выберите холл\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n            </div>\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <p-calendar [inline]=\"true\" formControlName=\"start\" [locale]=\"locale\" [style]=\"{'width':'100%'}\" *ngIf=\"calendarVisible\"></p-calendar>\r\n            </div>\r\n        </div>\r\n        <p-footer>\r\n            <div class=\"ui-dialog-buttonpane ui-widget-content ui-helper-clearfix\">\r\n                <button type=\"button\" pButton icon=\"fa-close\" (click)=\"visible=false\" label=\"Отмена\"></button>\r\n                <button type=\"submit\" pButton icon=\"fa-check\" label=\"ОК\" [disabled]=\"!appointmentForm.valid\"></button>\r\n            </div>\r\n        </p-footer>\r\n    </form>\r\n</p-dialog>";

/***/ },

/***/ 665:
/***/ function(module, exports) {

module.exports = "<form class=\"h100p\" [formGroup]=\"conferenceForm\" (ngSubmit)=\"save($event, conferenceForm.value)\">\r\n    <detail [formGroup]=\"conferenceForm\">\r\n        <nav>\r\n            <button pButton type=\"button\" title=\"Назад\" icon=\"fa-arrow-left\" (click)=\"location.back()\"></button>\r\n            <div class=\"ui-toolbar-group-right\">\r\n                <button pButton type=\"button\" title=\"Отправить уведомление\" icon=\"fa-envelope-o\" [disabled]=\"members.length === 0\" [routerLink]=\"['/send', id]\"></button>\r\n                <button pButton type=\"submit\" label=\"Сохранить\" icon=\"fa-floppy-o\" [disabled]=\"!conferenceForm.valid\"></button>\r\n            </div>\r\n        </nav>\r\n\r\n        <main>\r\n            <input type=\"hidden\" formControlName=\"id\" />\r\n\r\n            <p-accordion>\r\n                <p-accordionTab header=\"Конференция\" [selected]=\"true\">\r\n\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-g-8 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Тема *:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <input pInputText type=\"text\" formControlName=\"subject\" class=\"w100p\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-g-8 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Описание :\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <textarea pInputTextarea formControlName=\"description\" rows=\"6\" class=\"w100p\"></textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-g-8 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Статус :\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <p-dropdown formControlName=\"state\" [options]=\"states\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-g-8 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Холл <span *ngIf=\"requireValidation\">*</span>:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <p-dropdown formControlName=\"hallId\" [options]=\"halls\" placeholder=\"Выберите холл\" (ngModelChange)=\"hallChange($event)\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-g-8 ui-g-nopad\">\r\n                            <div class=\"ui-g-4 \">\r\n                                Схема <span *ngIf=\"requireValidation\">*</span>:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <p-dropdown formControlName=\"schemeId\" [options]=\"schemes\" placeholder=\"Выберите схему\" (ngModelChange)=\"schemeIdChange($event)\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Период\">\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-g-8 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                <div class=\"ui-g-6\">\r\n                                    Начало <span *ngIf=\"requireValidation\">*</span>:\r\n                                </div>\r\n                                <div class=\"ui-g-6\">\r\n                                    <p-calendar formControlName=\"startDate\" dateFormat=\"dd.mm.yy\" [showTime]=\"true\" [locale]=\"locale\"></p-calendar>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ui-g-2\"></div>\r\n                            <div class=\"ui-g-4\">\r\n                                <div class=\"ui-g-6\">\r\n                                    Окончание <span *ngIf=\"requireValidation\">*</span>:\r\n                                </div>\r\n                                <div class=\"ui-g-6\">\r\n                                    <p-calendar formControlName=\"endDate\" dateFormat=\"dd.mm.yy\" [showTime]=\"true\" [locale]=\"locale\"></p-calendar>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Участники\" *ngIf=\"id !== undefined\">\r\n                    <div class=\"ui-g-12 ui-g-nopad h100p\">\r\n                        <div class=\"ui-g-6 ui-md-6 ui-widget-content ui-g-nopad h100p\">\r\n                            <member-table [members]=\"members\" selectionMode=\"multiple\" (selectionChanged)=\"memberTableChahged($event)\"></member-table>\r\n                        </div>\r\n                        <div class=\"ui-g-1 ui-md-1 h100p\" style=\"display: table\">\r\n                            <div class=\"ui-picklist-buttons\">\r\n                                <button pButton type=\"button\" icon=\"fa-angle-left\" class=\"w100p\" (click)=\"moveToTarget()\" [disabled]=\"selectedEmployees.length === 0\"></button>\r\n                                <button pButton type=\"button\" icon=\"fa-angle-right\" class=\"w100p\" (click)=\"moveToSource()\" [disabled]=\"selectedMembers.length === 0\"></button>\r\n                                <button pButton type=\"button\" icon=\"fa-angle-double-right\" class=\"w100p\" (click)=\"moveAllToSource()\"></button>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-g-5 ui-md-5 ui-widget-content ui-g-nopad h100p\">\r\n                            <organization-tree emitData=\"false\" readOnly=\"true\" (selectionChanged)=\"employeeTreeChanged($event)\"></organization-tree>\r\n                        </div>\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Схема\" *ngIf=\"id !== undefined\">\r\n                    <div #switch class=\"ui-toolbar-group-right\">\r\n                        <p-inputSwitch onLabel=\"Схема\" offLabel=\"Список\" formControlName=\"showScheme\" (ngModelChange)=\"showSchemeChange($event)\"></p-inputSwitch>\r\n                    </div>\r\n                    <div #content class=\"ui-g-12 ui-g-nopad\">\r\n\r\n                        <member-table [ngClass]=\"{'ui-helper-hidden': conferenceForm.value.showScheme}\" [availableSeats]=\"seats\" [members]=\"members\" editable=\"true\"\r\n                                      (seatChanged)=\"memberSeatChanged($event)\" (stateChanged)=\"memberStateChanged($event)\"></member-table>\r\n\r\n                        <scheme-main [ngClass]=\"{'ui-helper-hidden': !conferenceForm.value.showScheme}\" [schemeId]=\"schemeId\" (schemeLoaded)=\"schemeLoaded()\"></scheme-main>\r\n\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Сообщения\" *ngIf=\"id !== undefined\">\r\n                    <ticker-table></ticker-table>\r\n                </p-accordionTab>\r\n\r\n            </p-accordion>\r\n        </main>\r\n    </detail>\r\n</form>\r\n";

/***/ },

/***/ 666:
/***/ function(module, exports) {

module.exports = "<div #grid class=\"ui-g h100p\">\r\n    <div id=\"calendar\" class=\"ui-g-8\">\r\n        <p-schedule pDroppable=\"dd_conf\" [allDayText]=\"'Весь день'\" [businessHours]=\"true\" [droppable]=\"true\" [editable]=\"true\" [fixedWeekCount]=\"false\"\r\n                    [events]=\"events\" [eventStartEditable]=\"true\" [height]=\"grid.offsetHeight - 16\" [header]=\"headerConfig\" [nowIndicator]=\"true\"\r\n                    [eventRender]=\"eventRender\" (onDrop)=\"drop($event)\" (onEventClick)=\"selectedEvent=$event.calEvent;menu.toggle($event.jsEvent)\"\r\n                    (onEventDragStop)=\"eventDragStop($event)\" (onEventDrop)=\"eventDrop($event)\" (onEventResize)=\"eventResize($event)\"\r\n                    (onViewRender)=\"viewRender($event)\">\r\n        </p-schedule>\r\n    </div>\r\n    <div class=\"ui-g-4\">\r\n        <p-tabView styleClass=\"h100p p0501\">\r\n            <p-tabPanel header=\"Совещания\">\r\n                <conference-table [startDate]=\"startDate\" [endDate]=\"endDate\" (appointmentButtonClick)=\"makeAppointment($event)\" (conferenceRemoveClick)=\"removeEventFromList($event)\"></conference-table>\r\n            </p-tabPanel>\r\n            <p-tabPanel header=\"Холлы\">\r\n                <hall-table [readOnly]=\"true\" (selectionChanged)=\"hallTableChanged($event)\"></hall-table>\r\n            </p-tabPanel>\r\n            <p-tabPanel header=\"Участники\">\r\n                <organization-tree [readOnly]=\"true\" (selectionChanged)=\"employeeTreeChanged($event)\"></organization-tree>\r\n            </p-tabPanel>\r\n        </p-tabView>\r\n    </div>\r\n</div>\r\n<appointment-dialog (closed)=\"appointmentDialogClosed($event)\"></appointment-dialog>\r\n<p-menu #menu popup=\"popup\" [model]=\"menuItems\" appendTo=\"body\"></p-menu>";

/***/ },

/***/ 667:
/***/ function(module, exports) {

module.exports = "<p-dataTable matchTable=\"ui-datatable\" dataKey=\"id\" [value]=\"conferences\" [loading]=\"loading\" [rows]=\"10\" selectionMode=\"single\" [(selection)]=\"selectedConference\" styleClass=\"h100p no-header\">\r\n    <p-header>\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-left\">\r\n                    <p-dropdown [options]=\"states\" [(ngModel)]=\"selectedState\" (onChange)=\"changeState($event.value)\"></p-dropdown>\r\n                </div>\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <button type=\"button\" pButton icon=\"fa-calendar-times-o\" title=\"Назначить\" [disabled]=\"selectedState!==ConfState.Planned || !this.selectedConference\" (click)=\"makeAppointment()\"></button>\r\n                    <p-toggleButton onIcon=\"fa fa-ban\" onLabel=\"Готово\" offIcon=\"fa fa-pencil\" offLabel=\"Правка\" (onChange)=\"changeEditMode()\"></p-toggleButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </p-header>\r\n    <p-footer>\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-6 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-left\">\r\n                    <button type=\"button\" pButton icon=\"fa-trash\" title=\"Удалить\" [disabled]=\"!this.selectedConference\" *ngIf=\"editMode\" (click)=\"removeConference()\"></button>\r\n                </div>\r\n            </div>\r\n            <div class=\"ui-g-6 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <button type=\"button\" pButton icon=\"fa-plus\" title=\"Добавить совещание\" [routerLink]=\"['/conferences/new']\"></button>\r\n                </div>\r\n            </div>\r\n        </div>       \r\n    </p-footer>\r\n    <p-column selectionMode=\"single\" [style]=\"{ 'width':'3em'}\"></p-column>\r\n    <p-column field=\"subject\" header=\"Наименование\">\r\n        <ng-template let-conference=\"rowData\" pTemplate=\"body\">\r\n            <span pDraggable=\"dd_conf\" class=\"ui-cell-data w100p\" style=\"display: block\" (onDragStart)=\"dragStart($event, conference)\" *ngIf=\"selectedState===ConfState.Planned\">{{conference.subject}}</span>\r\n            <span class=\"ui-cell-data\" *ngIf=\"selectedState!==ConfState.Planned\">{{conference.subject}}</span>\r\n        </ng-template>\r\n    </p-column> \r\n    <p-column [style]=\"{ 'width':'60px'}\" [styleClass]=\"center\" *ngIf=\"editMode\">\r\n        <ng-template let-conference=\"rowData\" pTemplate=\"body\">\r\n            <i class=\"fa fa-lg fa-pencil\" title=\"Изменить\" (click)=\"editConference($event, conference.id)\"></i>\r\n        </ng-template>\r\n    </p-column>\r\n</p-dataTable>";

/***/ },

/***/ 668:
/***/ function(module, exports) {

module.exports = "<p-dataTable dataKey=\"id\" [editable]=\"true\" [value]=\"contacts\" [rows]=\"10\" styleClass=\"no-header\" selectionMode=\"{{editMode ? 'multiple' : ''}}\" [(selection)]=\"selectedContacts\">\r\n    <p-header>\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <p-toggleButton onIcon=\"fa fa-ban\" onLabel=\"Готово\" offIcon=\"fa fa-pencil\" offLabel=\"Правка\" (onChange)=\"changeEditMode()\"></p-toggleButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </p-header>\r\n    <p-footer>\r\n        \r\n        <form [formGroup]=\"contactForm\" (ngSubmit)=\"addContact(contactForm.value)\">\r\n            <div class=\"ui-g\">\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-left\">\r\n                        <button type=\"button\" pButton icon=\"fa-trash\" title=\"Удалить\" [disabled]=\"this.selectedContacts.length === 0\" *ngIf=\"editMode\" (click)=\"removeRows()\"></button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <p-dropdown formControlName=\"kind\" [options]=\"senders\" [autoWidth]=\"false\"></p-dropdown>\r\n                </div>\r\n                <div class=\"ui-g-6 ui-g-nopad\">\r\n                    <input pInputText type=\"text\" formControlName=\"address\" class=\"w100p\"/>\r\n                </div>\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-right\">\r\n                        <button type=\"submit\" pButton icon=\"fa-plus\" title=\"Добавить контакт\" [disabled]=\"!contactForm.valid\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </p-footer>\r\n    <p-column selectionMode=\"multiple\" [style]=\"{ 'width':'3em'}\" *ngIf=\"editMode\"></p-column>\r\n    <p-column field=\"name\" [editable]=\"true\" [style]=\"{'overflow':'visible'}\">\r\n        <ng-template let-contact=\"rowData\" pTemplate=\"editor\">\r\n            <p-dropdown [(ngModel)]=\"contact.kind\" [options]=\"senders\" [autoWidth]=\"false\" (onChange)=\"changeKind($event, contact)\"></p-dropdown>\r\n        </ng-template>\r\n    </p-column>\r\n    <p-column field=\"address\" [editable]=\"true\">\r\n        <ng-template let-col let-contact=\"rowData\" pTemplate=\"editor\">\r\n            <input type=\"text\" pInputText [ngModel]=\"contact.address\" class=\"w100p\" (blur)=\"changeAddress($event, contact)\"/>\r\n        </ng-template>\r\n    </p-column>\r\n    <p-column field=\"active\" [style]=\"{'text-align': 'center', 'width': '15%'}\">\r\n        <ng-template let-contact=\"rowData\" pTemplate=\"body\">\r\n            <p-inputSwitch onLabel=\"Вкл\" offLabel=\"Откл\" [ngModel]=\"contact.active\" (onChange)=\"changeActive($event, contact)\"></p-inputSwitch>\r\n        </ng-template>\r\n    </p-column>\r\n</p-dataTable>";

/***/ },

/***/ 669:
/***/ function(module, exports) {

module.exports = "<form class=\"h100p\" [formGroup]=\"elementForm\" (ngSubmit)=\"save($event, elementForm.value)\">\r\n    <detail>\r\n        <nav>\r\n            <button pButton type=\"submit\" label=\"Сохранить\" icon=\"fa-floppy-o\" [disabled]=\"submitDisabled\"></button>\r\n        </nav>\r\n        <main>\r\n            <input type=\"hidden\" formControlName=\"id\" />\r\n\r\n            <div class=\"ui-g\">\r\n                <div class=\"ui-g-12\">\r\n                    <input type=\"text\" pInputText formControlName=\"name\" placeholder=\"Название\" class=\"w100p\" style=\"-moz-box-sizing: border-box; box-sizing: border-box\" />\r\n                </div>\r\n                <div class=\"ui-g-12\">\r\n                    Изображение :\r\n                    <div>\r\n                        <small>(макс. размер - 1024 x 1024)</small>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-g-12\">\r\n                    <p-fileUpload #fileUpload chooseLabel=\"Выбрать\" accept=\"image/*\" maxFileSize=\"1000000\" previewWidth=\"48\" styleClass=\"hidden\" (onSelect)=\"onSelect()\"></p-fileUpload>\r\n                    <div class=\"ui-fileupload\">\r\n                        <div class=\"ui-fileupload-content ui-widget-content ui-corner-bottom\" *ngIf=\"id && (fileUpload.files.length == 0)\">\r\n                            <div class=\"ui-fileupload-files\">\r\n                                <div>\r\n                                    <div class=\"ui-fileupload-row\">\r\n                                        <div>\r\n                                            <img class=\"center\" src=\"/api/shape/{{id | uniquesuffix}}\" width=\"48\" height=\"48\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-g-12\">\r\n                    Реальная высота, м :\r\n                </div>\r\n                <div class=\"ui-g-12\">\r\n                    <p-spinner formControlName=\"height\" [min]=\"0.1\" [step]=\"0.1\"></p-spinner>\r\n                </div>\r\n                <div class=\"ui-g-12\">\r\n                    Реальная ширина, м :\r\n                </div>\r\n                <div class=\"ui-g-12\">\r\n                    <p-spinner formControlName=\"width\" [min]=\"0.1\" [step]=\"0.1\"></p-spinner>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    </detail>\r\n</form>\r\n";

/***/ },

/***/ 670:
/***/ function(module, exports) {

module.exports = "<p-dataGrid [value]=\"elements\" styleClass=\"center h100p\" *ngIf=\"!smallGrid\">\r\n    <ng-template let-element pTemplate=\"item\">\r\n        <div class=\"ui-md-6\">\r\n            <div pDraggable=\"dd_elem\" class=\"ui-resizable\" style=\"height: 78px; padding: 12px\" (onDragStart)=\"dragStart($event, element)\">\r\n                <div class=\"_48\">\r\n                    <img class=\"center\" src=\"/api/shape/{{element.id | uniquesuffix}}\" width=\"48\" title=\"{{element.name}}\">\r\n                </div>\r\n\r\n                <i class=\"fa fa-2x {{element.selected ? 'fa-check-square-o' : 'fa-square-o' }} ui-select\" style=\"cursor:pointer\" (click)=\"selectElement(element)\" ></i>\r\n                <div class=\"text-ellipsis\">\r\n                    <small>{{element.name}}</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-template>    \r\n</p-dataGrid>\r\n<p-dataList [value]=\"elements\" styleClass=\"h100p\" *ngIf=\"smallGrid\">\r\n    <ng-template let-element pTemplate=\"item\">\r\n        <div class=\"ui-grid ui-grid-responsive ui-widget-content\">\r\n            <div pDraggable=\"dd_elem\" class=\"ui-grid-row\" style=\"padding: 0.5em\" (onDragStart)=\"dragStart($event,element)\">\r\n                <div class=\"ui-grid-col-3\">\r\n                    <img class=\"center\" src=\"/api/shape/{{element.id | uniquesuffix}}\" width=\"32\" title=\"{{element.name}}\">\r\n                </div>\r\n                <div class=\"ui-grid-col-8\">\r\n                    <div class=\"ui-helper-clearfix text-ellipsis\">{{element.name}}</div>\r\n                    <small>{{element.width + ' x ' + element.height}}</small>\r\n                </div>\r\n                <div class=\"ui-grid-col-1\">\r\n                    <i class=\"fa fa-2x {{element.selected ? 'fa-check-square-o' : 'fa-square-o' }}\" style=\"cursor:pointer\" (click)=\"selectElement(element)\"></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n</p-dataList>";

/***/ },

/***/ 671:
/***/ function(module, exports) {

module.exports = "<form class=\"h100p\" [formGroup]=\"employeeForm\" (ngSubmit)=\"save($event, employeeForm.value)\">\r\n    <detail>\r\n        <nav>\r\n            <button pButton type=\"button\" title=\"Назад\" icon=\"fa-arrow-left\" (click)=\"location.back()\"></button>\r\n            <div class=\"ui-toolbar-group-right\">\r\n                <button pButton type=\"submit\" label=\"Сохранить\" icon=\"fa-floppy-o\" [disabled]=\"!employeeForm.valid\"></button>\r\n            </div>\r\n        </nav>\r\n        <main>\r\n\r\n            <input type=\"hidden\" formControlName=\"id\" />\r\n\r\n            <p-accordion>\r\n\r\n                <p-accordionTab header=\"Сотрудник\" [selected]=\"true\">\r\n\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                ФИО *:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <input pInputText type=\"text\" formControlName=\"name\" class=\"w100p\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Организация *:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <p-dropdown formControlName=\"orgId\" [options]=\"orgs\" autoWidth=\"false\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Должность :\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <input pInputText type=\"text\" formControlName=\"position\" class=\"w100p\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Системный пользователь\">\r\n                    <sysuser-detail [group]=\"employeeForm.controls.user\"></sysuser-detail>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Контакты\" *ngIf=\"employeeForm.value.id\">\r\n                    <contact-table [contacts]=\"contacts\" [employeeId]=\"employeeForm.value.id\"></contact-table>\r\n                </p-accordionTab>\r\n\r\n            </p-accordion>\r\n        </main>\r\n    </detail>\r\n</form>";

/***/ },

/***/ 672:
/***/ function(module, exports) {

module.exports = "<div class=\"ui-g\" [formGroup]=\"sysUserForm\">\r\n    \r\n    <input type=\"hidden\" formControlName=\"id\"/>\r\n\r\n    <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n        <div class=\"ui-g-4\">\r\n            {{bindLabel}} :\r\n        </div>\r\n        <div class=\"ui-g-8\">\r\n            <p-inputSwitch formControlName=\"bind\" onLabel=\"Да\" offLabel=\"Нет\"></p-inputSwitch>\r\n        </div>\r\n    </div>\r\n    <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n        <div class=\"ui-g-4\">\r\n            Логин <span *ngIf=\"requireCredentialsValidation\">*</span>:\r\n        </div>\r\n        <div class=\"ui-g-8\">\r\n            <input pInputText type=\"text\" formControlName=\"login\" class=\"w100p\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n        <div class=\"ui-g-4\">\r\n            Роль <span *ngIf=\"requireCredentialsValidation\">*</span>:\r\n        </div>\r\n        <div class=\"ui-g-8\">\r\n            <p-dropdown formControlName=\"role\" [options]=\"roles\" autoWidth=\"false\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n        </div>\r\n    </div>\r\n    <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n        <div class=\"ui-g-4\">\r\n            Пароль <span *ngIf=\"requirePasswordValidation\">*</span>:\r\n        </div>\r\n        <div class=\"ui-g-8 ui-g-nopad\">\r\n            <div class=\"ui-g-5\">\r\n                <input type=\"password\" pPassword formControlName=\"password\" placeholder=\"Пароль\" class=\"w100p\" />\r\n            </div>\r\n            <div class=\"ui-g-1\">\r\n            </div>\r\n            <div class=\"ui-g-3\">\r\n                Заблокирован :\r\n            </div>\r\n            <div class=\"ui-g-3\">\r\n                <p-inputSwitch formControlName=\"locked\" onLabel=\"Да\" offLabel=\"Нет\"></p-inputSwitch>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>";

/***/ },

/***/ 673:
/***/ function(module, exports) {

module.exports = "<p-dataTable dataKey=\"id\" matchTable=\"ui-datatable\" [value]=\"groups\" selectionMode=\"single\" styleClass=\"h100p no-header screen\" [rows]=\"10\" (onRowSelect)=\"selectRow($event)\">\r\n    <p-column [style]=\"{'width':'2em'}\">\r\n        <ng-template let-group=\"rowData\" pTemplate=\"body\">\r\n            <i class=\"{{group.icon}}\"></i>\r\n        </ng-template>\r\n    </p-column>    \r\n    <p-column field=\"name\"></p-column>    \r\n</p-dataTable>";

/***/ },

/***/ 674:
/***/ function(module, exports) {

module.exports = "<form class=\"h100p\" [formGroup]=\"hallForm\" (ngSubmit)=\"save($event, hallForm.value)\">\r\n    <detail>\r\n        <nav>\r\n            <button pButton type=\"button\" title=\"Назад\" icon=\"fa-arrow-left\" (click)=\"location.back()\"></button>\r\n            <div class=\"ui-toolbar-group-right\">\r\n                <button pButton type=\"submit\" label=\"Сохранить\" icon=\"fa-floppy-o\" [disabled]=\"!hallForm.valid\"></button>\r\n            </div>\r\n        </nav>\r\n\r\n        <main>\r\n            <input type=\"hidden\" formControlName=\"id\" />\r\n\r\n            <p-accordion>\r\n                <p-accordionTab header=\"Холл\" [selected]=\"true\">\r\n\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Наименование *:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <input pInputText type=\"text\" formControlName=\"name\" class=\"w100p\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Описание :\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <textarea pInputTextarea rows=\"6\" formControlName=\"description\" class=\"w100p\"></textarea>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Размер\">\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                <div class=\"ui-g-6\">\r\n                                    Длина *:\r\n                                </div>\r\n                                <div class=\"ui-g-6\">\r\n                                    <p-spinner formControlName=\"height\" [min]=\"1\" [step]=\"0.5\"></p-spinner>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ui-g-2\"></div>\r\n                            <div class=\"ui-g-4\">\r\n                                <div class=\"ui-g-6\">\r\n                                    Ширина *:\r\n                                </div>\r\n                                <div class=\"ui-g-6\">\r\n                                    <p-spinner formControlName=\"width\" [min]=\"1\" [step]=\"0.5\"></p-spinner>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Схемы\" *ngIf=\"hallForm.value.id\">\r\n                    <scheme-table [hallId]=\"hallForm.value.id\" [schemes]=\"schemes\"></scheme-table>\r\n                </p-accordionTab>\r\n            </p-accordion>\r\n        </main>\r\n\r\n    </detail>\r\n</form>\r\n";

/***/ },

/***/ 675:
/***/ function(module, exports) {

module.exports = "<p-dataTable matchTable=\"ui-datatable\" dataKey=\"id\" [value]=\"halls\" rows=\"10\" [loading]=\"loading\" \r\n             selectionMode=\"{{this.editMode || this.readOnly ? 'multiple' : 'single'}}\" styleClass=\"h100p {{this.readOnly ? 'no-header' : ''}}\" \r\n             [(selection)]=\"selectedHalls\" (onRowSelect)=\"selectRow($event)\" (onRowUnselect)=\"unSelectRow($event)\">\r\n    <p-header *ngIf=\"!readOnly\">\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <p-toggleButton onIcon=\"fa fa-ban\" onLabel=\"Готово\" offIcon=\"fa fa-pencil\" offLabel=\"Правка\" (onChange)=\"changeEditMode()\"></p-toggleButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </p-header>\r\n    <p-footer *ngIf=\"!readOnly\">\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-6 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-left\">\r\n                    <button type=\"button\" pButton icon=\"fa-trash\" title=\"Удалить\" [disabled]=\"this.selectedHalls.length === 0\" *ngIf=\"editMode\" (click)=\"removeRows()\"></button>\r\n                </div>\r\n            </div>\r\n            <div class=\"ui-g-6 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <button type=\"button\" pButton icon=\"fa-plus\" title=\"Добавить холл\" [routerLink]=\"['/halls/new']\"></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </p-footer>\r\n    <p-column selectionMode=\"multiple\" [style]=\"{ 'width':'3em'}\" *ngIf=\"editMode || readOnly\"></p-column>\r\n    <p-column field=\"name\" header=\"Наименование\" [sortable]=\"true\"></p-column>\r\n    <p-column field=\"description\" header=\"Описание\" *ngIf=\"!readOnly\"></p-column>\r\n    <p-column field=\"size\" header=\"Размер, м\" [style]=\"{ 'width':'15%'}\" *ngIf=\"!readOnly\">\r\n        <ng-template let-hall=\"rowData\" pTemplate=\"body\">\r\n            {{hall.width}} x {{hall.height}}\r\n        </ng-template>\r\n    </p-column>\r\n</p-dataTable>";

/***/ },

/***/ 676:
/***/ function(module, exports) {

module.exports = "<p-dataTable dataKey=\"id\" matchTable=\"ui-datatable\" [value]=\"members\" [rows]=\"10\" [editable]=\"editable\" [loading]=\"loading\"\r\n             [selectionMode]=\"selectionMode\" [(selection)]=\"selectedMembers\" styleClass=\"h100p\"\r\n             (onRowSelect)=\"selectRow($event)\" (onRowUnselect)=\"unSelectRow($event)\">\r\n    <p-column field=\"name\" header=\"ФИО\" [sortable]=\"true\"></p-column>\r\n    <p-column field=\"job\" header=\"Организация\" [sortable]=\"true\"></p-column>\r\n    <p-column field=\"position\" header=\"Должность\"></p-column>\r\n    <p-column field=\"seat\" header=\"Место\" [editable]=\"editable\" [style]=\"{ 'overflow':'visible', 'text-align': 'center', 'vertical-align': 'middle', 'width': '15%'}\" *ngIf=\"editable\">\r\n        <ng-template let-col let-member=\"rowData\" pTemplate=\"body\">\r\n            <span class=\"fa-stack circle {{member.state == MemberState.Confirmed ? 'on' : ''}}\">\r\n                <span class=\"fa-lg\" style=\"vertical-align: initial\">{{member[col.field]}}</span>\r\n            </span>\r\n        </ng-template>\r\n        <ng-template let-col let-member=\"rowData\" pTemplate=\"editor\">\r\n            <p-dropdown [ngModel]=\"member[col.field]\" [options]=\"availableSeats\" [autoWidth]=\"false\" [style]=\"{'width':'100%'}\" (onChange)=\"changeSeat($event.value, member)\"></p-dropdown>\r\n        </ng-template>\r\n    </p-column>\r\n    <p-column header=\"В помещении\" *ngIf=\"editable\" [style]=\"{'text-align': 'center', 'width': '15%'}\">\r\n        <ng-template let-member=\"rowData\" pTemplate=\"body\">\r\n            <p-inputSwitch onLabel=\"Да\" offLabel=\"Нет\" [ngModel]=\"member.state === MemberState.Confirmed\" (onChange)=\"changeState($event.checked, member)\"></p-inputSwitch>\r\n        </ng-template>\r\n    </p-column>\r\n</p-dataTable>";

/***/ },

/***/ 677:
/***/ function(module, exports) {

module.exports = "<form class=\"h100p\" [formGroup]=\"orgForm\" (ngSubmit)=\"save($event, orgForm.value)\">\r\n    <detail>\r\n\r\n        <nav>\r\n            <button pButton type=\"button\" title=\"Назад\" icon=\"fa-arrow-left\" (click)=\"location.back()\"></button>\r\n            <div class=\"ui-toolbar-group-right\">\r\n                <button pButton type=\"submit\" label=\"Сохранить\" icon=\"fa-floppy-o\" [disabled]=\"!orgForm.valid\"></button>\r\n            </div>\r\n        </nav>\r\n        <main>\r\n\r\n            <input type=\"hidden\" formControlName=\"id\" />\r\n\r\n            <p-accordion>\r\n                <p-accordionTab header=\"Организация\" [selected]=\"true\">\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Код *:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <input pInputText type=\"text\" formControlName=\"code\" class=\"w100p\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Наименование *:\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <input pInputText type=\"text\" formControlName=\"name\" class=\"w100p\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                Описание :\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <textarea pInputTextarea rows=\"6\" formControlName=\"description\" class=\"w100p\"></textarea>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Адрес\">\r\n                    <div class=\"ui-g\">\r\n                        <div class=\"ui-lg-8 ui-g-12 ui-g-nopad\">\r\n                            <div class=\"ui-g-4\">\r\n                                &nbsp;\r\n                            </div>\r\n                            <div class=\"ui-g-8\">\r\n                                <textarea pInputTextarea type=\"text\" rows=\"6\" formControlName=\"address\" class=\"w100p\"></textarea>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </p-accordionTab>\r\n\r\n                <p-accordionTab header=\"Логотип (макс. размер - 256 x 256)\">\r\n                    <p-fileUpload #fileUpload chooseLabel=\"Выбрать\" accept=\"image/*\" multiple=\"true\" maxFileSize=\"1000000\" previewWidth=\"256\" styleClass=\"hidden\" (onSelect)=\"onSelect()\"></p-fileUpload>\r\n                    <div #logo class=\"ui-fileupload-content ui-widget-content ui-corner-bottom ui-helper-hidden\" *ngIf=\"!noLogo && id && (fileUpload.files.length == 0)\">\r\n                        <div class=\"ui-fileupload-files\">\r\n                            <div>\r\n                                <div class=\"ui-fileupload-row\">\r\n                                    <div>\r\n                                        <img src=\"/api/logo/{{id | uniquesuffix }}\" width=\"256\" (load)=\"logo.classList.remove('ui-helper-hidden');\">\r\n                                    </div>\r\n                                    <div>\r\n                                        <button pButton type=\"button\" title=\"Удалить\" icon=\"fa-close\" (click)=\"deleteLogo()\"></button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </p-accordionTab>\r\n            </p-accordion>\r\n        </main>\r\n    </detail>\r\n</form>";

/***/ },

/***/ 678:
/***/ function(module, exports) {

module.exports = "<p-panel #pnl styleClass=\"h100p\" [style]=\"{'border': 'none'}\">\r\n    <p-treeTable matchTable=\"ui-treetable\" [value]=\"nodes\" selectionMode=\"{{this.editMode || this.readOnly ? 'checkbox' : 'single'}}\" styleClass=\"h100p {{this.readOnly ? 'no-header' : ''}}\"\r\n                 [(selection)]=\"selectedNodes\" (onNodeExpand)=\"loadNode($event)\" (onNodeSelect)=\"selectNode($event)\" (onNodeUnselect)=\"unSelectNode($event)\">\r\n        <p-header>\r\n            <div class=\"ui-g\">\r\n                <div class=\"ui-g-8 ui-g-nopad\">\r\n                    <input type=\"text\" pInputText placeholder=\"Поиск\" [ngModel]=\"filter\" [ngClass]=\"'w100p'\" (ngModelChange)=\"filterChange($event)\" (keypress)=\"filterKeyPressed($event)\" />\r\n                </div>\r\n                <div class=\"ui-g-4 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-right\">\r\n                        <p-toggleButton onIcon=\"fa fa-user-circle\" onLabel=\"&zwnj;\" offIcon=\"fa fa-building\" offLabel=\"&zwnj;\" [(ngModel)]=\"emplSearch\" [title]=\"searchTitle\" (onChange)=\"changeSearchKind($event)\"></p-toggleButton>\r\n                        <p-toggleButton onIcon=\"fa fa-ban\" onLabel=\"Готово\" offIcon=\"fa fa-pencil\" offLabel=\"Правка\" (onChange)=\"changeEditMode()\" *ngIf=\"!readOnly\"></p-toggleButton>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </p-header>\r\n        <p-footer *ngIf=\"!readOnly\">\r\n            <div class=\"ui-g\">\r\n                <div class=\"ui-g-6 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-left\">\r\n                        <button type=\"button\" pButton icon=\"fa-trash\" title=\"Удалить\" [disabled]=\"this.selectedNodes.length === 0\" *ngIf=\"editMode\" (click)=\"removeNodes()\"></button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-g-6 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-right\">\r\n                        <button type=\"button\" pButton icon=\"fa-plus\" title=\"Добавить организацию\" [routerLink]=\"['/orgs/new']\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </p-footer>\r\n        <p-column field=\"name\" header=\"Наименование\" [style]=\"{ 'text-overflow': 'ellipsis' }\">\r\n            <ng-template let-col let-node=\"rowData\" pTemplate=\"body\">\r\n                <img #icon src=\"/api/icon/{{node.data['id'] | uniquesuffix}}\" width=\"32\" (load)=\"icon.classList.remove('ui-helper-hidden')\" class=\"ui-helper-hidden\" *ngIf=\"!node.leaf\">\r\n                {{node.data[col.field]}}\r\n            </ng-template>\r\n        </p-column>\r\n        <p-column field=\"description\" header=\"Описание\" [style]=\"{ 'text-overflow': 'ellipsis' }\"></p-column>\r\n        <p-column field=\"locked\" [style]=\"{ 'width':'60px'}\" [styleClass]=\"'center'\" *ngIf=\"!readOnly\">\r\n            <ng-template let-col let-node=\"rowData\" pTemplate=\"body\">\r\n                <i class=\"fa fa-lg fa-user-plus\" title=\"Добавить сотрудника\" *ngIf=\"!node.leaf && editMode\" (click)=\"addEmployee($event, node.data['id'])\"></i>\r\n                <i class=\"fa fa-lg fa-lock\" title=\"Блокирован\" *ngIf=\"node.leaf && node.data[col.field]\"></i>\r\n            </ng-template>\r\n        </p-column>\r\n    </p-treeTable>\r\n</p-panel>\r\n<p-blockUI [blocked]=\"loading\" [target]=\"pnl\">\r\n    <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\" style=\"position:absolute; top:40%; left:50%\"></i>\r\n</p-blockUI>\r\n";

/***/ },

/***/ 679:
/***/ function(module, exports) {

module.exports = "<div #wrapper class=\"h100p\">\r\n    <div class=\"ui-g-12 ui-g-nopad\" *ngIf=\"!readOnly\">\r\n        <p-toolbar>\r\n            <div class=\"ui-g-6 ui-g-nopad\">\r\n                <p-toggleButton onLabel=\"&zwnj;\" offLabel=\"&zwnj;\" onIcon=\"fa-angle-double-up\" offIcon=\"fa-angle-double-down\" (onChange)=\"schemeformVisible = !schemeformVisible\"></p-toggleButton>\r\n                <button pButton type=\"button\" title=\"Добавить метку\" icon=\"fa-map-marker\" (click)=\"addMark()\"></button><button pButton type=\"button\" title=\"Дублировать\" icon=\"fa-clone\" [disabled]=\"removeButtonDisabled\" (click)=\"shapeClone()\"></button><button pButton type=\"button\" title=\"Удалить\" icon=\"fa-trash-o\" [disabled]=\"removeButtonDisabled\" (click)=\"shapeRemove()\"></button>\r\n                <button pButton type=\"button\" title=\"Повернуть на 45&deg; влево\" icon=\"fa-undo\" [disabled]=\"removeButtonDisabled\" (click)=\"shapeRotate(-45)\"></button><button pButton type=\"button\" title=\"Повернуть на 45&deg; вправо\" icon=\"fa-repeat\" [disabled]=\"removeButtonDisabled\" (click)=\"shapeRotate(45)\"></button>\r\n                <button pButton type=\"button\" title=\"Сохранить\" icon=\"fa-floppy-o\" (click)=\"save(schemeForm.value)\"></button>\r\n            </div>            \r\n            \r\n            <div class=\"ui-g-6 ui-g-nopad\">                \r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <button pButton type=\"button\" icon=\"fa-search-plus\" (click)=\"zoom()\"></button><button pButton type=\"button\" icon=\"fa-search-minus\" (click)=\"zoom(false)\"></button>\r\n                    <button pButton type=\"button\" icon=\"fa-dot-circle-o\" title=\"По центру\" (click)=\"centerView()\"></button>\r\n                    <p-dropdown [options]=\"intervals\" [(ngModel)]=\"gridInterval\" (onChange)=\"intervalChange($event)\" placeholder=\"Шаг, м\" title=\"Сетка\"></p-dropdown>\r\n                </div>\r\n            </div>\r\n        </p-toolbar>\r\n    </div>\r\n    <div class=\"ui-g-12 ui-resizable ui-g-nopad\" *ngIf=\"schemeformVisible\">\r\n        <form [formGroup]=\"schemeForm\">\r\n            <div class=\"ui-autocomplete-panel ui-widget-header ui-toolbar ui-g-6\" style=\"z-index: 2\">\r\n                <input type=\"hidden\" formControlName=\"id\" />\r\n                <input pInputText type=\"text\" formControlName=\"name\" class=\"ui-g-12\"/>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div #canvasBox pDroppable=\"dd_elem\" class=\"ui-g-12 ui-grid-pad\" style=\"overflow: hidden\" (onDrop)=\"drop($event)\"></div>\r\n</div>\r\n";

/***/ },

/***/ 68:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var rxjs_1 = __webpack_require__(33);
/**
 * Посредник между компонентами
 */
var Mediator = (function () {
    function Mediator() {
        var _this = this;
        this.eventBus = new rxjs_1.Subject();
        this.broadcast = function (key, data) { return _this.eventBus.next({ key: key, data: data }); };
    }
    /**
     * Подписаться на уведомление
     * @param name
     */
    Mediator.prototype.on = function (key) {
        return this.eventBus
            .asObservable()
            .filter(function (event) { return event.key === key; })
            .map(function (event) { return event.data; });
    };
    Mediator = __decorate([
        core_1.Injectable()
    ], Mediator);
    return Mediator;
}());
exports.Mediator = Mediator;


/***/ },

/***/ 680:
/***/ function(module, exports) {

module.exports = "<p-dataTable dataKey=\"id\" [value]=\"schemes\" [rows]=\"10\" selectionMode=\"{{editMode ? 'multiple' : 'single'}}\" [(selection)]=\"selectedSchemes\" (onRowSelect)=\"selectRow($event)\" styleClass=\"no-header\">\r\n    <p-header>\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <p-toggleButton onIcon=\"fa fa-ban\" onLabel=\"Готово\" offIcon=\"fa fa-pencil\" offLabel=\"Правка\" (onChange)=\"changeEditMode()\"></p-toggleButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </p-header>\r\n    <p-footer>\r\n        <form [formGroup]=\"schemeForm\" (ngSubmit)=\"addScheme(schemeForm.value)\">\r\n            <div class=\"ui-g\">\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-left\">\r\n                        <button type=\"button\" pButton icon=\"fa-trash\" title=\"Удалить\" [disabled]=\"this.selectedSchemes.length === 0\" *ngIf=\"editMode\" (click)=\"removeRows()\"></button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-g-8 ui-g-nopad\">\r\n                    <input pInputText type=\"text\" formControlName=\"name\" class=\"w100p\" />\r\n                </div>\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-right\">\r\n                        <button type=\"submit\" pButton icon=\"fa-plus\" title=\"Добавить cхему\" [disabled]=\"!schemeForm.valid\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </p-footer>\r\n    <p-column selectionMode=\"multiple\" [style]=\"{ 'width':'3em'}\" *ngIf=\"editMode\"></p-column>\r\n    <p-column field=\"name\" header=\"Наименование\"></p-column>\r\n    <p-column [style]=\"{ 'width':'60px'}\" styleClass=\"center\" *ngIf=\"editMode\">\r\n        <ng-template let-col let-scheme=\"rowData\" pTemplate=\"body\">\r\n            <i class=\"fa fa-lg fa-files-o\" title=\"Копировать\" (click)=\"copyScheme($event, scheme.id)\"></i>\r\n        </ng-template>\r\n    </p-column>\r\n</p-dataTable>";

/***/ },

/***/ 681:
/***/ function(module, exports) {

module.exports = "<div #wrapper class=\"h100p\">\r\n    <div class=\"ui-grid ui-grid-responsive ui-grid-pad\">\r\n        <div class=\"ui-grid-row\">\r\n            <div class=\"ui-grid-col-12\">\r\n                <input type=\"text\" pInputText placeholder=\"Поиск по каталогу\" [ngModel]=\"filter\" (ngModelChange)=\"filterChange($event)\" class=\"w100p\" style=\"-moz-box-sizing: border-box; box-sizing: border-box\" (keypress)=\"filterKeyPressed($event)\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"ui-grid-row\">\r\n            <div class=\"ui-grid-col-12\" [ngStyle]=\"{'padding-top':0, 'padding-bottom':0}\">\r\n                <p-toolbar>\r\n                    <div class=\"ui-toolbar-group-left\">\r\n                        <button pButton type=\"button\" icon=\"fa-home\" (click)=\"homeButtonClick()\"></button><button pButton type=\"button\" icon=\"fa-th-large\" title=\"Сетка\" (click)=\"toggleGridView(false)\" *ngIf=\"gridButtonsVisible\"></button><button pButton type=\"button\" icon=\"fa-list\" title=\"Список\" (click)=\"toggleGridView(true)\" *ngIf=\"gridButtonsVisible\"></button>\r\n                        <div ></div>\r\n                    </div>\r\n                    <div class=\"ui-toolbar-group-right\">\r\n                        <button pButton type=\"button\" icon=\"fa-bars\" [disabled]=\"groupType != GroupType.User && this.selectedElementIds.length === 0\" (click)=\"toggleMenu($event)\"></button>\r\n                        <p-menu #menu popup=\"popup\" [model]=\"menuItems\" appendTo=\"body\"></p-menu>\r\n                    </div>\r\n                </p-toolbar>\r\n                <div #menuToggler (click)=\"menu.toggle($event)\"></div>\r\n                <div  [ngStyle]=\"{'font-weight':'bold', 'padding':'.25em .5em'}\" >&nbsp;{{header}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #content style=\"overflow: auto; padding:.25em .5em\">\r\n        <router-outlet></router-outlet>\r\n    </div>\r\n</div>";

/***/ },

/***/ 682:
/***/ function(module, exports) {

module.exports = "<form [formGroup]=\"shapeForm\" >\r\n    <p-accordion [multiple]=\"true\">\r\n        <p-accordionTab header=\"Код\" [selected]=\"true\" *ngIf=\"shapeForm.value.code!==null\">\r\n            <input type=\"text\" pInputText formControlName=\"code\" placeholder=\"Код\" class=\"w100p\" />\r\n        </p-accordionTab>\r\n        <p-accordionTab header=\"Поворот\" [selected]=\"true\">\r\n            <div class=\"ui-grid ui-grid-pad\">\r\n                <div class=\"ui-grid-row\">\r\n                    <div class=\"ui-grid-col-12\">\r\n                        угол :\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-grid-row\">\r\n                    <p-spinner formControlName=\"angle\"></p-spinner>\r\n                </div>\r\n            </div>\r\n        </p-accordionTab>\r\n        <p-accordionTab header=\"Размер\" [selected]=\"true\">\r\n            <div class=\"ui-grid ui-grid-pad\">\r\n                <div class=\"ui-grid-row\">\r\n                    <div class=\"ui-grid-col-12\">\r\n                        длина :\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-grid-row\">\r\n                    <p-spinner formControlName=\"length\" [min]=\"0\"></p-spinner>\r\n                </div>\r\n                <div class=\"ui-grid-row\">\r\n                    <div class=\"ui-grid-col-12\">\r\n                        ширина :\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-grid-row\">\r\n                    <p-spinner formControlName=\"width\" [min]=\"0\"></p-spinner>\r\n                </div>\r\n            </div>\r\n        </p-accordionTab>\r\n</p-accordion>\r\n</form>\r\n";

/***/ },

/***/ 683:
/***/ function(module, exports) {

module.exports = "<p-dataTable matchTable=\"ui-datatable\" overflow=\"hidden\" [value]=\"members\" [rows]=\"10\" [loading]=\"loading\" styleClass=\"h100p no-header screen\">\r\n    <p-column [style]=\"{ 'overflow':'visible', 'text-align': 'center', 'vertical-align': 'middle', 'width': '15%'}\">\r\n        <ng-template let-col let-member=\"rowData\" pTemplate=\"body\">\r\n            <span class=\"fa-stack fa-lg circle {{member.state == MemberState.Confirmed ? 'on' : ''}}\">\r\n                <span class=\"fa-lg\" style=\"vertical-align: initial\">{{member.seat}}</span>\r\n            </span>\r\n        </ng-template>\r\n    </p-column>\r\n\r\n    <p-column>\r\n        <ng-template let-member=\"rowData\" pTemplate=\"body\">\r\n            <h2>{{member.name}}</h2>\r\n            <div>{{member.job}}. {{member.position}}</div>\r\n        </ng-template>    \r\n    </p-column>\r\n    \r\n</p-dataTable>";

/***/ },

/***/ 684:
/***/ function(module, exports) {

module.exports = "<p-toolbar>\r\n    <button pButton type=\"button\" icon=\"fa-chevron-left\" (click)=\"addDays(-1)\"></button>\r\n    <h3 style=\"display: inline-block\">{{startDate | date:'dd.MM.yyyy'}}</h3>\r\n    <button pButton type=\"button\" icon=\"fa-chevron-right\" (click)=\"addDays(1)\"></button>\r\n</p-toolbar>\r\n\r\n<p-carousel [value]=\"screens\" [firstVisible]=\"firstVisible\" numVisible=\"4\" styleClass=\"carousel\">\r\n\r\n    <ng-template let-screen pTemplate=\"item\">\r\n        \r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 center ellipsis-m4\" style=\"height: 118px\">\r\n                <span class=\"font_1\">{{screen.subject}}</span>\r\n            </div>\r\n            <div class=\"ui-g-1\"></div>\r\n            <div class=\"ui-g-10 ellipsis-m3\" style=\"height: 76px\">\r\n                {{screen.hall}}\r\n            </div>\r\n            <div class=\"ui-g-1\"></div>\r\n            <div class=\"ui-g-1\"></div>\r\n            <div class=\"ui-g-10\">\r\n                <i class=\"fa fa-exclamation-circle\" *ngIf=\"screen.state === ConfState.Active\"></i>\r\n                {{ConfState.toName(screen.state)}}\r\n            </div>\r\n            <div class=\"ui-g-1\"></div>\r\n            <div class=\"ui-g-1\"></div>\r\n            <div class=\"ui-g-10\">\r\n                {{screen.startDate | datex:'HH:mm'}} - {{screen.endDate | datex:'HH:mm'}}\r\n            </div>\r\n            <div class=\"ui-g-1\"></div>\r\n            <div class=\"ui-g-12 center\">\r\n                <button type=\"button\" pButton icon=\"fa-info\" label=\"Подробнее\" [routerLink]=\"['/conferences', screen.id]\"></button>\r\n                <button type=\"button\" pButton icon=\"fa-desktop\" (click)=\"openDesktop(screen.id)\"></button>\r\n            </div>\r\n        </div>\r\n       \r\n    </ng-template>\r\n\r\n</p-carousel>\r\n";

/***/ },

/***/ 685:
/***/ function(module, exports) {

module.exports = "<div #wrapper class=\"ui-g h100p\">\r\n    <div #header class=\"ui-g-12 h72 ui-g-nopad\" style=\"margin-bottom: 0.25em\">\r\n        <div class=\"ui-g-2 h100p\"><img class=\"tnlogo\" src=\"/assets/logo_tn.png\"/></div>\r\n        <div class=\"ui-g-10 bggreen font2 ui-corner-all\" style=\"margin-top: 1em\">\r\n            <div class=\"ui-g-9 ui-g-nopad ellipsis\">{{activeScreen?.subject}}</div>\r\n            <div class=\"ui-g-3 ui-g-nopad ellipsis\">\r\n                <span class=\"ui-toolbar-group-right\">\r\n                    {{now | datex:'DD.MM.YYYY HH:mm:ss'}}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #box1 class=\"ui-g-4 ui-g-nopad ui-corner-left\" style=\"overflow: hidden\">\r\n        <div class=\"h100p\" [@slideInAnimation]=\"showSpeaker ? 'out': 'in'\" style=\"float: left\">\r\n            <member-screen></member-screen>\r\n        </div>\r\n        <div class=\"h100p ui-widget-content\" [@slideOutAnimation]=\"showSpeaker ? 'in': 'out'\" style=\"-moz-box-sizing: border-box; box-sizing: border-box; position: relative\">\r\n            <div id=\"speaker\" class=\"ui-g\">\r\n                <div class=\"ui-g-12 center ellipsis-m4\" style=\"height: 118px\">\r\n                    <span class=\"font_1\">{{speaker}}</span>\r\n                </div>\r\n                <div class=\"ui-g-1\"></div>\r\n                <div class=\"ui-g-10 ellipsis-m3 center\" style=\"height: 76px\">\r\n                    {{speaker}}\r\n                </div>\r\n                <div class=\"ui-g-1\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #box2 class=\"ui-g-8 ui-widget-content ui-g-nopad ui-corner-right\">\r\n        <scheme-main [schemeId]=\"activeScreen?.schemeId\"></scheme-main>\r\n    </div>\r\n    <div #footer class=\"ui-g-12 font2 h48 ui-g-nopad\" style=\"margin-top: 0.25em\">\r\n        <div class=\"ui-g-2 ui-corner-left bgred\">\r\n            {{activeScreen?.startDate | datex:'HH:mm'}} - {{activeScreen?.endDate | datex: 'HH:mm'}}\r\n        </div>\r\n        <div class=\"ui-g-10 ui-md-10 bggreen ellipsis ui-corner-right\">{{ticker}} &nbsp;</div>\r\n    </div>\r\n</div>\r\n";

/***/ },

/***/ 686:
/***/ function(module, exports) {

module.exports = "<p-blockUI [blocked]=\"loading\" [target]=\"pnl\">\r\n    <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\" style=\"position:absolute; top:40%; left:50%\"></i>\r\n</p-blockUI>\r\n\r\n<form class=\"h100p\" [formGroup]=\"sendMessageForm\" (ngSubmit)=\"send($event, sendMessageForm.value)\">\r\n    <detail>\r\n        <nav>\r\n            <button pButton type=\"button\" title=\"Назад\" icon=\"fa-arrow-left\" (click)=\"location.back()\"></button>\r\n            <div class=\"ui-toolbar-group-right\">\r\n                <button pButton type=\"button\" title=\"Создать ссылку\" icon=\"fa-link\" [disabled]=\"loading\" (click)=\"addLink()\"></button>\r\n                <button pButton type=\"submit\" label=\"Отправить\" icon=\"fa-envelope-o\" [disabled]=\"!sendMessageForm.valid || loading\"></button>\r\n            </div>\r\n        </nav>\r\n\r\n        <main>\r\n\r\n            <p-panel #pnl>\r\n                <div class=\"ui-g\">\r\n                    <div class=\"ui-g-12 ui-widget\">\r\n                        <p-multiSelect defaultLabel=\"Кому\" formControlName=\"selectedRecipients\" [options]=\"recipients\" [style]=\"{'width':'100%'}\"></p-multiSelect>\r\n                    </div>\r\n                    <div class=\"ui-g-12 ui-widget\">\r\n                        <textarea pInputTextarea formControlName=\"body\" class=\"w100p\" rows=\"12\"></textarea>\r\n                        <p-messages [value]=\"msgs\"></p-messages>\r\n                    </div>\r\n                </div>\r\n            </p-panel>\r\n        </main>\r\n\r\n    </detail>\r\n</form>\r\n\r\n";

/***/ },

/***/ 687:
/***/ function(module, exports) {

module.exports = "<p-dataTable dataKey=\"id\" [value]=\"tickers\" [rows]=\"10\" [editable]=\"true\" selectionMode=\"{{this.editMode ? 'multiple' : ''}}\" [(selection)]=\"selectedTickers\" styleClass=\"no-header\">\r\n    <p-header *ngIf=\"!readOnly\">\r\n        <div class=\"ui-g\">\r\n            <div class=\"ui-g-12 ui-g-nopad\">\r\n                <div class=\"ui-toolbar-group-right\">\r\n                    <p-toggleButton onIcon=\"fa fa-ban\" onLabel=\"Готово\" offIcon=\"fa fa-pencil\" offLabel=\"Правка\" (onChange)=\"changeEditMode()\"></p-toggleButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </p-header>\r\n    <p-footer>\r\n        \r\n        <form [formGroup]=\"tickerForm\" (ngSubmit)=\"addTicker(tickerForm.value)\">\r\n            <div class=\"ui-g\">\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-left\">\r\n                        <button type=\"button\" pButton icon=\"fa-trash\" title=\"Удалить\" [disabled]=\"this.selectedTickers.length === 0\" *ngIf=\"editMode\" (click)=\"removeRows()\"></button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-g-8 ui-g-nopad\">\r\n                    <textarea pInputTextarea formControlName=\"content\" rows=\"3\" class=\"w100p\"></textarea>\r\n                </div>\r\n                <div class=\"ui-g-2 ui-g-nopad\">\r\n                    <div class=\"ui-toolbar-group-right\">\r\n                        <button type=\"submit\" pButton icon=\"fa-plus\" title=\"Добавить\" [disabled]=\"!tickerForm.valid\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </p-footer>\r\n    <p-column selectionMode=\"multiple\" [style]=\"{ 'width':'3em'}\" *ngIf=\"editMode\"></p-column>\r\n    <p-column field=\"content\" [editable]=\"true\">\r\n        <ng-template let-col let-ticker=\"rowData\" pTemplate=\"editor\">\r\n            <textarea pInputTextarea [ngModel]=\"ticker[col.field]\" rows=\"3\" class=\"w100p\" (blur)=\"changeContent($event, ticker)\"></textarea>\r\n        </ng-template>\r\n    </p-column>\r\n    <p-column field=\"active\" [style]=\"{'text-align': 'center', 'width': '15%'}\">\r\n        <ng-template let-col let-ticker=\"rowData\" pTemplate=\"body\">\r\n            <p-inputSwitch onLabel=\"Вкл\" offLabel=\"Откл\" [ngModel]=\"ticker[col.field]\" (onChange)=\"changeActive($event, ticker)\"></p-inputSwitch>\r\n        </ng-template>\r\n    </p-column>\r\n</p-dataTable>";

/***/ },

/***/ 86:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var moment = __webpack_require__(2);
/**
 * Форматирование dateTime pipe (реализация через moment.js)
 */
var DatexPipe = (function () {
    function DatexPipe() {
    }
    DatexPipe.prototype.transform = function (value, format) {
        if (format === void 0) { format = ""; }
        // Try and parse the passed value.
        var momentDate = moment(value);
        // If moment didn't understand the value, return it unformatted.
        if (!momentDate.isValid())
            return value;
        // Otherwise, return the date formatted as requested.
        return momentDate.format(format);
    };
    DatexPipe = __decorate([
        core_1.Pipe({
            name: "datex"
        })
    ], DatexPipe);
    return DatexPipe;
}());
exports.DatexPipe = DatexPipe;
/**
 * Переводит dateTime в utc
 */
var DateToUtcPipe = (function () {
    function DateToUtcPipe() {
    }
    DateToUtcPipe.prototype.transform = function (value) {
        return new Date(value.getTime() - value.getTimezoneOffset() * 60000);
    };
    DateToUtcPipe = __decorate([
        core_1.Pipe({
            name: "utc"
        })
    ], DateToUtcPipe);
    return DateToUtcPipe;
}());
exports.DateToUtcPipe = DateToUtcPipe;
/**
 * Прибавляет к строке уникальный суффикс
 */
var UniqueSuffixPipe = (function () {
    function UniqueSuffixPipe() {
    }
    UniqueSuffixPipe.prototype.transform = function (value) {
        return value + "?" + new Date().getTime();
    };
    UniqueSuffixPipe = __decorate([
        core_1.Pipe({
            name: "uniquesuffix"
        })
    ], UniqueSuffixPipe);
    return UniqueSuffixPipe;
}());
exports.UniqueSuffixPipe = UniqueSuffixPipe;


/***/ },

/***/ 87:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var index_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var HallService = (function (_super) {
    __extends(HallService, _super);
    function HallService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/halls" : "api/halls";
        return _this;
    }
    HallService.prototype.get = function (key) {
        return this.http
            .get(this.url + "/" + key)
            .map(function (r) { return map_utils_1.default.deserialize(index_1.HallModel, r.json()); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет схемы
     * @param ids
     */
    HallService.prototype.delete = function (ids) {
        var c = { ids: ids };
        return this.http
            .post(this.url + "/delete", c)
            .catch(http_error_1.handleResponseError);
    };
    HallService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], HallService);
    return HallService;
}(http_data_service_1.HttpDataService));
exports.HallService = HallService;


/***/ },

/***/ 88:
/***/ function(module, exports, __webpack_require__) {

"use strict";
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(1);
var http_1 = __webpack_require__(24);
var http_error_1 = __webpack_require__(34);
var http_data_service_1 = __webpack_require__(39);
var models_1 = __webpack_require__(13);
var map_utils_1 = __webpack_require__(45);
var MemberService = (function (_super) {
    __extends(MemberService, _super);
    function MemberService(http) {
        var _this = _super.call(this, http) || this;
        _this.url = core_1.isDevMode() ? "http://localhost:64346/api/members" : "api/members";
        return _this;
    }
    /**
     * Добавить участников (список) в конференцию
     * @param confId
     * @param members
     * возвращает созданных участников (с id)
     */
    MemberService.prototype.addMembers = function (confId, members) {
        var body = { conferenceId: confId, members: members };
        return this.http
            .post("" + this.url, body)
            .map(function (r) { return r.json(); })
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Поменять место
     * @param memberid
     */
    MemberService.prototype.changeSeat = function (memberid, seat) {
        var body = [{ op: 'replace', path: '/seat', value: seat }];
        return this.http
            .patch(this.url + "/" + memberid, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Поменять место
     * @param memberid
     */
    MemberService.prototype.changeState = function (memberid, state) {
        var body = [{ op: 'replace', path: '/state', value: state }];
        return this.http
            .patch(this.url + "/" + memberid, body)
            .catch(http_error_1.handleResponseError);
    };
    /**
     * Удаляет участников
     * @param c
     */
    MemberService.prototype.delete = function (ids) {
        var c = { ids: ids };
        return this.http
            .post(this.url + "/delete", c)
            .catch(http_error_1.handleResponseError);
    };
    MemberService.prototype.getAll = function (confid, organizationIds) {
        if (organizationIds === void 0) { organizationIds = null; }
        var body = {};
        confid && (body.conferenceId = confid);
        organizationIds && organizationIds.length > 0 && (body.organizationIds = organizationIds);
        return this.http
            .post(this.url + "/search", body)
            .map(function (r) { return r
            .json()
            .map(function (m) { return map_utils_1.default.deserialize(models_1.MemberModel, m); }); })
            .catch(http_error_1.handleResponseError);
    };
    MemberService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], MemberService);
    return MemberService;
}(http_data_service_1.HttpDataService));
exports.MemberService = MemberService;


/***/ }

},[1027]);
//# sourceMappingURL=app.js.map